"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@keystatic";
exports.ids = ["vendor-chunks/@keystatic"];
exports.modules = {

/***/ "(ssr)/./node_modules/@keystatic/core/dist/api-daad6cc5.node.js":
/*!****************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/api-daad6cc5.node.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ component)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-aaf578e2.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-aaf578e2.node.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n\n\n\n\n\n// this is written like this rather than ArrayField<ComponentSchema> to avoid TypeScript erroring about circularity\nfunction component(options) {\n  return options;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLWRhYWQ2Y2M1Lm5vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkI7QUFDTztBQUNuQjtBQUNrQjs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7O0FBRTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9kaXN0L2FwaS1kYWFkNmNjNS5ub2RlLmpzP2MzZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgJy4vaW5kZXgtYWFmNTc4ZTIubm9kZS5qcyc7XG5pbXBvcnQgJ2VtZXJ5JztcbmltcG9ydCAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuXG4vLyB0aGlzIGlzIHdyaXR0ZW4gbGlrZSB0aGlzIHJhdGhlciB0aGFuIEFycmF5RmllbGQ8Q29tcG9uZW50U2NoZW1hPiB0byBhdm9pZCBUeXBlU2NyaXB0IGVycm9yaW5nIGFib3V0IGNpcmN1bGFyaXR5XG5mdW5jdGlvbiBjb21wb25lbnQob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZXhwb3J0IHsgY29tcG9uZW50IGFzIGMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/api-daad6cc5.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js":
/*!******************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   B: () => (/* binding */ BlocksFieldInput),\n/* harmony export */   C: () => (/* binding */ CheckboxFieldInput),\n/* harmony export */   D: () => (/* binding */ DateFieldInput),\n/* harmony export */   F: () => (/* binding */ FieldDataError),\n/* harmony export */   I: () => (/* binding */ ImageFieldInput),\n/* harmony export */   M: () => (/* binding */ MultiRelationshipInput),\n/* harmony export */   N: () => (/* binding */ NumberFieldInput),\n/* harmony export */   P: () => (/* binding */ PathReferenceInput),\n/* harmony export */   R: () => (/* binding */ RelationshipInput),\n/* harmony export */   S: () => (/* binding */ SelectFieldInput),\n/* harmony export */   U: () => (/* binding */ UrlFieldInput),\n/* harmony export */   a: () => (/* binding */ CloudImageFieldInput),\n/* harmony export */   b: () => (/* binding */ basicFormFieldWithSimpleReaderParse),\n/* harmony export */   c: () => (/* binding */ assertRequired),\n/* harmony export */   d: () => (/* binding */ DatetimeFieldInput),\n/* harmony export */   e: () => (/* binding */ FileFieldInput),\n/* harmony export */   f: () => (/* binding */ MultiselectFieldInput),\n/* harmony export */   g: () => (/* binding */ SlugFieldInput),\n/* harmony export */   h: () => (/* binding */ DocumentFieldInput),\n/* harmony export */   i: () => (/* binding */ serializeMarkdoc),\n/* harmony export */   j: () => (/* binding */ getDefaultValue),\n/* harmony export */   k: () => (/* binding */ serializeFromEditorState),\n/* harmony export */   l: () => (/* binding */ prosemirrorToYXmlFragment),\n/* harmony export */   m: () => (/* binding */ createEditorStateFromYJS),\n/* harmony export */   n: () => (/* binding */ normalizeDocumentFieldChildren),\n/* harmony export */   o: () => (/* binding */ parseToEditorStateMDX),\n/* harmony export */   p: () => (/* binding */ parseToEditorState),\n/* harmony export */   q: () => (/* binding */ serializeFromEditorStateMDX),\n/* harmony export */   r: () => (/* binding */ createEditorSchema),\n/* harmony export */   s: () => (/* binding */ slugify),\n/* harmony export */   t: () => (/* binding */ text),\n/* harmony export */   u: () => (/* binding */ IntegerFieldInput),\n/* harmony export */   v: () => (/* binding */ validateText)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\n\nclass FieldDataError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'FieldDataError';\n  }\n}\n\nfunction assertRequired(value, validation, label) {\n  if (value === null && validation !== null && validation !== void 0 && validation.isRequired) {\n    throw new FieldDataError(`${label} is required`);\n  }\n}\nfunction basicFormFieldWithSimpleReaderParse(config) {\n  return {\n    kind: 'form',\n    Input: config.Input,\n    defaultValue: config.defaultValue,\n    parse: config.parse,\n    serialize: config.serialize,\n    validate: config.validate,\n    reader: {\n      parse(value) {\n        return config.validate(config.parse(value));\n      }\n    },\n    label: config.label\n  };\n}\n\n// this is used in react-server environments to avoid bundling UI when the reader API is used\n// if you added a new field and get an error that there's missing a missing export here,\n// you probably just need to add another empty export here\n\nfunction empty() {\n  throw new Error(\"unexpected call to function that shouldn't be called in React server component environment\");\n}\nlet SlugFieldInput = empty,\n  TextFieldInput = empty,\n  UrlFieldInput = empty,\n  SelectFieldInput = empty,\n  RelationshipInput = empty,\n  PathReferenceInput = empty,\n  MultiselectFieldInput = empty,\n  MultiRelationshipInput = empty,\n  IntegerFieldInput = empty,\n  NumberFieldInput = empty,\n  ImageFieldInput = empty,\n  FileFieldInput = empty,\n  DatetimeFieldInput = empty,\n  DateFieldInput = empty,\n  CloudImageFieldInput = empty,\n  BlocksFieldInput = empty,\n  DocumentFieldInput = empty,\n  CheckboxFieldInput = empty,\n  createEditorSchema = empty,\n  getDefaultValue = empty,\n  parseToEditorState = empty,\n  serializeFromEditorState = empty,\n  parseToEditorStateMDX = empty,\n  serializeFromEditorStateMDX = empty,\n  createEditorStateFromYJS = empty,\n  prosemirrorToYXmlFragment = empty,\n  normalizeDocumentFieldChildren = empty,\n  slugify = empty,\n  serializeMarkdoc = empty;\n\nfunction validateText(val, min, max, fieldLabel, slugInfo, pattern) {\n  if (val.length < min) {\n    if (min === 1) {\n      return `${fieldLabel} must not be empty`;\n    } else {\n      return `${fieldLabel} must be at least ${min} characters long`;\n    }\n  }\n  if (val.length > max) {\n    return `${fieldLabel} must be no longer than ${max} characters`;\n  }\n  if (pattern && !pattern.regex.test(val)) {\n    return pattern.message || `${fieldLabel} must match the pattern ${pattern.regex}`;\n  }\n  if (slugInfo) {\n    if (val === '') {\n      return `${fieldLabel} must not be empty`;\n    }\n    if (val === '..') {\n      return `${fieldLabel} must not be ..`;\n    }\n    if (val === '.') {\n      return `${fieldLabel} must not be .`;\n    }\n    if (slugInfo.glob === '**') {\n      const split = val.split('/');\n      if (split.some(s => s === '..')) {\n        return `${fieldLabel} must not contain ..`;\n      }\n      if (split.some(s => s === '.')) {\n        return `${fieldLabel} must not be .`;\n      }\n    }\n    if ((slugInfo.glob === '*' ? /[\\\\/]/ : /[\\\\]/).test(val)) {\n      return `${fieldLabel} must not contain slashes`;\n    }\n    if (/^\\s|\\s$/.test(val)) {\n      return `${fieldLabel} must not start or end with spaces`;\n    }\n    if (slugInfo.slugs.has(val)) {\n      return `${fieldLabel} must be unique`;\n    }\n  }\n}\n\nfunction parseAsNormalField(value) {\n  if (value === undefined) {\n    return '';\n  }\n  if (typeof value !== 'string') {\n    throw new FieldDataError('Must be a string');\n  }\n  return value;\n}\nconst emptySet = new Set();\nfunction text({\n  label,\n  defaultValue = '',\n  validation: {\n    length: {\n      max = Infinity,\n      min = 0\n    } = {},\n    pattern,\n    isRequired\n  } = {},\n  description,\n  multiline = false\n}) {\n  min = Math.max(isRequired ? 1 : 0, min);\n  function validate(value, slugField) {\n    const message = validateText(value, min, max, label, slugField, pattern);\n    if (message !== undefined) {\n      throw new FieldDataError(message);\n    }\n    return value;\n  }\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextFieldInput, {\n        label: label,\n        description: description,\n        min: min,\n        max: max,\n        multiline: multiline,\n        pattern: pattern,\n        ...props\n      });\n    },\n    defaultValue() {\n      return typeof defaultValue === 'string' ? defaultValue : defaultValue();\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return args.slug;\n      }\n      return parseAsNormalField(value);\n    },\n    serialize(value) {\n      return {\n        value: value === '' ? undefined : value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        slug: value,\n        value: undefined\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseAsNormalField(value);\n        return validate(parsed, undefined);\n      },\n      parseWithSlug(_value, args) {\n        validate(parseAsNormalField(args.slug), {\n          glob: args.glob,\n          slugs: emptySet\n        });\n        return null;\n      }\n    },\n    validate(value, args) {\n      return validate(value, args === null || args === void 0 ? void 0 : args.slugField);\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMWE5ZGEwZmIubm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDOztBQUV4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQyxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCLE1BQU07QUFDTixnQkFBZ0IsWUFBWSxtQkFBbUIsS0FBSztBQUNwRDtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVkseUJBQXlCLEtBQUs7QUFDeEQ7QUFDQTtBQUNBLGlDQUFpQyxZQUFZLHlCQUF5QixjQUFjO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBSTtBQUNWO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFHO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWcwQiIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pbmRleC0xYTlkYTBmYi5ub2RlLmpzPzhiMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4IH0gZnJvbSAncmVhY3QvanN4LXJ1bnRpbWUnO1xuXG5jbGFzcyBGaWVsZERhdGFFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdGaWVsZERhdGFFcnJvcic7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoYCR7bGFiZWx9IGlzIHJlcXVpcmVkYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKGNvbmZpZykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBJbnB1dDogY29uZmlnLklucHV0LFxuICAgIGRlZmF1bHRWYWx1ZTogY29uZmlnLmRlZmF1bHRWYWx1ZSxcbiAgICBwYXJzZTogY29uZmlnLnBhcnNlLFxuICAgIHNlcmlhbGl6ZTogY29uZmlnLnNlcmlhbGl6ZSxcbiAgICB2YWxpZGF0ZTogY29uZmlnLnZhbGlkYXRlLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy52YWxpZGF0ZShjb25maWcucGFyc2UodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxhYmVsOiBjb25maWcubGFiZWxcbiAgfTtcbn1cblxuLy8gdGhpcyBpcyB1c2VkIGluIHJlYWN0LXNlcnZlciBlbnZpcm9ubWVudHMgdG8gYXZvaWQgYnVuZGxpbmcgVUkgd2hlbiB0aGUgcmVhZGVyIEFQSSBpcyB1c2VkXG4vLyBpZiB5b3UgYWRkZWQgYSBuZXcgZmllbGQgYW5kIGdldCBhbiBlcnJvciB0aGF0IHRoZXJlJ3MgbWlzc2luZyBhIG1pc3NpbmcgZXhwb3J0IGhlcmUsXG4vLyB5b3UgcHJvYmFibHkganVzdCBuZWVkIHRvIGFkZCBhbm90aGVyIGVtcHR5IGV4cG9ydCBoZXJlXG5cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmV4cGVjdGVkIGNhbGwgdG8gZnVuY3Rpb24gdGhhdCBzaG91bGRuJ3QgYmUgY2FsbGVkIGluIFJlYWN0IHNlcnZlciBjb21wb25lbnQgZW52aXJvbm1lbnRcIik7XG59XG5sZXQgU2x1Z0ZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgVGV4dEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgVXJsRmllbGRJbnB1dCA9IGVtcHR5LFxuICBTZWxlY3RGaWVsZElucHV0ID0gZW1wdHksXG4gIFJlbGF0aW9uc2hpcElucHV0ID0gZW1wdHksXG4gIFBhdGhSZWZlcmVuY2VJbnB1dCA9IGVtcHR5LFxuICBNdWx0aXNlbGVjdEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgTXVsdGlSZWxhdGlvbnNoaXBJbnB1dCA9IGVtcHR5LFxuICBJbnRlZ2VyRmllbGRJbnB1dCA9IGVtcHR5LFxuICBOdW1iZXJGaWVsZElucHV0ID0gZW1wdHksXG4gIEltYWdlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBGaWxlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBEYXRldGltZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgRGF0ZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQ2xvdWRJbWFnZUZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQmxvY2tzRmllbGRJbnB1dCA9IGVtcHR5LFxuICBEb2N1bWVudEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgQ2hlY2tib3hGaWVsZElucHV0ID0gZW1wdHksXG4gIGNyZWF0ZUVkaXRvclNjaGVtYSA9IGVtcHR5LFxuICBnZXREZWZhdWx0VmFsdWUgPSBlbXB0eSxcbiAgcGFyc2VUb0VkaXRvclN0YXRlID0gZW1wdHksXG4gIHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZSA9IGVtcHR5LFxuICBwYXJzZVRvRWRpdG9yU3RhdGVNRFggPSBlbXB0eSxcbiAgc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlTURYID0gZW1wdHksXG4gIGNyZWF0ZUVkaXRvclN0YXRlRnJvbVlKUyA9IGVtcHR5LFxuICBwcm9zZW1pcnJvclRvWVhtbEZyYWdtZW50ID0gZW1wdHksXG4gIG5vcm1hbGl6ZURvY3VtZW50RmllbGRDaGlsZHJlbiA9IGVtcHR5LFxuICBzbHVnaWZ5ID0gZW1wdHksXG4gIHNlcmlhbGl6ZU1hcmtkb2MgPSBlbXB0eTtcblxuZnVuY3Rpb24gdmFsaWRhdGVUZXh0KHZhbCwgbWluLCBtYXgsIGZpZWxkTGFiZWwsIHNsdWdJbmZvLCBwYXR0ZXJuKSB7XG4gIGlmICh2YWwubGVuZ3RoIDwgbWluKSB7XG4gICAgaWYgKG1pbiA9PT0gMSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIGVtcHR5YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgYXQgbGVhc3QgJHttaW59IGNoYXJhY3RlcnMgbG9uZ2A7XG4gICAgfVxuICB9XG4gIGlmICh2YWwubGVuZ3RoID4gbWF4KSB7XG4gICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3QgYmUgbm8gbG9uZ2VyIHRoYW4gJHttYXh9IGNoYXJhY3RlcnNgO1xuICB9XG4gIGlmIChwYXR0ZXJuICYmICFwYXR0ZXJuLnJlZ2V4LnRlc3QodmFsKSkge1xuICAgIHJldHVybiBwYXR0ZXJuLm1lc3NhZ2UgfHwgYCR7ZmllbGRMYWJlbH0gbXVzdCBtYXRjaCB0aGUgcGF0dGVybiAke3BhdHRlcm4ucmVnZXh9YDtcbiAgfVxuICBpZiAoc2x1Z0luZm8pIHtcbiAgICBpZiAodmFsID09PSAnJykge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIGVtcHR5YDtcbiAgICB9XG4gICAgaWYgKHZhbCA9PT0gJy4uJykge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIC4uYDtcbiAgICB9XG4gICAgaWYgKHZhbCA9PT0gJy4nKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgLmA7XG4gICAgfVxuICAgIGlmIChzbHVnSW5mby5nbG9iID09PSAnKionKSB7XG4gICAgICBjb25zdCBzcGxpdCA9IHZhbC5zcGxpdCgnLycpO1xuICAgICAgaWYgKHNwbGl0LnNvbWUocyA9PiBzID09PSAnLi4nKSkge1xuICAgICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgY29udGFpbiAuLmA7XG4gICAgICB9XG4gICAgICBpZiAoc3BsaXQuc29tZShzID0+IHMgPT09ICcuJykpIHtcbiAgICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGJlIC5gO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHNsdWdJbmZvLmdsb2IgPT09ICcqJyA/IC9bXFxcXC9dLyA6IC9bXFxcXF0vKS50ZXN0KHZhbCkpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBjb250YWluIHNsYXNoZXNgO1xuICAgIH1cbiAgICBpZiAoL15cXHN8XFxzJC8udGVzdCh2YWwpKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3Qgc3RhcnQgb3IgZW5kIHdpdGggc3BhY2VzYDtcbiAgICB9XG4gICAgaWYgKHNsdWdJbmZvLnNsdWdzLmhhcyh2YWwpKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSB1bmlxdWVgO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUFzTm9ybWFsRmllbGQodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5jb25zdCBlbXB0eVNldCA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHRleHQoe1xuICBsYWJlbCxcbiAgZGVmYXVsdFZhbHVlID0gJycsXG4gIHZhbGlkYXRpb246IHtcbiAgICBsZW5ndGg6IHtcbiAgICAgIG1heCA9IEluZmluaXR5LFxuICAgICAgbWluID0gMFxuICAgIH0gPSB7fSxcbiAgICBwYXR0ZXJuLFxuICAgIGlzUmVxdWlyZWRcbiAgfSA9IHt9LFxuICBkZXNjcmlwdGlvbixcbiAgbXVsdGlsaW5lID0gZmFsc2Vcbn0pIHtcbiAgbWluID0gTWF0aC5tYXgoaXNSZXF1aXJlZCA/IDEgOiAwLCBtaW4pO1xuICBmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZSwgc2x1Z0ZpZWxkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHZhbGlkYXRlVGV4dCh2YWx1ZSwgbWluLCBtYXgsIGxhYmVsLCBzbHVnRmllbGQsIHBhdHRlcm4pO1xuICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnc2x1ZycsXG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFRleHRGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBtaW46IG1pbixcbiAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgIG11bHRpbGluZTogbXVsdGlsaW5lLFxuICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gJ3N0cmluZycgPyBkZWZhdWx0VmFsdWUgOiBkZWZhdWx0VmFsdWUoKTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAoKGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXJncy5zbHVnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBhcmdzLnNsdWc7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VBc05vcm1hbEZpZWxkKHZhbHVlKTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSAnJyA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgc2VyaWFsaXplV2l0aFNsdWcodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNsdWc6IHZhbHVlLFxuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUFzTm9ybWFsRmllbGQodmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUocGFyc2VkLCB1bmRlZmluZWQpO1xuICAgICAgfSxcbiAgICAgIHBhcnNlV2l0aFNsdWcoX3ZhbHVlLCBhcmdzKSB7XG4gICAgICAgIHZhbGlkYXRlKHBhcnNlQXNOb3JtYWxGaWVsZChhcmdzLnNsdWcpLCB7XG4gICAgICAgICAgZ2xvYjogYXJncy5nbG9iLFxuICAgICAgICAgIHNsdWdzOiBlbXB0eVNldFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSwgYXJncykge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlKHZhbHVlLCBhcmdzID09PSBudWxsIHx8IGFyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFyZ3Muc2x1Z0ZpZWxkKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB7IEJsb2Nrc0ZpZWxkSW5wdXQgYXMgQiwgQ2hlY2tib3hGaWVsZElucHV0IGFzIEMsIERhdGVGaWVsZElucHV0IGFzIEQsIEZpZWxkRGF0YUVycm9yIGFzIEYsIEltYWdlRmllbGRJbnB1dCBhcyBJLCBNdWx0aVJlbGF0aW9uc2hpcElucHV0IGFzIE0sIE51bWJlckZpZWxkSW5wdXQgYXMgTiwgUGF0aFJlZmVyZW5jZUlucHV0IGFzIFAsIFJlbGF0aW9uc2hpcElucHV0IGFzIFIsIFNlbGVjdEZpZWxkSW5wdXQgYXMgUywgVXJsRmllbGRJbnB1dCBhcyBVLCBDbG91ZEltYWdlRmllbGRJbnB1dCBhcyBhLCBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSBhcyBiLCBhc3NlcnRSZXF1aXJlZCBhcyBjLCBEYXRldGltZUZpZWxkSW5wdXQgYXMgZCwgRmlsZUZpZWxkSW5wdXQgYXMgZSwgTXVsdGlzZWxlY3RGaWVsZElucHV0IGFzIGYsIFNsdWdGaWVsZElucHV0IGFzIGcsIERvY3VtZW50RmllbGRJbnB1dCBhcyBoLCBzZXJpYWxpemVNYXJrZG9jIGFzIGksIGdldERlZmF1bHRWYWx1ZSBhcyBqLCBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGUgYXMgaywgcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCBhcyBsLCBjcmVhdGVFZGl0b3JTdGF0ZUZyb21ZSlMgYXMgbSwgbm9ybWFsaXplRG9jdW1lbnRGaWVsZENoaWxkcmVuIGFzIG4sIHBhcnNlVG9FZGl0b3JTdGF0ZU1EWCBhcyBvLCBwYXJzZVRvRWRpdG9yU3RhdGUgYXMgcCwgc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlTURYIGFzIHEsIGNyZWF0ZUVkaXRvclNjaGVtYSBhcyByLCBzbHVnaWZ5IGFzIHMsIHRleHQgYXMgdCwgSW50ZWdlckZpZWxkSW5wdXQgYXMgdSwgdmFsaWRhdGVUZXh0IGFzIHYgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/core/dist/index-39d45899.node.js":
/*!******************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-39d45899.node.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ integer)\n/* harmony export */ });\n/* harmony import */ var _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-1a9da0fb.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\n\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__.u, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__.F('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__.F(message);\n      }\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_0__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMzlkNDU4OTkubm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0o7QUFDOUc7O0FBRXhDO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxtQkFBbUIsZUFBZTtBQUN6RDtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sa0JBQWtCLGVBQWU7QUFDeEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUywwREFBbUM7QUFDNUM7QUFDQTtBQUNBLDBCQUEwQixzREFBRyxDQUFDLHNEQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzREFBYztBQUM5QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFjO0FBQ2hDO0FBQ0EsTUFBTSwwREFBYztBQUNwQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUV3QiIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pbmRleC0zOWQ0NTg5OS5ub2RlLmpzP2IwMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYiBhcyBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSwgdSBhcyBJbnRlZ2VyRmllbGRJbnB1dCwgRiBhcyBGaWVsZERhdGFFcnJvciwgYyBhcyBhc3NlcnRSZXF1aXJlZCB9IGZyb20gJy4vaW5kZXgtMWE5ZGEwZmIubm9kZS5qcyc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZWdlcih2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYSB3aG9sZSBudW1iZXJgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPCB2YWxpZGF0aW9uLm1pbikge1xuICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7dmFsaWRhdGlvbi5taW59YDtcbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlID4gdmFsaWRhdGlvbi5tYXgpIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhdCBtb3N0ICR7dmFsaWRhdGlvbi5tYXh9YDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZWdlcih7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEludGVnZXJGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZUludGVnZXIodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgaW50ZWdlciBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/index-39d45899.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/core/dist/index-aaf578e2.node.js":
/*!******************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-aaf578e2.node.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ markdoc),\n/* harmony export */   b: () => (/* binding */ getDirectoriesForTreeKey),\n/* harmony export */   c: () => (/* binding */ getCollectionPath),\n/* harmony export */   d: () => (/* binding */ document),\n/* harmony export */   e: () => (/* binding */ getSingletonFormat),\n/* harmony export */   f: () => (/* binding */ fixPath),\n/* harmony export */   g: () => (/* binding */ getSrcPrefix),\n/* harmony export */   h: () => (/* binding */ getSingletonPath),\n/* harmony export */   i: () => (/* binding */ blobSha),\n/* harmony export */   j: () => (/* binding */ getCollectionFormat),\n/* harmony export */   k: () => (/* binding */ getSlugGlobForCollection),\n/* harmony export */   l: () => (/* binding */ getDataFileExtension),\n/* harmony export */   m: () => (/* binding */ mdx),\n/* harmony export */   n: () => (/* binding */ getCollectionItemPath),\n/* harmony export */   o: () => (/* binding */ object),\n/* harmony export */   p: () => (/* binding */ getEntryDataFilepath),\n/* harmony export */   q: () => (/* binding */ getValueAtPropPath),\n/* harmony export */   r: () => (/* binding */ getTreeNodeAtPath),\n/* harmony export */   t: () => (/* binding */ treeEntriesToTreeNodes),\n/* harmony export */   u: () => (/* binding */ updateTreeWithChanges)\n/* harmony export */ });\n/* harmony import */ var _markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @markdoc/markdoc/dist/index.mjs */ \"(ssr)/./node_modules/@markdoc/markdoc/dist/index.mjs\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emery/assertions */ \"(ssr)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-1a9da0fb.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\n\n\n\nfunction object(fields, opts) {\n  return {\n    ...opts,\n    kind: 'object',\n    fields\n  };\n}\n\nfunction getValueAtPropPath(value, inputPath) {\n  const path = [...inputPath];\n  while (path.length) {\n    const key = path.shift();\n    value = value[key];\n  }\n  return value;\n}\nfunction transformProps(schema, value, visitors, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    if (visitors[schema.kind]) {\n      return visitors[schema.kind](schema, value, path);\n    }\n    return value;\n  }\n  if (schema.kind === 'object') {\n    const val = Object.fromEntries(Object.entries(schema.fields).map(([key, val]) => {\n      return [key, transformProps(val, value[key], visitors, [...path, key])];\n    }));\n    if (visitors.object) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    const val = value.map((val, idx) => transformProps(schema.element, val, visitors, path.concat(idx)));\n    if (visitors.array) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = transformProps(schema.discriminant, value.discriminant, visitors, path.concat('discriminant'));\n    const conditionalVal = transformProps(schema.values[discriminant.toString()], value.value, visitors, path.concat('value'));\n    const val = {\n      discriminant,\n      value: conditionalVal\n    };\n    if (visitors.conditional) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\n\n// a v important note\n// marks in the markdown ast/html are represented quite differently to how they are in slate\n// if you had the markdown **something https://keystonejs.com something**\n// the bold node is the parent of the link node\n// but in slate, marks are only represented on text nodes\n\nconst currentlyActiveMarks = new Set();\nconst currentlyDisabledMarks = new Set();\nlet currentLink = null;\nfunction addMarkToChildren(mark, cb) {\n  const wasPreviouslyActive = currentlyActiveMarks.has(mark);\n  currentlyActiveMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyActive) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction setLinkForChildren(href, cb) {\n  // we'll only use the outer link\n  if (currentLink !== null) {\n    return cb();\n  }\n  currentLink = href;\n  try {\n    return cb();\n  } finally {\n    currentLink = null;\n  }\n}\n\n/**\n * This type is more strict than `Element & { type: 'link'; }` because `children`\n * is constrained to only contain Text nodes. This can't be assumed generally around the editor\n * (because of potentially future inline components or nested links(which are normalized away but the editor needs to not break if it happens))\n * but where this type is used, we're only going to allow links to contain Text and that's important\n * so that we know a block will never be inside an inline because Slate gets unhappy when that happens\n * (really the link inline should probably be a mark rather than an inline,\n * non-void inlines are probably always bad but that would imply changing the document\n * structure which would be such unnecessary breakage)\n */\n\nfunction getInlineNodes(text) {\n  const node = {\n    text\n  };\n  for (const mark of currentlyActiveMarks) {\n    if (!currentlyDisabledMarks.has(mark)) {\n      node[mark] = true;\n    }\n  }\n  if (currentLink !== null) {\n    return [{\n      text: ''\n    }, {\n      type: 'link',\n      href: currentLink,\n      children: [node]\n    }, {\n      text: ''\n    }];\n  }\n  return [node];\n}\n\nclass VariableChildFields extends Error {\n  constructor() {\n    super('There are a variable number of child fields');\n  }\n}\nfunction findSingleChildField(schema) {\n  try {\n    const result = _findConstantChildFields(schema, [], new Set());\n    if (result.length === 1) {\n      return result[0];\n    }\n    return;\n  } catch (err) {\n    if (err instanceof VariableChildFields) {\n      return;\n    }\n    throw err;\n  }\n}\nfunction _findConstantChildFields(schema, path, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return [];\n  }\n  seenSchemas.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        relativePath: path,\n        options: schema.options,\n        kind: 'child'\n      }];\n    case 'conditional':\n      {\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'array':\n      {\n        if (schema.asChildTag) {\n          const child = _findConstantChildFields(schema.element, [], seenSchemas);\n          if (child.length > 1) {\n            return [];\n          }\n          return [{\n            kind: 'array',\n            asChildTag: schema.asChildTag,\n            field: schema,\n            relativePath: path,\n            child: child[0]\n          }];\n        }\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'object':\n      {\n        const paths = [];\n        for (const [key, value] of Object.entries(schema.fields)) {\n          paths.push(..._findConstantChildFields(value, path.concat(key), seenSchemas));\n        }\n        return paths;\n      }\n  }\n}\nfunction couldContainChildField(schema, seen = new Set()) {\n  if (seen.has(schema)) {\n    return false;\n  }\n  seen.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return false;\n    case 'child':\n      return true;\n    case 'conditional':\n      return Object.values(schema.values).some(value => couldContainChildField(value, seen));\n    case 'object':\n      return Object.keys(schema.fields).some(key => couldContainChildField(schema.fields[key], seen));\n    case 'array':\n      return couldContainChildField(schema.element, seen);\n  }\n}\n\nfunction inlineNodeFromMarkdoc(node) {\n  if (node.type === 'inline') {\n    return inlineChildrenFromMarkdoc(node.children);\n  }\n  if (node.type === 'link') {\n    return setLinkForChildren(node.attributes.href, () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'text') {\n    return getInlineNodes(node.attributes.content);\n  }\n  if (node.type === 'strong') {\n    return addMarkToChildren('bold', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'code') {\n    return addMarkToChildren('code', () => getInlineNodes(node.attributes.content));\n  }\n  if (node.type === 'em') {\n    return addMarkToChildren('italic', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 's') {\n    return addMarkToChildren('strikethrough', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'u') {\n      return addMarkToChildren('underline', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'kbd') {\n      return addMarkToChildren('keyboard', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sub') {\n      return addMarkToChildren('subscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sup') {\n      return addMarkToChildren('superscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n  }\n  if (node.type === 'softbreak') {\n    return getInlineNodes(' ');\n  }\n  if (node.type === 'hardbreak') {\n    return getInlineNodes('\\n');\n  }\n  if (node.tag === 'component-inline-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n    return {\n      type: 'component-inline-prop',\n      children: inlineFromMarkdoc(node.children),\n      propPath: node.attributes.propPath\n    };\n  }\n  throw new Error(`Unknown inline node type: ${node.type}`);\n}\nfunction inlineChildrenFromMarkdoc(nodes) {\n  return nodes.flatMap(inlineNodeFromMarkdoc);\n}\nfunction inlineFromMarkdoc(nodes) {\n  const transformedNodes = nodes.flatMap(inlineNodeFromMarkdoc);\n  const nextNodes = [];\n  let lastNode;\n  for (const [idx, node] of transformedNodes.entries()) {\n    var _lastNode;\n    if (node.type === undefined && node.text === '' && ((_lastNode = lastNode) === null || _lastNode === void 0 ? void 0 : _lastNode.type) === undefined && idx !== transformedNodes.length - 1) {\n      continue;\n    }\n    nextNodes.push(node);\n    lastNode = node;\n  }\n  if (!nextNodes.length) {\n    nextNodes.push({\n      text: ''\n    });\n  }\n  return nextNodes;\n}\nfunction fromMarkdoc(node, componentBlocks) {\n  const nodes = node.children.flatMap(x => fromMarkdocNode(x, componentBlocks));\n  if (nodes.length === 0) {\n    return [{\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }];\n  }\n  if (nodes[nodes.length - 1].type !== 'paragraph') {\n    nodes.push({\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    });\n  }\n  return nodes;\n}\nfunction fromMarkdocNode(node, componentBlocks) {\n  if (node.type === 'blockquote') {\n    return {\n      type: 'blockquote',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'fence') {\n    const {\n      language,\n      content,\n      ...rest\n    } = node.attributes;\n    return {\n      type: 'code',\n      children: [{\n        text: content.replace(/\\n$/, '')\n      }],\n      ...(typeof language === 'string' ? {\n        language\n      } : {}),\n      ...rest\n    };\n  }\n  if (node.type === 'heading') {\n    return {\n      ...node.attributes,\n      level: node.attributes.level,\n      type: 'heading',\n      children: inlineFromMarkdoc(node.children)\n    };\n  }\n  if (node.type === 'list') {\n    return {\n      type: node.attributes.ordered ? 'ordered-list' : 'unordered-list',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'item') {\n    var _node$children$;\n    const children = [{\n      type: 'list-item-content',\n      children: node.children.length ? inlineFromMarkdoc([node.children[0]]) : [{\n        text: ''\n      }]\n    }];\n    if (((_node$children$ = node.children[1]) === null || _node$children$ === void 0 ? void 0 : _node$children$.type) === 'list') {\n      const list = node.children[1];\n      children.push({\n        type: list.attributes.ordered ? 'ordered-list' : 'unordered-list',\n        children: list.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      });\n    }\n    return {\n      type: 'list-item',\n      children\n    };\n  }\n  if (node.type === 'paragraph') {\n    if (node.children.length === 1 && node.children[0].type === 'inline' && node.children[0].children.length === 1 && node.children[0].children[0].type === 'image') {\n      var _image$attributes$tit;\n      const image = node.children[0].children[0];\n      return {\n        type: 'image',\n        src: decodeURI(image.attributes.src),\n        alt: image.attributes.alt,\n        title: (_image$attributes$tit = image.attributes.title) !== null && _image$attributes$tit !== void 0 ? _image$attributes$tit : '',\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    const children = inlineFromMarkdoc(node.children);\n    if (children.length === 1 && children[0].type === 'component-inline-prop') {\n      return children[0];\n    }\n    return {\n      type: 'paragraph',\n      children,\n      textAlign: node.attributes.textAlign\n    };\n  }\n  if (node.type === 'hr') {\n    return {\n      type: 'divider',\n      children: [{\n        text: ''\n      }]\n    };\n  }\n  if (node.type === 'table') {\n    return {\n      type: 'table',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tbody') {\n    return {\n      type: 'table-body',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'thead') {\n    if (!node.children.length) return [];\n    return {\n      type: 'table-head',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tr') {\n    return {\n      type: 'table-row',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'td') {\n    return {\n      type: 'table-cell',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'th') {\n    return {\n      type: 'table-cell',\n      header: true,\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'table') {\n      return fromMarkdocNode(node.children[0], componentBlocks);\n    }\n    if (node.tag === 'layout') {\n      return {\n        type: 'layout',\n        layout: node.attributes.layout,\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'layout-area') {\n      return {\n        type: 'layout-area',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block') {\n      return {\n        type: 'component-block',\n        component: node.attributes.component,\n        props: node.attributes.props,\n        children: node.children.length === 0 ? [{\n          type: 'component-inline-prop',\n          children: [{\n            text: ''\n          }]\n        }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n      return {\n        type: 'component-block-prop',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks)),\n        propPath: node.attributes.propPath\n      };\n    }\n    if (node.tag) {\n      const componentBlock = componentBlocks[node.tag];\n      if (componentBlock) {\n        const singleChildField = findSingleChildField({\n          kind: 'object',\n          fields: componentBlock.schema\n        });\n        if (singleChildField) {\n          const newAttributes = JSON.parse(JSON.stringify(node.attributes));\n          const children = [];\n          toChildrenAndProps(node.children, children, newAttributes, singleChildField, [], componentBlocks);\n          return {\n            type: 'component-block',\n            component: node.tag,\n            props: newAttributes,\n            children\n          };\n        }\n        return {\n          type: 'component-block',\n          component: node.tag,\n          props: node.attributes,\n          children: node.children.length === 0 ? [{\n            type: 'component-inline-prop',\n            children: [{\n              text: ''\n            }]\n          }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n        };\n      }\n    }\n    throw new Error(`Unknown tag: ${node.tag}`);\n  }\n  return inlineNodeFromMarkdoc(node);\n}\nfunction toChildrenAndProps(fromMarkdoc, resultingChildren, value, singleChildField, parentPropPath, componentBlocks) {\n  if (singleChildField.kind === 'child') {\n    const children = fromMarkdoc.flatMap(x => fromMarkdocNode(x, componentBlocks));\n    resultingChildren.push({\n      type: `component-${singleChildField.options.kind}-prop`,\n      propPath: [...parentPropPath, ...singleChildField.relativePath],\n      children\n    });\n  }\n  if (singleChildField.kind === 'array') {\n    const arr = [];\n    for (let [idx, child] of fromMarkdoc.entries()) {\n      if (child.type === 'paragraph') {\n        child = child.children[0].children[0];\n      }\n      if (child.type !== 'tag') {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found type: ${child.type}`);\n      }\n      if (child.tag !== singleChildField.asChildTag) {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found tag: ${child.tag}`);\n      }\n      const attributes = JSON.parse(JSON.stringify(child.attributes));\n      if (singleChildField.child) {\n        toChildrenAndProps(child.children, resultingChildren, attributes, singleChildField.child, [...parentPropPath, ...singleChildField.relativePath, idx], componentBlocks);\n      }\n      arr.push(attributes);\n    }\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    parent[key] = arr;\n  }\n}\n\nfunction fixPath(path) {\n  return path.replace(/^\\.?\\/+/, '').replace(/\\/*$/, '');\n}\nconst collectionPath = /\\/\\*\\*?(?:$|\\/)/;\nfunction getConfiguredCollectionPath(config, collection) {\n  var _collectionConfig$pat;\n  const collectionConfig = config.collections[collection];\n  const path = (_collectionConfig$pat = collectionConfig.path) !== null && _collectionConfig$pat !== void 0 ? _collectionConfig$pat : `${collection}/*/`;\n  if (!collectionPath.test(path)) {\n    throw new Error(`Collection path must end with /* or /** or include /*/ or /**/ but ${collection} has ${path}`);\n  }\n  return path;\n}\nfunction getCollectionPath(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/\\*\\*?.*$/, ''));\n  return path;\n}\nfunction getCollectionFormat(config, collection) {\n  const collectionConfig = config.collections[collection];\n  return getFormatInfo(collectionConfig)(getConfiguredCollectionPath(config, collection));\n}\nfunction getSingletonFormat(config, singleton) {\n  var _singletonConfig$path;\n  const singletonConfig = config.singletons[singleton];\n  return getFormatInfo(singletonConfig)((_singletonConfig$path = singletonConfig.path) !== null && _singletonConfig$path !== void 0 ? _singletonConfig$path : `${singleton}/`);\n}\nfunction getCollectionItemPath(config, collection, slug) {\n  const basePath = getCollectionPath(config, collection);\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  return `${basePath}/${slug}${suffix}`;\n}\nfunction getEntryDataFilepath(dir, formatInfo) {\n  return `${dir}${formatInfo.dataLocation === 'index' ? '/index' : ''}${getDataFileExtension(formatInfo)}`;\n}\nfunction getSlugGlobForCollection(config, collection) {\n  const collectionPath = getConfiguredCollectionPath(config, collection);\n  return collectionPath.includes('**') ? '**' : '*';\n}\nfunction getCollectionItemSlugSuffix(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/^[^*]+\\*\\*?/, ''));\n  return path ? `/${path}` : '';\n}\nfunction getSingletonPath(config, singleton) {\n  var _singleton$path, _singleton$path2;\n  if ((_singleton$path = config.singletons[singleton].path) !== null && _singleton$path !== void 0 && _singleton$path.includes('*')) {\n    throw new Error(`Singleton paths cannot include * but ${singleton} has ${config.singletons[singleton].path}`);\n  }\n  return fixPath((_singleton$path2 = config.singletons[singleton].path) !== null && _singleton$path2 !== void 0 ? _singleton$path2 : singleton);\n}\nfunction getDataFileExtension(formatInfo) {\n  return formatInfo.contentField ? formatInfo.contentField.contentExtension : '.' + formatInfo.data;\n}\nfunction weakMemoize(func) {\n  const cache = new WeakMap();\n  return arg => {\n    if (cache.has(arg)) {\n      return cache.get(arg);\n    }\n    const result = func(arg);\n    cache.set(arg, result);\n    return result;\n  };\n}\nfunction memoize(func) {\n  const cache = new Map();\n  return arg => {\n    if (cache.has(arg)) {\n      return cache.get(arg);\n    }\n    const result = func(arg);\n    cache.set(arg, result);\n    return result;\n  };\n}\nconst getFormatInfo = weakMemoize(collectionOrSingleton => {\n  return memoize(path => _getFormatInfo(collectionOrSingleton, path));\n});\nfunction _getFormatInfo(collectionOrSingleton, path) {\n  var _format$data;\n  const dataLocation = path.endsWith('/') ? 'index' : 'outer';\n  const {\n    schema,\n    format = 'yaml'\n  } = collectionOrSingleton;\n  if (typeof format === 'string') {\n    return {\n      dataLocation,\n      contentField: undefined,\n      data: format\n    };\n  }\n  let contentField;\n  if (format.contentField) {\n    let field = {\n      kind: 'object',\n      fields: schema\n    };\n    let path = Array.isArray(format.contentField) ? format.contentField : [format.contentField];\n    contentField = {\n      path,\n      contentExtension: getContentExtension(path, field, () => path.length === 1 ? path[0] : JSON.stringify(path))\n    };\n  }\n  return {\n    data: (_format$data = format.data) !== null && _format$data !== void 0 ? _format$data : 'yaml',\n    contentField,\n    dataLocation\n  };\n}\nfunction getContentExtension(path, schema, debugName) {\n  if (path.length === 0) {\n    if (schema.kind !== 'form' || schema.formKind !== 'content') {\n      throw new Error(`Content field for ${debugName()} is not a content field`);\n    }\n    return schema.contentExtension;\n  }\n  if (schema.kind === 'object') {\n    return getContentExtension(path.slice(1), schema.fields[path[0]], debugName);\n  }\n  if (schema.kind === 'conditional') {\n    if (path[0] !== 'value') {\n      throw new Error(`Conditional fields referenced in a contentField path must only reference the value field (${debugName()})`);\n    }\n    let contentExtension;\n    const innerPath = path.slice(1);\n    for (const value of Object.values(schema.values)) {\n      const foundContentExtension = getContentExtension(innerPath, value, debugName);\n      if (!contentExtension) {\n        contentExtension = foundContentExtension;\n        continue;\n      }\n      if (contentExtension !== foundContentExtension) {\n        throw new Error(`contentField ${debugName()} has conflicting content extensions`);\n      }\n    }\n    if (!contentExtension) {\n      throw new Error(`contentField ${debugName()} does not point to a content field`);\n    }\n    return contentExtension;\n  }\n  throw new Error(`Path specified in contentField ${debugName()} does not point to a content field`);\n}\n\nfunction getSrcPrefix(publicPath, slug) {\n  return typeof publicPath === 'string' ? `${publicPath.replace(/\\/*$/, '')}/${slug === undefined ? '' : slug + '/'}` : '';\n}\n\nfunction deserializeFiles(nodes, componentBlocks, files, otherFiles, mode, documentFeatures, slug) {\n  return nodes.map(node => {\n    if (node.type === 'component-block') {\n      const componentBlock = componentBlocks[node.component];\n      if (!componentBlock) return node;\n      const schema = object(componentBlock.schema);\n      return {\n        ...node,\n        props: deserializeProps(schema, node.props, files, otherFiles, mode, slug)\n      };\n    }\n    if (node.type === 'image' && typeof node.src === 'string' && mode === 'edit') {\n      var _ref;\n      const prefix = getSrcPrefixForImageBlock(documentFeatures, slug);\n      const filename = node.src.slice(prefix.length);\n      const content = (_ref = typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? otherFiles.get(fixPath(documentFeatures.images.directory)) : files) === null || _ref === void 0 ? void 0 : _ref.get(filename);\n      if (!content) {\n        return {\n          type: 'paragraph',\n          children: [{\n            text: `Missing image ${filename}`\n          }]\n        };\n      }\n      return {\n        type: 'image',\n        src: {\n          filename,\n          content\n        },\n        alt: node.alt,\n        title: node.title,\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    if (typeof node.type === 'string') {\n      const children = deserializeFiles(node.children, componentBlocks, files, otherFiles, mode, documentFeatures, slug);\n      return {\n        ...node,\n        children\n      };\n    }\n    return node;\n  });\n}\nfunction deserializeProps(schema, value, files, otherFiles, mode, slug) {\n  return transformProps(schema, value, {\n    form: (schema, value) => {\n      if (schema.formKind === 'asset') {\n        var _otherFiles$get;\n        if (mode === 'read') {\n          return schema.reader.parse(value);\n        }\n        const filename = schema.filename(value, {\n          slug,\n          suggestedFilenamePrefix: undefined\n        });\n        return schema.parse(value, {\n          asset: filename ? schema.directory ? (_otherFiles$get = otherFiles.get(schema.directory)) === null || _otherFiles$get === void 0 ? void 0 : _otherFiles$get.get(filename) : files.get(filename) : undefined,\n          slug\n        });\n      }\n      if (schema.formKind === 'content' || schema.formKind === 'assets') {\n        throw new Error('Not implemented');\n      }\n      if (mode === 'read') {\n        return schema.reader.parse(value);\n      }\n      return schema.parse(value, undefined);\n    }\n  });\n}\nfunction getSrcPrefixForImageBlock(documentFeatures, slug) {\n  return getSrcPrefix(typeof documentFeatures.images === 'object' ? documentFeatures.images.publicPath : undefined, slug);\n}\n\nasync function sha1(content) {\n  return (0,crypto__WEBPACK_IMPORTED_MODULE_4__.createHash)('sha1').update(content).digest('hex');\n}\n\nconst textEncoder$1 = new TextEncoder();\nconst blobShaCache = new WeakMap();\nasync function blobSha(contents) {\n  const cached = blobShaCache.get(contents);\n  if (cached !== undefined) return cached;\n  const blobPrefix = textEncoder$1.encode('blob ' + contents.length + '\\0');\n  const array = new Uint8Array(blobPrefix.byteLength + contents.byteLength);\n  array.set(blobPrefix, 0);\n  array.set(contents, blobPrefix.byteLength);\n  const digestPromise = sha1(array);\n  blobShaCache.set(contents, digestPromise);\n  digestPromise.then(digest => blobShaCache.set(contents, digest));\n  return digestPromise;\n}\nfunction getTreeNodeAtPath(root, path) {\n  const parts = path.split('/');\n  let node = root.get(parts[0]);\n  for (const part of parts.slice(1)) {\n    if (!node) return undefined;\n    if (!node.children) return undefined;\n    node = node.children.get(part);\n  }\n  return node;\n}\nfunction getNodeAtPath(tree, path) {\n  if (path === '') return tree;\n  let node = tree;\n  for (const part of path.split('/')) {\n    if (!node.has(part)) {\n      node.set(part, new Map());\n    }\n    const innerNode = node.get(part);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(innerNode instanceof Map, 'expected tree');\n    node = innerNode;\n  }\n  return node;\n}\nfunction getFilename(path) {\n  return path.replace(/.*\\//, '');\n}\nfunction getDirname(path) {\n  if (!path.includes('/')) return '';\n  return path.replace(/\\/[^/]+$/, '');\n}\nfunction toTreeChanges(changes) {\n  const changesRoot = new Map();\n  for (const deletion of changes.deletions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(deletion));\n    parentTree.set(getFilename(deletion), 'delete');\n  }\n  for (const addition of changes.additions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(addition.path));\n    parentTree.set(getFilename(addition.path), addition.contents);\n  }\n  return changesRoot;\n}\nconst SPACE_CHAR_CODE = 32;\nconst space = new Uint8Array([SPACE_CHAR_CODE]);\nconst nullchar = new Uint8Array([0]);\nconst tree = textEncoder$1.encode('tree ');\n\n// based on https://github.com/isomorphic-git/isomorphic-git/blob/c09dfa20ffe0ab9e6602e0fa172d72ba8994e443/src/models/GitTree.js#L108-L122\nfunction treeSha(children) {\n  const entries = [...children].map(([name, node]) => ({\n    name,\n    sha: node.entry.sha,\n    mode: node.entry.mode\n  }));\n  entries.sort((a, b) => {\n    const aName = a.mode === '040000' ? a.name + '/' : a.name;\n    const bName = b.mode === '040000' ? b.name + '/' : b.name;\n    return aName === bName ? 0 : aName < bName ? -1 : 1;\n  });\n  const treeObject = entries.flatMap(entry => {\n    const mode = textEncoder$1.encode(entry.mode.replace(/^0/, ''));\n    const name = textEncoder$1.encode(entry.name);\n    const sha = hexToBytes(entry.sha);\n    return [mode, space, name, nullchar, sha];\n  });\n  return sha1(concatBytes([tree, textEncoder$1.encode(treeObject.reduce((sum, val) => sum + val.byteLength, 0).toString()), nullchar, ...treeObject]));\n}\nfunction concatBytes(byteArrays) {\n  const totalLength = byteArrays.reduce((sum, arr) => sum + arr.byteLength, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const arr of byteArrays) {\n    result.set(arr, offset);\n    offset += arr.byteLength;\n  }\n  return result;\n}\nfunction hexToBytes(str) {\n  const bytes = new Uint8Array(str.length / 2);\n  for (var i = 0; i < bytes.byteLength; i += 1) {\n    const start = i * 2;\n    bytes[i] = parseInt(str.slice(start, start + 2), 16);\n  }\n  return bytes;\n}\nasync function createTreeNodeEntry(path, children) {\n  const sha = await treeSha(children);\n  return {\n    path,\n    mode: '040000',\n    type: 'tree',\n    sha\n  };\n}\nasync function createBlobNodeEntry(path, contents) {\n  const sha = 'sha' in contents ? contents.sha : await blobSha(contents);\n  return {\n    path,\n    mode: '100644',\n    type: 'blob',\n    sha\n  };\n}\nasync function updateTreeWithChanges(tree, changes) {\n  var _await$updateTree;\n  const newTree = (_await$updateTree = await updateTree(tree, toTreeChanges(changes), [])) !== null && _await$updateTree !== void 0 ? _await$updateTree : new Map();\n  return {\n    entries: treeToEntries(newTree),\n    sha: await treeSha(newTree !== null && newTree !== void 0 ? newTree : new Map())\n  };\n}\nfunction treeToEntries(tree) {\n  return [...tree.values()].flatMap(x => x.children ? [x.entry, ...treeToEntries(x.children)] : [x.entry]);\n}\nasync function updateTree(tree, changedTree, path) {\n  const newTree = new Map(tree);\n  for (const [key, value] of changedTree) {\n    if (value === 'delete') {\n      newTree.delete(key);\n    }\n    if (value instanceof Map) {\n      var _newTree$get$children, _newTree$get;\n      const existingChildren = (_newTree$get$children = (_newTree$get = newTree.get(key)) === null || _newTree$get === void 0 ? void 0 : _newTree$get.children) !== null && _newTree$get$children !== void 0 ? _newTree$get$children : new Map();\n      const children = await updateTree(existingChildren, value, path.concat(key));\n      if (children === undefined) {\n        newTree.delete(key);\n        continue;\n      }\n      const entry = await createTreeNodeEntry(path.concat(key).join('/'), children);\n      newTree.set(key, {\n        entry,\n        children\n      });\n    }\n    if (value instanceof Uint8Array || typeof value === 'object' && 'sha' in value) {\n      const entry = await createBlobNodeEntry(path.concat(key).join('/'), value);\n      newTree.set(key, {\n        entry\n      });\n    }\n  }\n  if (newTree.size === 0) {\n    return undefined;\n  }\n  return newTree;\n}\nfunction treeEntriesToTreeNodes(entries) {\n  const root = new Map();\n  const getChildrenAtPath = parts => {\n    var _node;\n    if (parts.length === 0) {\n      return root;\n    }\n    let node = root.get(parts[0]);\n    for (const part of parts.slice(1)) {\n      if (!node) return undefined;\n      if (!node.children) return undefined;\n      node = node.children.get(part);\n    }\n    return (_node = node) === null || _node === void 0 ? void 0 : _node.children;\n  };\n  for (const entry of entries) {\n    const split = entry.path.split('/');\n    const children = getChildrenAtPath(split.slice(0, -1));\n    if (children) {\n      children.set(split[split.length - 1], {\n        entry,\n        children: entry.type === 'tree' ? new Map() : undefined\n      });\n    }\n  }\n  return root;\n}\n\nfunction collectDirectoriesUsedInSchemaInner(schema, directories, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return;\n  }\n  seenSchemas.add(schema);\n  if (schema.kind === 'array') {\n    return collectDirectoriesUsedInSchemaInner(schema.element, directories, seenSchemas);\n  }\n  if (schema.kind === 'child') {\n    return;\n  }\n  if (schema.kind === 'form') {\n    if (schema.formKind === 'asset' && schema.directory !== undefined) {\n      directories.add(fixPath(schema.directory));\n    }\n    if ((schema.formKind === 'content' || schema.formKind === 'assets') && schema.directories !== undefined) {\n      for (const directory of schema.directories) {\n        directories.add(fixPath(directory));\n      }\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const field of Object.values(schema.fields)) {\n      collectDirectoriesUsedInSchemaInner(field, directories, seenSchemas);\n    }\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    for (const innerSchema of Object.values(schema.values)) {\n      collectDirectoriesUsedInSchemaInner(innerSchema, directories, seenSchemas);\n    }\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction collectDirectoriesUsedInSchema(schema) {\n  const directories = new Set();\n  collectDirectoriesUsedInSchemaInner(schema, directories, new Set());\n  return directories;\n}\nfunction getDirectoriesForTreeKey(schema, directory, slug, format) {\n  const directories = [fixPath(directory)];\n  if (format.dataLocation === 'outer') {\n    directories.push(fixPath(directory) + getDataFileExtension(format));\n  }\n  const toAdd = slug === undefined ? '' : `/${slug}`;\n  for (const directory of collectDirectoriesUsedInSchema(schema)) {\n    directories.push(directory + toAdd);\n  }\n  return directories;\n}\n\nconst textDecoder$1 = new TextDecoder();\nconst defaultAltField$1 = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.t)({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField$1 = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.b)({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  },\n  label: 'Title'\n});\nfunction normaliseDocumentFeatures(config) {\n  var _config$formatting, _formatting$alignment, _formatting$alignment2, _formatting$blockType, _formatting$inlineMar, _formatting$inlineMar2, _formatting$inlineMar3, _formatting$inlineMar4, _formatting$inlineMar5, _formatting$inlineMar6, _formatting$inlineMar7, _formatting$inlineMar8, _formatting$listTypes, _formatting$listTypes2, _imagesConfig$schema$, _imagesConfig$schema, _imagesConfig$schema$2, _imagesConfig$schema2;\n  const formatting = config.formatting === true ? {\n    // alignment: true, // not supported natively in markdown\n    blockTypes: true,\n    headingLevels: true,\n    inlineMarks: true,\n    listTypes: true,\n    softBreaks: true\n  } : (_config$formatting = config.formatting) !== null && _config$formatting !== void 0 ? _config$formatting : {};\n  const imagesConfig = config.images === true ? {} : config.images;\n  return {\n    formatting: {\n      alignment: formatting.alignment === true ? {\n        center: true,\n        end: true\n      } : {\n        center: !!((_formatting$alignment = formatting.alignment) !== null && _formatting$alignment !== void 0 && _formatting$alignment.center),\n        end: !!((_formatting$alignment2 = formatting.alignment) !== null && _formatting$alignment2 !== void 0 && _formatting$alignment2.end)\n      },\n      blockTypes: (formatting === null || formatting === void 0 ? void 0 : formatting.blockTypes) === true ? {\n        blockquote: true,\n        code: {\n          schema: object({})\n        }\n      } : {\n        blockquote: !!((_formatting$blockType = formatting.blockTypes) !== null && _formatting$blockType !== void 0 && _formatting$blockType.blockquote),\n        code: (_formatting$blockType2 => {\n          if (((_formatting$blockType2 = formatting.blockTypes) === null || _formatting$blockType2 === void 0 ? void 0 : _formatting$blockType2.code) === undefined) {\n            return false;\n          }\n          if (formatting.blockTypes.code === true || !formatting.blockTypes.code.schema) {\n            return {\n              schema: object({})\n            };\n          }\n          for (const key of ['type', 'children', 'language']) {\n            if (key in formatting.blockTypes.code.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for code blocks`);\n            }\n          }\n          return {\n            schema: object(formatting.blockTypes.code.schema)\n          };\n        })()\n      },\n      headings: (_obj$schema => {\n        const opt = formatting === null || formatting === void 0 ? void 0 : formatting.headingLevels;\n        const obj = typeof opt === 'object' && 'levels' in opt ? opt : {\n          levels: opt,\n          schema: undefined\n        };\n        if (obj.schema) {\n          for (const key of ['type', 'children', 'level', 'textAlign']) {\n            if (key in obj.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for headings`);\n            }\n          }\n        }\n        return {\n          levels: [...new Set(obj.levels === true ? [1, 2, 3, 4, 5, 6] : obj.levels)],\n          schema: object((_obj$schema = obj.schema) !== null && _obj$schema !== void 0 ? _obj$schema : {})\n        };\n      })(),\n      inlineMarks: formatting.inlineMarks === true ? {\n        bold: true,\n        code: true,\n        italic: true,\n        keyboard: false,\n        // not supported natively in markdown\n        strikethrough: true,\n        subscript: false,\n        // not supported natively in markdown\n        superscript: false,\n        // not supported natively in markdown\n        underline: false // not supported natively in markdown\n      } : {\n        bold: !!((_formatting$inlineMar = formatting.inlineMarks) !== null && _formatting$inlineMar !== void 0 && _formatting$inlineMar.bold),\n        code: !!((_formatting$inlineMar2 = formatting.inlineMarks) !== null && _formatting$inlineMar2 !== void 0 && _formatting$inlineMar2.code),\n        italic: !!((_formatting$inlineMar3 = formatting.inlineMarks) !== null && _formatting$inlineMar3 !== void 0 && _formatting$inlineMar3.italic),\n        strikethrough: !!((_formatting$inlineMar4 = formatting.inlineMarks) !== null && _formatting$inlineMar4 !== void 0 && _formatting$inlineMar4.strikethrough),\n        underline: !!((_formatting$inlineMar5 = formatting.inlineMarks) !== null && _formatting$inlineMar5 !== void 0 && _formatting$inlineMar5.underline),\n        keyboard: !!((_formatting$inlineMar6 = formatting.inlineMarks) !== null && _formatting$inlineMar6 !== void 0 && _formatting$inlineMar6.keyboard),\n        subscript: !!((_formatting$inlineMar7 = formatting.inlineMarks) !== null && _formatting$inlineMar7 !== void 0 && _formatting$inlineMar7.subscript),\n        superscript: !!((_formatting$inlineMar8 = formatting.inlineMarks) !== null && _formatting$inlineMar8 !== void 0 && _formatting$inlineMar8.superscript)\n      },\n      listTypes: formatting.listTypes === true ? {\n        ordered: true,\n        unordered: true\n      } : {\n        ordered: !!((_formatting$listTypes = formatting.listTypes) !== null && _formatting$listTypes !== void 0 && _formatting$listTypes.ordered),\n        unordered: !!((_formatting$listTypes2 = formatting.listTypes) !== null && _formatting$listTypes2 !== void 0 && _formatting$listTypes2.unordered)\n      },\n      softBreaks: !!formatting.softBreaks\n    },\n    links: !!config.links,\n    layouts: [...new Set((config.layouts || []).map(x => JSON.stringify(x)))].map(x => JSON.parse(x)),\n    dividers: !!config.dividers,\n    images: imagesConfig === undefined ? false : {\n      ...imagesConfig,\n      schema: {\n        alt: (_imagesConfig$schema$ = (_imagesConfig$schema = imagesConfig.schema) === null || _imagesConfig$schema === void 0 ? void 0 : _imagesConfig$schema.alt) !== null && _imagesConfig$schema$ !== void 0 ? _imagesConfig$schema$ : defaultAltField$1,\n        title: (_imagesConfig$schema$2 = (_imagesConfig$schema2 = imagesConfig.schema) === null || _imagesConfig$schema2 === void 0 ? void 0 : _imagesConfig$schema2.title) !== null && _imagesConfig$schema$2 !== void 0 ? _imagesConfig$schema$2 : emptyTitleField$1\n      }\n    },\n    tables: !!config.tables\n  };\n}\n\n/**\n * @deprecated `fields.markdoc` has superseded this field. `fields.mdx` is also available if you prefer MDX.\n */\nfunction document({\n  label,\n  componentBlocks = {},\n  description,\n  ...documentFeaturesConfig\n}) {\n  const documentFeatures = normaliseDocumentFeatures(documentFeaturesConfig);\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }];\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        componentBlocks: componentBlocks,\n        description: description,\n        label: label,\n        documentFeatures: documentFeatures,\n        ...props\n      });\n    },\n    parse(_, data) {\n      const markdoc = textDecoder$1.decode(data.content);\n      fromMarkdoc((0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(markdoc), componentBlocks);\n      return deserializeFiles((0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.n)(), componentBlocks, data.other, data.external, 'edit', documentFeatures, data.slug);\n    },\n    contentExtension: '.mdoc',\n    validate(value) {\n      return value;\n    },\n    directories: [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(componentBlocks).map(([name, block]) => [name, object(block.schema)])))), ...(typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? [fixPath(documentFeatures.images.directory)] : [])],\n    serialize(value, opts) {\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.i)();\n    },\n    reader: {\n      parse(value, data) {\n        const markdoc = textDecoder$1.decode(data.content);\n        const document = fromMarkdoc((0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(markdoc), componentBlocks);\n        return deserializeFiles(document, componentBlocks, new Map(), new Map(), 'read', documentFeatures, undefined);\n      }\n    }\n  };\n}\n\nconst defaultAltField = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.t)({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.b)({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  },\n  label: 'Title'\n});\nfunction editorOptionsToConfig(options) {\n  var _options$bold, _options$italic, _options$strikethroug, _options$code, _options$blockquote, _options$orderedList, _options$unorderedLis, _options$table, _options$link, _options$divider;\n  return {\n    bold: (_options$bold = options.bold) !== null && _options$bold !== void 0 ? _options$bold : true,\n    italic: (_options$italic = options.italic) !== null && _options$italic !== void 0 ? _options$italic : true,\n    strikethrough: (_options$strikethroug = options.strikethrough) !== null && _options$strikethroug !== void 0 ? _options$strikethroug : true,\n    code: (_options$code = options.code) !== null && _options$code !== void 0 ? _options$code : true,\n    heading: (() => {\n      let levels = [];\n      let levelsOpt = typeof options.heading === 'object' && !Array.isArray(options.heading) ? options.heading.levels : options.heading;\n      if (levelsOpt === true || levelsOpt === undefined) {\n        levels = [1, 2, 3, 4, 5, 6];\n      }\n      if (Array.isArray(levelsOpt)) {\n        levels = levelsOpt;\n      }\n      return {\n        levels,\n        schema: options.heading && typeof options.heading === 'object' && 'schema' in options.heading ? options.heading.schema : {}\n      };\n    })(),\n    blockquote: (_options$blockquote = options.blockquote) !== null && _options$blockquote !== void 0 ? _options$blockquote : true,\n    orderedList: (_options$orderedList = options.orderedList) !== null && _options$orderedList !== void 0 ? _options$orderedList : true,\n    unorderedList: (_options$unorderedLis = options.unorderedList) !== null && _options$unorderedLis !== void 0 ? _options$unorderedLis : true,\n    table: (_options$table = options.table) !== null && _options$table !== void 0 ? _options$table : true,\n    link: (_options$link = options.link) !== null && _options$link !== void 0 ? _options$link : true,\n    image: options.image !== false ? ((_opts$transformFilena, _opts$schema$alt, _opts$schema, _opts$schema$title, _opts$schema2) => {\n      const opts = options.image === true ? undefined : options.image;\n      return {\n        directory: opts === null || opts === void 0 ? void 0 : opts.directory,\n        publicPath: opts === null || opts === void 0 ? void 0 : opts.publicPath,\n        transformFilename: (_opts$transformFilena = opts === null || opts === void 0 ? void 0 : opts.transformFilename) !== null && _opts$transformFilena !== void 0 ? _opts$transformFilena : x => x,\n        schema: {\n          alt: (_opts$schema$alt = opts === null || opts === void 0 || (_opts$schema = opts.schema) === null || _opts$schema === void 0 ? void 0 : _opts$schema.alt) !== null && _opts$schema$alt !== void 0 ? _opts$schema$alt : defaultAltField,\n          title: (_opts$schema$title = opts === null || opts === void 0 || (_opts$schema2 = opts.schema) === null || _opts$schema2 === void 0 ? void 0 : _opts$schema2.title) !== null && _opts$schema$title !== void 0 ? _opts$schema$title : emptyTitleField\n        }\n      };\n    })() : undefined,\n    divider: (_options$divider = options.divider) !== null && _options$divider !== void 0 ? _options$divider : true,\n    codeBlock: options.codeBlock === false ? undefined : {\n      schema: typeof options.codeBlock === 'object' ? options.codeBlock.schema : {}\n    }\n  };\n}\n\nfunction getTypeForField(field) {\n  if (field.kind === 'object' || field.kind === 'conditional') {\n    return {\n      type: Object,\n      required: true\n    };\n  }\n  if (field.kind === 'array') {\n    return {\n      type: Array,\n      required: true\n    };\n  }\n  if (field.kind === 'child') {\n    return {};\n  }\n  if (field.formKind === undefined) {\n    if (typeof field.defaultValue === 'string' && 'options' in field && Array.isArray(field.options) && field.options.every(val => typeof val === 'object' && val !== null && 'value' in val && typeof val.value === 'string')) {\n      return {\n        type: String,\n        matches: field.options.map(x => x.value),\n        required: true\n      };\n    }\n    if (typeof field.defaultValue === 'string') {\n      let required = false;\n      try {\n        field.parse('');\n      } catch {\n        required = true;\n      }\n      return {\n        type: String,\n        required\n      };\n    }\n    try {\n      field.parse(1);\n      return {\n        type: Number\n      };\n    } catch {}\n    if (typeof field.defaultValue === 'boolean') {\n      return {\n        type: Boolean,\n        required: true\n      };\n    }\n    return {};\n  }\n  if (field.formKind === 'slug') {\n    let required = false;\n    try {\n      field.parse('', undefined);\n    } catch {\n      required = true;\n    }\n    return {\n      type: String,\n      required\n    };\n  }\n  if (field.formKind === 'asset') {\n    let required = false;\n    try {\n      field.validate(null);\n    } catch {\n      required = true;\n    }\n    return {\n      type: String,\n      required\n    };\n  }\n  return {};\n}\nfunction fieldsToMarkdocAttributes(fields) {\n  return Object.fromEntries(Object.entries(fields).map(([name, field]) => {\n    const schema = getTypeForField(field);\n    return [name, schema];\n  }));\n}\nfunction createMarkdocConfig(opts) {\n  const editorConfig = editorOptionsToConfig(opts.options || {});\n  const config = {\n    nodes: {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes\n    },\n    tags: {}\n  };\n  if (editorConfig.heading.levels.length) {\n    config.nodes.heading = {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.heading,\n      attributes: {\n        ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.heading.attributes,\n        ...fieldsToMarkdocAttributes(editorConfig.heading.schema)\n      }\n    };\n  } else {\n    config.nodes.heading = undefined;\n  }\n  if (!editorConfig.blockquote) {\n    config.nodes.blockquote = undefined;\n  }\n  if (editorConfig.codeBlock) {\n    config.nodes.fence = {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.fence,\n      attributes: {\n        ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.fence.attributes,\n        ...fieldsToMarkdocAttributes(editorConfig.codeBlock.schema)\n      }\n    };\n  } else {\n    config.nodes.fence = undefined;\n  }\n  if (!editorConfig.orderedList && !editorConfig.unorderedList) {\n    config.nodes.list = undefined;\n  }\n  if (!editorConfig.bold) {\n    config.nodes.strong = undefined;\n  }\n  if (!editorConfig.italic) {\n    config.nodes.em = undefined;\n  }\n  if (!editorConfig.strikethrough) {\n    config.nodes.s = undefined;\n  }\n  if (!editorConfig.link) {\n    config.nodes.link = undefined;\n  }\n  if (!editorConfig.image) {\n    config.nodes.image = undefined;\n  }\n  if (!editorConfig.divider) {\n    config.nodes.hr = undefined;\n  }\n  if (!editorConfig.table) {\n    config.nodes.table = undefined;\n  }\n  for (const [name, component] of Object.entries(opts.components || {})) {\n    var _opts$render;\n    const isEmpty = component.kind === 'block' || component.kind === 'inline';\n    config.tags[name] = {\n      render: (_opts$render = opts.render) === null || _opts$render === void 0 || (_opts$render = _opts$render.tags) === null || _opts$render === void 0 ? void 0 : _opts$render[name],\n      children: isEmpty ? [] : undefined,\n      selfClosing: isEmpty,\n      attributes: fieldsToMarkdocAttributes(component.schema),\n      description: 'description' in component ? component.description : undefined,\n      inline: component.kind === 'inline' || component.kind === 'mark'\n    };\n  }\n  for (const [name, render] of Object.entries(((_opts$render2 = opts.render) === null || _opts$render2 === void 0 ? void 0 : _opts$render2.nodes) || {})) {\n    var _opts$render2;\n    const nodeSchema = config.nodes[name];\n    if (nodeSchema) {\n      nodeSchema.render = render;\n    }\n  }\n  return config;\n}\n\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction getDirectoriesForEditorField(components, config) {\n  return [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(components).map(([name, component]) => [name, object(component.schema)])))), ...(typeof config.image === 'object' && typeof config.image.directory === 'string' ? [fixPath(config.image.directory)] : [])];\n}\nfunction markdoc({\n  label,\n  description,\n  options = {},\n  components = {},\n  extension = 'mdoc'\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (_, {\n      content,\n      other,\n      external,\n      slug\n    }) => {\n      const text = textDecoder.decode(content);\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.p)(text, getSchema());\n    },\n    contentExtension: `.${extension}`,\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.k)();\n      return {\n        content: textEncoder.encode(out.content),\n        external: out.external,\n        other: out.other,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: (_, {\n        content\n      }) => {\n        const text = textDecoder.decode(content);\n        return {\n          node: (0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(text)\n        };\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n}\nmarkdoc.createMarkdocConfig = createMarkdocConfig;\nmarkdoc.inline = function inlineMarkdoc({\n  label,\n  description,\n  options = {},\n  components = {}\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'assets',\n    defaultValue() {\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (value, {\n      other,\n      external,\n      slug\n    }) => {\n      if (value === undefined) {\n        value = '';\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n      }\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.p)(value, getSchema());\n    },\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.k)();\n      return {\n        external: out.external,\n        other: out.other,\n        value: out.content\n      };\n    },\n    reader: {\n      parse: value => {\n        if (value === undefined) {\n          value = '';\n        }\n        if (typeof value !== 'string') {\n          throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n        }\n        return {\n          node: (0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(value)\n        };\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n};\nfunction mdx({\n  label,\n  description,\n  options = {},\n  components = {},\n  extension = 'mdx'\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (_, {\n      content,\n      other,\n      external,\n      slug\n    }) => {\n      const text = textDecoder.decode(content);\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.o)(text, getSchema());\n    },\n    contentExtension: `.${extension}`,\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.q)();\n      return {\n        content: textEncoder.encode(out.content),\n        external: out.external,\n        other: out.other,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: (_, {\n        content\n      }) => {\n        const text = textDecoder.decode(content);\n        return text;\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n}\nmdx.inline = function mdx({\n  label,\n  description,\n  options = {},\n  components = {}\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'assets',\n    defaultValue() {\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (value, {\n      other,\n      external,\n      slug\n    }) => {\n      if (value === undefined) {\n        value = '';\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n      }\n      return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.o)(value, getSchema());\n    },\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.q)();\n      return {\n        external: out.external,\n        other: out.other,\n        value: out.content\n      };\n    },\n    reader: {\n      parse: value => {\n        if (value === undefined) {\n          value = '';\n        }\n        if (typeof value !== 'string') {\n          throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n        }\n        return value;\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtYWFmNTc4ZTIubm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRDtBQUNoQjtBQUNjO0FBQ2dYO0FBQ3JZO0FBQ0o7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZEQUFXO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxlQUFlO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsVUFBVTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVEsSUFBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FB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QUFFQTtBQUNBLFNBQVMsa0RBQVU7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNkNBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0EsZ0JBQWdCLHNEQUFjO0FBQzlCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0EsU0FBUyxrRUFBSztBQUNkLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0VBQUs7QUFDZDtBQUNBLFdBQVcsa0VBQUs7QUFDaEI7QUFDQTtBQUNBO0FBQ0Es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Yy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9kaXN0L2luZGV4LWFhZjU3OGUyLm5vZGUuanM/NWI2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZSwgbm9kZXMgfSBmcm9tICdAbWFya2RvYy9tYXJrZG9jL2Rpc3QvaW5kZXgubWpzJztcbmltcG9ydCB7IGFzc2VydE5ldmVyIH0gZnJvbSAnZW1lcnkvYXNzZXJ0aW9ucyc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydE5ldmVyIGFzIGFzc2VydE5ldmVyJDEgfSBmcm9tICdlbWVyeSc7XG5pbXBvcnQgeyBiIGFzIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlLCB0IGFzIHRleHQsIEYgYXMgRmllbGREYXRhRXJyb3IsIGggYXMgRG9jdW1lbnRGaWVsZElucHV0LCBuIGFzIG5vcm1hbGl6ZURvY3VtZW50RmllbGRDaGlsZHJlbiwgaSBhcyBzZXJpYWxpemVNYXJrZG9jLCBqIGFzIGdldERlZmF1bHRWYWx1ZSwgcCBhcyBwYXJzZVRvRWRpdG9yU3RhdGUsIGsgYXMgc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlLCBsIGFzIHByb3NlbWlycm9yVG9ZWG1sRnJhZ21lbnQsIG0gYXMgY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTLCBvIGFzIHBhcnNlVG9FZGl0b3JTdGF0ZU1EWCwgcSBhcyBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGVNRFgsIHIgYXMgY3JlYXRlRWRpdG9yU2NoZW1hIH0gZnJvbSAnLi9pbmRleC0xYTlkYTBmYi5ub2RlLmpzJztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5mdW5jdGlvbiBvYmplY3QoZmllbGRzLCBvcHRzKSB7XG4gIHJldHVybiB7XG4gICAgLi4ub3B0cyxcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICBmaWVsZHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBpbnB1dFBhdGgpIHtcbiAgY29uc3QgcGF0aCA9IFsuLi5pbnB1dFBhdGhdO1xuICB3aGlsZSAocGF0aC5sZW5ndGgpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgdmFsdWUgPSB2YWx1ZVtrZXldO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybVByb3BzKHNjaGVtYSwgdmFsdWUsIHZpc2l0b3JzLCBwYXRoID0gW10pIHtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnZm9ybScgfHwgc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICBpZiAodmlzaXRvcnNbc2NoZW1hLmtpbmRdKSB7XG4gICAgICByZXR1cm4gdmlzaXRvcnNbc2NoZW1hLmtpbmRdKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IHZhbCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKS5tYXAoKFtrZXksIHZhbF0pID0+IHtcbiAgICAgIHJldHVybiBba2V5LCB0cmFuc2Zvcm1Qcm9wcyh2YWwsIHZhbHVlW2tleV0sIHZpc2l0b3JzLCBbLi4ucGF0aCwga2V5XSldO1xuICAgIH0pKTtcbiAgICBpZiAodmlzaXRvcnMub2JqZWN0KSB7XG4gICAgICByZXR1cm4gdmlzaXRvcnNbc2NoZW1hLmtpbmRdKHNjaGVtYSwgdmFsLCBwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBjb25zdCB2YWwgPSB2YWx1ZS5tYXAoKHZhbCwgaWR4KSA9PiB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEuZWxlbWVudCwgdmFsLCB2aXNpdG9ycywgcGF0aC5jb25jYXQoaWR4KSkpO1xuICAgIGlmICh2aXNpdG9ycy5hcnJheSkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgY29uc3QgZGlzY3JpbWluYW50ID0gdHJhbnNmb3JtUHJvcHMoc2NoZW1hLmRpc2NyaW1pbmFudCwgdmFsdWUuZGlzY3JpbWluYW50LCB2aXNpdG9ycywgcGF0aC5jb25jYXQoJ2Rpc2NyaW1pbmFudCcpKTtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbCA9IHRyYW5zZm9ybVByb3BzKHNjaGVtYS52YWx1ZXNbZGlzY3JpbWluYW50LnRvU3RyaW5nKCldLCB2YWx1ZS52YWx1ZSwgdmlzaXRvcnMsIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcbiAgICBjb25zdCB2YWwgPSB7XG4gICAgICBkaXNjcmltaW5hbnQsXG4gICAgICB2YWx1ZTogY29uZGl0aW9uYWxWYWxcbiAgICB9O1xuICAgIGlmICh2aXNpdG9ycy5jb25kaXRpb25hbCkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuLy8gYSB2IGltcG9ydGFudCBub3RlXG4vLyBtYXJrcyBpbiB0aGUgbWFya2Rvd24gYXN0L2h0bWwgYXJlIHJlcHJlc2VudGVkIHF1aXRlIGRpZmZlcmVudGx5IHRvIGhvdyB0aGV5IGFyZSBpbiBzbGF0ZVxuLy8gaWYgeW91IGhhZCB0aGUgbWFya2Rvd24gKipzb21ldGhpbmcgaHR0cHM6Ly9rZXlzdG9uZWpzLmNvbSBzb21ldGhpbmcqKlxuLy8gdGhlIGJvbGQgbm9kZSBpcyB0aGUgcGFyZW50IG9mIHRoZSBsaW5rIG5vZGVcbi8vIGJ1dCBpbiBzbGF0ZSwgbWFya3MgYXJlIG9ubHkgcmVwcmVzZW50ZWQgb24gdGV4dCBub2Rlc1xuXG5jb25zdCBjdXJyZW50bHlBY3RpdmVNYXJrcyA9IG5ldyBTZXQoKTtcbmNvbnN0IGN1cnJlbnRseURpc2FibGVkTWFya3MgPSBuZXcgU2V0KCk7XG5sZXQgY3VycmVudExpbmsgPSBudWxsO1xuZnVuY3Rpb24gYWRkTWFya1RvQ2hpbGRyZW4obWFyaywgY2IpIHtcbiAgY29uc3Qgd2FzUHJldmlvdXNseUFjdGl2ZSA9IGN1cnJlbnRseUFjdGl2ZU1hcmtzLmhhcyhtYXJrKTtcbiAgY3VycmVudGx5QWN0aXZlTWFya3MuYWRkKG1hcmspO1xuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGZpbmFsbHkge1xuICAgIGlmICghd2FzUHJldmlvdXNseUFjdGl2ZSkge1xuICAgICAgY3VycmVudGx5QWN0aXZlTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0TGlua0ZvckNoaWxkcmVuKGhyZWYsIGNiKSB7XG4gIC8vIHdlJ2xsIG9ubHkgdXNlIHRoZSBvdXRlciBsaW5rXG4gIGlmIChjdXJyZW50TGluayAhPT0gbnVsbCkge1xuICAgIHJldHVybiBjYigpO1xuICB9XG4gIGN1cnJlbnRMaW5rID0gaHJlZjtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBjdXJyZW50TGluayA9IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgbW9yZSBzdHJpY3QgdGhhbiBgRWxlbWVudCAmIHsgdHlwZTogJ2xpbmsnOyB9YCBiZWNhdXNlIGBjaGlsZHJlbmBcbiAqIGlzIGNvbnN0cmFpbmVkIHRvIG9ubHkgY29udGFpbiBUZXh0IG5vZGVzLiBUaGlzIGNhbid0IGJlIGFzc3VtZWQgZ2VuZXJhbGx5IGFyb3VuZCB0aGUgZWRpdG9yXG4gKiAoYmVjYXVzZSBvZiBwb3RlbnRpYWxseSBmdXR1cmUgaW5saW5lIGNvbXBvbmVudHMgb3IgbmVzdGVkIGxpbmtzKHdoaWNoIGFyZSBub3JtYWxpemVkIGF3YXkgYnV0IHRoZSBlZGl0b3IgbmVlZHMgdG8gbm90IGJyZWFrIGlmIGl0IGhhcHBlbnMpKVxuICogYnV0IHdoZXJlIHRoaXMgdHlwZSBpcyB1c2VkLCB3ZSdyZSBvbmx5IGdvaW5nIHRvIGFsbG93IGxpbmtzIHRvIGNvbnRhaW4gVGV4dCBhbmQgdGhhdCdzIGltcG9ydGFudFxuICogc28gdGhhdCB3ZSBrbm93IGEgYmxvY2sgd2lsbCBuZXZlciBiZSBpbnNpZGUgYW4gaW5saW5lIGJlY2F1c2UgU2xhdGUgZ2V0cyB1bmhhcHB5IHdoZW4gdGhhdCBoYXBwZW5zXG4gKiAocmVhbGx5IHRoZSBsaW5rIGlubGluZSBzaG91bGQgcHJvYmFibHkgYmUgYSBtYXJrIHJhdGhlciB0aGFuIGFuIGlubGluZSxcbiAqIG5vbi12b2lkIGlubGluZXMgYXJlIHByb2JhYmx5IGFsd2F5cyBiYWQgYnV0IHRoYXQgd291bGQgaW1wbHkgY2hhbmdpbmcgdGhlIGRvY3VtZW50XG4gKiBzdHJ1Y3R1cmUgd2hpY2ggd291bGQgYmUgc3VjaCB1bm5lY2Vzc2FyeSBicmVha2FnZSlcbiAqL1xuXG5mdW5jdGlvbiBnZXRJbmxpbmVOb2Rlcyh0ZXh0KSB7XG4gIGNvbnN0IG5vZGUgPSB7XG4gICAgdGV4dFxuICB9O1xuICBmb3IgKGNvbnN0IG1hcmsgb2YgY3VycmVudGx5QWN0aXZlTWFya3MpIHtcbiAgICBpZiAoIWN1cnJlbnRseURpc2FibGVkTWFya3MuaGFzKG1hcmspKSB7XG4gICAgICBub2RlW21hcmtdID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnRMaW5rICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIFt7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgIGhyZWY6IGN1cnJlbnRMaW5rLFxuICAgICAgY2hpbGRyZW46IFtub2RlXVxuICAgIH0sIHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfV07XG4gIH1cbiAgcmV0dXJuIFtub2RlXTtcbn1cblxuY2xhc3MgVmFyaWFibGVDaGlsZEZpZWxkcyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ1RoZXJlIGFyZSBhIHZhcmlhYmxlIG51bWJlciBvZiBjaGlsZCBmaWVsZHMnKTtcbiAgfVxufVxuZnVuY3Rpb24gZmluZFNpbmdsZUNoaWxkRmllbGQoc2NoZW1hKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHNjaGVtYSwgW10sIG5ldyBTZXQoKSk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgfVxuICAgIHJldHVybjtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhcmlhYmxlQ2hpbGRGaWVsZHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5mdW5jdGlvbiBfZmluZENvbnN0YW50Q2hpbGRGaWVsZHMoc2NoZW1hLCBwYXRoLCBzZWVuU2NoZW1hcykge1xuICBpZiAoc2VlblNjaGVtYXMuaGFzKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgc2VlblNjaGVtYXMuYWRkKHNjaGVtYSk7XG4gIHN3aXRjaCAoc2NoZW1hLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiBbXTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgcmVsYXRpdmVQYXRoOiBwYXRoLFxuICAgICAgICBvcHRpb25zOiBzY2hlbWEub3B0aW9ucyxcbiAgICAgICAga2luZDogJ2NoaWxkJ1xuICAgICAgfV07XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBpZiAoY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhcmlhYmxlQ2hpbGRGaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICBpZiAoc2NoZW1hLmFzQ2hpbGRUYWcpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IF9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyhzY2hlbWEuZWxlbWVudCwgW10sIHNlZW5TY2hlbWFzKTtcbiAgICAgICAgICBpZiAoY2hpbGQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIGtpbmQ6ICdhcnJheScsXG4gICAgICAgICAgICBhc0NoaWxkVGFnOiBzY2hlbWEuYXNDaGlsZFRhZyxcbiAgICAgICAgICAgIGZpZWxkOiBzY2hlbWEsXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGg6IHBhdGgsXG4gICAgICAgICAgICBjaGlsZDogY2hpbGRbMF1cbiAgICAgICAgICB9XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhcmlhYmxlQ2hpbGRGaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBwYXRocy5wdXNoKC4uLl9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyh2YWx1ZSwgcGF0aC5jb25jYXQoa2V5KSwgc2VlblNjaGVtYXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aHM7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLCBzZWVuID0gbmV3IFNldCgpKSB7XG4gIGlmIChzZWVuLmhhcyhzY2hlbWEpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHNlZW4uYWRkKHNjaGVtYSk7XG4gIHN3aXRjaCAoc2NoZW1hLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzY2hlbWEudmFsdWVzKS5zb21lKHZhbHVlID0+IGNvdWxkQ29udGFpbkNoaWxkRmllbGQodmFsdWUsIHNlZW4pKTtcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpLnNvbWUoa2V5ID0+IGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLmZpZWxkc1trZXldLCBzZWVuKSk7XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAgcmV0dXJuIGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLmVsZW1lbnQsIHNlZW4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlubGluZU5vZGVGcm9tTWFya2RvYyhub2RlKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdpbmxpbmUnKSB7XG4gICAgcmV0dXJuIGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbik7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgcmV0dXJuIHNldExpbmtGb3JDaGlsZHJlbihub2RlLmF0dHJpYnV0ZXMuaHJlZiwgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgcmV0dXJuIGdldElubGluZU5vZGVzKG5vZGUuYXR0cmlidXRlcy5jb250ZW50KTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnc3Ryb25nJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignYm9sZCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdjb2RlJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignY29kZScsICgpID0+IGdldElubGluZU5vZGVzKG5vZGUuYXR0cmlidXRlcy5jb250ZW50KSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2VtJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignaXRhbGljJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3MnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdzdHJpa2V0aHJvdWdoJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhZycpIHtcbiAgICBpZiAobm9kZS50YWcgPT09ICd1Jykge1xuICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCd1bmRlcmxpbmUnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAna2JkJykge1xuICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdrZXlib2FyZCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdzdWInKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N1YnNjcmlwdCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdzdXAnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N1cGVyc2NyaXB0JywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdzb2Z0YnJlYWsnKSB7XG4gICAgcmV0dXJuIGdldElubGluZU5vZGVzKCcgJyk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hhcmRicmVhaycpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMoJ1xcbicpO1xuICB9XG4gIGlmIChub2RlLnRhZyA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcgJiYgQXJyYXkuaXNBcnJheShub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGgpICYmIG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aC5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgeCA9PT0gJ251bWJlcicpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdjb21wb25lbnQtaW5saW5lLXByb3AnLFxuICAgICAgY2hpbGRyZW46IGlubGluZUZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pLFxuICAgICAgcHJvcFBhdGg6IG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aFxuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGlubGluZSBub2RlIHR5cGU6ICR7bm9kZS50eXBlfWApO1xufVxuZnVuY3Rpb24gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2Rlcykge1xuICByZXR1cm4gbm9kZXMuZmxhdE1hcChpbmxpbmVOb2RlRnJvbU1hcmtkb2MpO1xufVxuZnVuY3Rpb24gaW5saW5lRnJvbU1hcmtkb2Mobm9kZXMpIHtcbiAgY29uc3QgdHJhbnNmb3JtZWROb2RlcyA9IG5vZGVzLmZsYXRNYXAoaW5saW5lTm9kZUZyb21NYXJrZG9jKTtcbiAgY29uc3QgbmV4dE5vZGVzID0gW107XG4gIGxldCBsYXN0Tm9kZTtcbiAgZm9yIChjb25zdCBbaWR4LCBub2RlXSBvZiB0cmFuc2Zvcm1lZE5vZGVzLmVudHJpZXMoKSkge1xuICAgIHZhciBfbGFzdE5vZGU7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gdW5kZWZpbmVkICYmIG5vZGUudGV4dCA9PT0gJycgJiYgKChfbGFzdE5vZGUgPSBsYXN0Tm9kZSkgPT09IG51bGwgfHwgX2xhc3ROb2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbGFzdE5vZGUudHlwZSkgPT09IHVuZGVmaW5lZCAmJiBpZHggIT09IHRyYW5zZm9ybWVkTm9kZXMubGVuZ3RoIC0gMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG5leHROb2Rlcy5wdXNoKG5vZGUpO1xuICAgIGxhc3ROb2RlID0gbm9kZTtcbiAgfVxuICBpZiAoIW5leHROb2Rlcy5sZW5ndGgpIHtcbiAgICBuZXh0Tm9kZXMucHVzaCh7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXh0Tm9kZXM7XG59XG5mdW5jdGlvbiBmcm9tTWFya2RvYyhub2RlLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3Qgbm9kZXMgPSBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSk7XG4gIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH1dO1xuICB9XG4gIGlmIChub2Rlc1tub2Rlcy5sZW5ndGggLSAxXS50eXBlICE9PSAncGFyYWdyYXBoJykge1xuICAgIG5vZGVzLnB1c2goe1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuZnVuY3Rpb24gZnJvbU1hcmtkb2NOb2RlKG5vZGUsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAobm9kZS50eXBlID09PSAnYmxvY2txdW90ZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2ZlbmNlJykge1xuICAgIGNvbnN0IHtcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgY29udGVudCxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnY29kZScsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogY29udGVudC5yZXBsYWNlKC9cXG4kLywgJycpXG4gICAgICB9XSxcbiAgICAgIC4uLih0eXBlb2YgbGFuZ3VhZ2UgPT09ICdzdHJpbmcnID8ge1xuICAgICAgICBsYW5ndWFnZVxuICAgICAgfSA6IHt9KSxcbiAgICAgIC4uLnJlc3RcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdoZWFkaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5ub2RlLmF0dHJpYnV0ZXMsXG4gICAgICBsZXZlbDogbm9kZS5hdHRyaWJ1dGVzLmxldmVsLFxuICAgICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgICAgY2hpbGRyZW46IGlubGluZUZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGlzdCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogbm9kZS5hdHRyaWJ1dGVzLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaXRlbScpIHtcbiAgICB2YXIgX25vZGUkY2hpbGRyZW4kO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW3tcbiAgICAgIHR5cGU6ICdsaXN0LWl0ZW0tY29udGVudCcsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPyBpbmxpbmVGcm9tTWFya2RvYyhbbm9kZS5jaGlsZHJlblswXV0pIDogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfV07XG4gICAgaWYgKCgoX25vZGUkY2hpbGRyZW4kID0gbm9kZS5jaGlsZHJlblsxXSkgPT09IG51bGwgfHwgX25vZGUkY2hpbGRyZW4kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZSRjaGlsZHJlbiQudHlwZSkgPT09ICdsaXN0Jykge1xuICAgICAgY29uc3QgbGlzdCA9IG5vZGUuY2hpbGRyZW5bMV07XG4gICAgICBjaGlsZHJlbi5wdXNoKHtcbiAgICAgICAgdHlwZTogbGlzdC5hdHRyaWJ1dGVzLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICAgIGNoaWxkcmVuOiBsaXN0LmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2xpc3QtaXRlbScsXG4gICAgICBjaGlsZHJlblxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcpIHtcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgbm9kZS5jaGlsZHJlblswXS50eXBlID09PSAnaW5saW5lJyAmJiBub2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgIHZhciBfaW1hZ2UkYXR0cmlidXRlcyR0aXQ7XG4gICAgICBjb25zdCBpbWFnZSA9IG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICBzcmM6IGRlY29kZVVSSShpbWFnZS5hdHRyaWJ1dGVzLnNyYyksXG4gICAgICAgIGFsdDogaW1hZ2UuYXR0cmlidXRlcy5hbHQsXG4gICAgICAgIHRpdGxlOiAoX2ltYWdlJGF0dHJpYnV0ZXMkdGl0ID0gaW1hZ2UuYXR0cmlidXRlcy50aXRsZSkgIT09IG51bGwgJiYgX2ltYWdlJGF0dHJpYnV0ZXMkdGl0ICE9PSB2b2lkIDAgPyBfaW1hZ2UkYXR0cmlidXRlcyR0aXQgOiAnJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkcmVuID0gaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbik7XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBjaGlsZHJlblswXS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuWzBdO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHRleHRBbGlnbjogbm9kZS5hdHRyaWJ1dGVzLnRleHRBbGlnblxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hyJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZScsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGJvZHknKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1ib2R5JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0aGVhZCcpIHtcbiAgICBpZiAoIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1oZWFkJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0cicpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLXJvdycsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1jZWxsJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0aCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWNlbGwnLFxuICAgICAgaGVhZGVyOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhZycpIHtcbiAgICBpZiAobm9kZS50YWcgPT09ICd0YWJsZScpIHtcbiAgICAgIHJldHVybiBmcm9tTWFya2RvY05vZGUobm9kZS5jaGlsZHJlblswXSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnbGF5b3V0Jykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2xheW91dCcsXG4gICAgICAgIGxheW91dDogbm9kZS5hdHRyaWJ1dGVzLmxheW91dCxcbiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnbGF5b3V0LWFyZWEnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGF5b3V0LWFyZWEnLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrJyxcbiAgICAgICAgY29tcG9uZW50OiBub2RlLmF0dHJpYnV0ZXMuY29tcG9uZW50LFxuICAgICAgICBwcm9wczogbm9kZS5hdHRyaWJ1dGVzLnByb3BzLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgPyBbe1xuICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtaW5saW5lLXByb3AnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9XSA6IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnICYmIEFycmF5LmlzQXJyYXkobm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoKSAmJiBub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGguZXZlcnkoeCA9PiB0eXBlb2YgeCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHggPT09ICdudW1iZXInKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jay1wcm9wJyxcbiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKSxcbiAgICAgICAgcHJvcFBhdGg6IG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnKSB7XG4gICAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGNvbXBvbmVudEJsb2Nrc1tub2RlLnRhZ107XG4gICAgICBpZiAoY29tcG9uZW50QmxvY2spIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ2hpbGRGaWVsZCA9IGZpbmRTaW5nbGVDaGlsZEZpZWxkKHtcbiAgICAgICAgICBraW5kOiAnb2JqZWN0JyxcbiAgICAgICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNpbmdsZUNoaWxkRmllbGQpIHtcbiAgICAgICAgICBjb25zdCBuZXdBdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShub2RlLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyhub2RlLmNoaWxkcmVuLCBjaGlsZHJlbiwgbmV3QXR0cmlidXRlcywgc2luZ2xlQ2hpbGRGaWVsZCwgW10sIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICAgICAgY29tcG9uZW50OiBub2RlLnRhZyxcbiAgICAgICAgICAgIHByb3BzOiBuZXdBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jaycsXG4gICAgICAgICAgY29tcG9uZW50OiBub2RlLnRhZyxcbiAgICAgICAgICBwcm9wczogbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IFt7XG4gICAgICAgICAgICB0eXBlOiAnY29tcG9uZW50LWlubGluZS1wcm9wJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XSA6IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdGFnOiAke25vZGUudGFnfWApO1xuICB9XG4gIHJldHVybiBpbmxpbmVOb2RlRnJvbU1hcmtkb2Mobm9kZSk7XG59XG5mdW5jdGlvbiB0b0NoaWxkcmVuQW5kUHJvcHMoZnJvbU1hcmtkb2MsIHJlc3VsdGluZ0NoaWxkcmVuLCB2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZCwgcGFyZW50UHJvcFBhdGgsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAoc2luZ2xlQ2hpbGRGaWVsZC5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmcm9tTWFya2RvYy5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpO1xuICAgIHJlc3VsdGluZ0NoaWxkcmVuLnB1c2goe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3NpbmdsZUNoaWxkRmllbGQub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiBbLi4ucGFyZW50UHJvcFBhdGgsIC4uLnNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoXSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IFtpZHgsIGNoaWxkXSBvZiBmcm9tTWFya2RvYy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09ICd0YWcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdHlwZTogJHtjaGlsZC50eXBlfWApO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnRhZyAhPT0gc2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdGFnOiAke2NoaWxkLnRhZ31gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoaWxkLmF0dHJpYnV0ZXMpKTtcbiAgICAgIGlmIChzaW5nbGVDaGlsZEZpZWxkLmNoaWxkKSB7XG4gICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyhjaGlsZC5jaGlsZHJlbiwgcmVzdWx0aW5nQ2hpbGRyZW4sIGF0dHJpYnV0ZXMsIHNpbmdsZUNoaWxkRmllbGQuY2hpbGQsIFsuLi5wYXJlbnRQcm9wUGF0aCwgLi4uc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgsIGlkeF0sIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICB9XG4gICAgICBhcnIucHVzaChhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGhbc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgcGFyZW50ID0gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIHBhcmVudFtrZXldID0gYXJyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpeFBhdGgocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eXFwuP1xcLysvLCAnJykucmVwbGFjZSgvXFwvKiQvLCAnJyk7XG59XG5jb25zdCBjb2xsZWN0aW9uUGF0aCA9IC9cXC9cXCpcXCo/KD86JHxcXC8pLztcbmZ1bmN0aW9uIGdldENvbmZpZ3VyZWRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgdmFyIF9jb2xsZWN0aW9uQ29uZmlnJHBhdDtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgY29uc3QgcGF0aCA9IChfY29sbGVjdGlvbkNvbmZpZyRwYXQgPSBjb2xsZWN0aW9uQ29uZmlnLnBhdGgpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uQ29uZmlnJHBhdCAhPT0gdm9pZCAwID8gX2NvbGxlY3Rpb25Db25maWckcGF0IDogYCR7Y29sbGVjdGlvbn0vKi9gO1xuICBpZiAoIWNvbGxlY3Rpb25QYXRoLnRlc3QocGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbGxlY3Rpb24gcGF0aCBtdXN0IGVuZCB3aXRoIC8qIG9yIC8qKiBvciBpbmNsdWRlIC8qLyBvciAvKiovIGJ1dCAke2NvbGxlY3Rpb259IGhhcyAke3BhdGh9YCk7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29uZmlndXJlZFBhdGggPSBnZXRDb25maWd1cmVkQ29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgcGF0aCA9IGZpeFBhdGgoY29uZmlndXJlZFBhdGgucmVwbGFjZSgvXFwqXFwqPy4qJC8sICcnKSk7XG4gIHJldHVybiBwYXRoO1xufVxuZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbkZvcm1hdChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgcmV0dXJuIGdldEZvcm1hdEluZm8oY29sbGVjdGlvbkNvbmZpZykoZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbikpO1xufVxuZnVuY3Rpb24gZ2V0U2luZ2xldG9uRm9ybWF0KGNvbmZpZywgc2luZ2xldG9uKSB7XG4gIHZhciBfc2luZ2xldG9uQ29uZmlnJHBhdGg7XG4gIGNvbnN0IHNpbmdsZXRvbkNvbmZpZyA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl07XG4gIHJldHVybiBnZXRGb3JtYXRJbmZvKHNpbmdsZXRvbkNvbmZpZykoKF9zaW5nbGV0b25Db25maWckcGF0aCA9IHNpbmdsZXRvbkNvbmZpZy5wYXRoKSAhPT0gbnVsbCAmJiBfc2luZ2xldG9uQ29uZmlnJHBhdGggIT09IHZvaWQgMCA/IF9zaW5nbGV0b25Db25maWckcGF0aCA6IGAke3NpbmdsZXRvbn0vYCk7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBzbHVnKSB7XG4gIGNvbnN0IGJhc2VQYXRoID0gZ2V0Q29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3Qgc3VmZml4ID0gZ2V0Q29sbGVjdGlvbkl0ZW1TbHVnU3VmZml4KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBgJHtiYXNlUGF0aH0vJHtzbHVnfSR7c3VmZml4fWA7XG59XG5mdW5jdGlvbiBnZXRFbnRyeURhdGFGaWxlcGF0aChkaXIsIGZvcm1hdEluZm8pIHtcbiAgcmV0dXJuIGAke2Rpcn0ke2Zvcm1hdEluZm8uZGF0YUxvY2F0aW9uID09PSAnaW5kZXgnID8gJy9pbmRleCcgOiAnJ30ke2dldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pfWA7XG59XG5mdW5jdGlvbiBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24oY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb25QYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBjb2xsZWN0aW9uUGF0aC5pbmNsdWRlcygnKionKSA/ICcqKicgOiAnKic7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVNsdWdTdWZmaXgoY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbmZpZ3VyZWRQYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IHBhdGggPSBmaXhQYXRoKGNvbmZpZ3VyZWRQYXRoLnJlcGxhY2UoL15bXipdK1xcKlxcKj8vLCAnJykpO1xuICByZXR1cm4gcGF0aCA/IGAvJHtwYXRofWAgOiAnJztcbn1cbmZ1bmN0aW9uIGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pIHtcbiAgdmFyIF9zaW5nbGV0b24kcGF0aCwgX3NpbmdsZXRvbiRwYXRoMjtcbiAgaWYgKChfc2luZ2xldG9uJHBhdGggPSBjb25maWcuc2luZ2xldG9uc1tzaW5nbGV0b25dLnBhdGgpICE9PSBudWxsICYmIF9zaW5nbGV0b24kcGF0aCAhPT0gdm9pZCAwICYmIF9zaW5nbGV0b24kcGF0aC5pbmNsdWRlcygnKicpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTaW5nbGV0b24gcGF0aHMgY2Fubm90IGluY2x1ZGUgKiBidXQgJHtzaW5nbGV0b259IGhhcyAke2NvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aH1gKTtcbiAgfVxuICByZXR1cm4gZml4UGF0aCgoX3NpbmdsZXRvbiRwYXRoMiA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aCkgIT09IG51bGwgJiYgX3NpbmdsZXRvbiRwYXRoMiAhPT0gdm9pZCAwID8gX3NpbmdsZXRvbiRwYXRoMiA6IHNpbmdsZXRvbik7XG59XG5mdW5jdGlvbiBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKSB7XG4gIHJldHVybiBmb3JtYXRJbmZvLmNvbnRlbnRGaWVsZCA/IGZvcm1hdEluZm8uY29udGVudEZpZWxkLmNvbnRlbnRFeHRlbnNpb24gOiAnLicgKyBmb3JtYXRJbmZvLmRhdGE7XG59XG5mdW5jdGlvbiB3ZWFrTWVtb2l6ZShmdW5jKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgcmV0dXJuIGFyZyA9PiB7XG4gICAgaWYgKGNhY2hlLmhhcyhhcmcpKSB7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KGFyZyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmMoYXJnKTtcbiAgICBjYWNoZS5zZXQoYXJnLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5mdW5jdGlvbiBtZW1vaXplKGZ1bmMpIHtcbiAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gIHJldHVybiBhcmcgPT4ge1xuICAgIGlmIChjYWNoZS5oYXMoYXJnKSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmdldChhcmcpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBmdW5jKGFyZyk7XG4gICAgY2FjaGUuc2V0KGFyZywgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuY29uc3QgZ2V0Rm9ybWF0SW5mbyA9IHdlYWtNZW1vaXplKGNvbGxlY3Rpb25PclNpbmdsZXRvbiA9PiB7XG4gIHJldHVybiBtZW1vaXplKHBhdGggPT4gX2dldEZvcm1hdEluZm8oY29sbGVjdGlvbk9yU2luZ2xldG9uLCBwYXRoKSk7XG59KTtcbmZ1bmN0aW9uIF9nZXRGb3JtYXRJbmZvKGNvbGxlY3Rpb25PclNpbmdsZXRvbiwgcGF0aCkge1xuICB2YXIgX2Zvcm1hdCRkYXRhO1xuICBjb25zdCBkYXRhTG9jYXRpb24gPSBwYXRoLmVuZHNXaXRoKCcvJykgPyAnaW5kZXgnIDogJ291dGVyJztcbiAgY29uc3Qge1xuICAgIHNjaGVtYSxcbiAgICBmb3JtYXQgPSAneWFtbCdcbiAgfSA9IGNvbGxlY3Rpb25PclNpbmdsZXRvbjtcbiAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFMb2NhdGlvbixcbiAgICAgIGNvbnRlbnRGaWVsZDogdW5kZWZpbmVkLFxuICAgICAgZGF0YTogZm9ybWF0XG4gICAgfTtcbiAgfVxuICBsZXQgY29udGVudEZpZWxkO1xuICBpZiAoZm9ybWF0LmNvbnRlbnRGaWVsZCkge1xuICAgIGxldCBmaWVsZCA9IHtcbiAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgZmllbGRzOiBzY2hlbWFcbiAgICB9O1xuICAgIGxldCBwYXRoID0gQXJyYXkuaXNBcnJheShmb3JtYXQuY29udGVudEZpZWxkKSA/IGZvcm1hdC5jb250ZW50RmllbGQgOiBbZm9ybWF0LmNvbnRlbnRGaWVsZF07XG4gICAgY29udGVudEZpZWxkID0ge1xuICAgICAgcGF0aCxcbiAgICAgIGNvbnRlbnRFeHRlbnNpb246IGdldENvbnRlbnRFeHRlbnNpb24ocGF0aCwgZmllbGQsICgpID0+IHBhdGgubGVuZ3RoID09PSAxID8gcGF0aFswXSA6IEpTT04uc3RyaW5naWZ5KHBhdGgpKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBkYXRhOiAoX2Zvcm1hdCRkYXRhID0gZm9ybWF0LmRhdGEpICE9PSBudWxsICYmIF9mb3JtYXQkZGF0YSAhPT0gdm9pZCAwID8gX2Zvcm1hdCRkYXRhIDogJ3lhbWwnLFxuICAgIGNvbnRlbnRGaWVsZCxcbiAgICBkYXRhTG9jYXRpb25cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldENvbnRlbnRFeHRlbnNpb24ocGF0aCwgc2NoZW1hLCBkZWJ1Z05hbWUpIHtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKHNjaGVtYS5raW5kICE9PSAnZm9ybScgfHwgc2NoZW1hLmZvcm1LaW5kICE9PSAnY29udGVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udGVudCBmaWVsZCBmb3IgJHtkZWJ1Z05hbWUoKX0gaXMgbm90IGEgY29udGVudCBmaWVsZGApO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hLmNvbnRlbnRFeHRlbnNpb247XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBnZXRDb250ZW50RXh0ZW5zaW9uKHBhdGguc2xpY2UoMSksIHNjaGVtYS5maWVsZHNbcGF0aFswXV0sIGRlYnVnTmFtZSk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgaWYgKHBhdGhbMF0gIT09ICd2YWx1ZScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZGl0aW9uYWwgZmllbGRzIHJlZmVyZW5jZWQgaW4gYSBjb250ZW50RmllbGQgcGF0aCBtdXN0IG9ubHkgcmVmZXJlbmNlIHRoZSB2YWx1ZSBmaWVsZCAoJHtkZWJ1Z05hbWUoKX0pYCk7XG4gICAgfVxuICAgIGxldCBjb250ZW50RXh0ZW5zaW9uO1xuICAgIGNvbnN0IGlubmVyUGF0aCA9IHBhdGguc2xpY2UoMSk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiBPYmplY3QudmFsdWVzKHNjaGVtYS52YWx1ZXMpKSB7XG4gICAgICBjb25zdCBmb3VuZENvbnRlbnRFeHRlbnNpb24gPSBnZXRDb250ZW50RXh0ZW5zaW9uKGlubmVyUGF0aCwgdmFsdWUsIGRlYnVnTmFtZSk7XG4gICAgICBpZiAoIWNvbnRlbnRFeHRlbnNpb24pIHtcbiAgICAgICAgY29udGVudEV4dGVuc2lvbiA9IGZvdW5kQ29udGVudEV4dGVuc2lvbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY29udGVudEV4dGVuc2lvbiAhPT0gZm91bmRDb250ZW50RXh0ZW5zaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY29udGVudEZpZWxkICR7ZGVidWdOYW1lKCl9IGhhcyBjb25mbGljdGluZyBjb250ZW50IGV4dGVuc2lvbnNgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjb250ZW50RXh0ZW5zaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNvbnRlbnRGaWVsZCAke2RlYnVnTmFtZSgpfSBkb2VzIG5vdCBwb2ludCB0byBhIGNvbnRlbnQgZmllbGRgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnRFeHRlbnNpb247XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBQYXRoIHNwZWNpZmllZCBpbiBjb250ZW50RmllbGQgJHtkZWJ1Z05hbWUoKX0gZG9lcyBub3QgcG9pbnQgdG8gYSBjb250ZW50IGZpZWxkYCk7XG59XG5cbmZ1bmN0aW9uIGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBzbHVnKSB7XG4gIHJldHVybiB0eXBlb2YgcHVibGljUGF0aCA9PT0gJ3N0cmluZycgPyBgJHtwdWJsaWNQYXRoLnJlcGxhY2UoL1xcLyokLywgJycpfS8ke3NsdWcgPT09IHVuZGVmaW5lZCA/ICcnIDogc2x1ZyArICcvJ31gIDogJyc7XG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRmlsZXMobm9kZXMsIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpIHtcbiAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgICAgY29uc3QgY29tcG9uZW50QmxvY2sgPSBjb21wb25lbnRCbG9ja3Nbbm9kZS5jb21wb25lbnRdO1xuICAgICAgaWYgKCFjb21wb25lbnRCbG9jaykgcmV0dXJuIG5vZGU7XG4gICAgICBjb25zdCBzY2hlbWEgPSBvYmplY3QoY29tcG9uZW50QmxvY2suc2NoZW1hKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm5vZGUsXG4gICAgICAgIHByb3BzOiBkZXNlcmlhbGl6ZVByb3BzKHNjaGVtYSwgbm9kZS5wcm9wcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50eXBlID09PSAnaW1hZ2UnICYmIHR5cGVvZiBub2RlLnNyYyA9PT0gJ3N0cmluZycgJiYgbW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIGNvbnN0IHByZWZpeCA9IGdldFNyY1ByZWZpeEZvckltYWdlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgc2x1Zyk7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IG5vZGUuc3JjLnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgICAgY29uc3QgY29udGVudCA9IChfcmVmID0gdHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IG90aGVyRmlsZXMuZ2V0KGZpeFBhdGgoZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5KSkgOiBmaWxlcykgPT09IG51bGwgfHwgX3JlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZi5nZXQoZmlsZW5hbWUpO1xuICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiBgTWlzc2luZyBpbWFnZSAke2ZpbGVuYW1lfWBcbiAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgc3JjOiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudFxuICAgICAgICB9LFxuICAgICAgICBhbHQ6IG5vZGUuYWx0LFxuICAgICAgICB0aXRsZTogbm9kZS50aXRsZSxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygbm9kZS50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBkZXNlcmlhbGl6ZUZpbGVzKG5vZGUuY2hpbGRyZW4sIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvcHMoc2NoZW1hLCB2YWx1ZSwgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybVByb3BzKHNjaGVtYSwgdmFsdWUsIHtcbiAgICBmb3JtOiAoc2NoZW1hLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0Jykge1xuICAgICAgICB2YXIgX290aGVyRmlsZXMkZ2V0O1xuICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHNjaGVtYS5yZWFkZXIucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2NoZW1hLmZpbGVuYW1lKHZhbHVlLCB7XG4gICAgICAgICAgc2x1ZyxcbiAgICAgICAgICBzdWdnZXN0ZWRGaWxlbmFtZVByZWZpeDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2NoZW1hLnBhcnNlKHZhbHVlLCB7XG4gICAgICAgICAgYXNzZXQ6IGZpbGVuYW1lID8gc2NoZW1hLmRpcmVjdG9yeSA/IChfb3RoZXJGaWxlcyRnZXQgPSBvdGhlckZpbGVzLmdldChzY2hlbWEuZGlyZWN0b3J5KSkgPT09IG51bGwgfHwgX290aGVyRmlsZXMkZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3RoZXJGaWxlcyRnZXQuZ2V0KGZpbGVuYW1lKSA6IGZpbGVzLmdldChmaWxlbmFtZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgc2x1Z1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50JyB8fCBzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldHMnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAobW9kZSA9PT0gJ3JlYWQnKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEucmVhZGVyLnBhcnNlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHVuZGVmaW5lZCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFNyY1ByZWZpeEZvckltYWdlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgc2x1Zykge1xuICByZXR1cm4gZ2V0U3JjUHJlZml4KHR5cGVvZiBkb2N1bWVudEZlYXR1cmVzLmltYWdlcyA9PT0gJ29iamVjdCcgPyBkb2N1bWVudEZlYXR1cmVzLmltYWdlcy5wdWJsaWNQYXRoIDogdW5kZWZpbmVkLCBzbHVnKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2hhMShjb250ZW50KSB7XG4gIHJldHVybiBjcmVhdGVIYXNoKCdzaGExJykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG59XG5cbmNvbnN0IHRleHRFbmNvZGVyJDEgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmNvbnN0IGJsb2JTaGFDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5hc3luYyBmdW5jdGlvbiBibG9iU2hhKGNvbnRlbnRzKSB7XG4gIGNvbnN0IGNhY2hlZCA9IGJsb2JTaGFDYWNoZS5nZXQoY29udGVudHMpO1xuICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHJldHVybiBjYWNoZWQ7XG4gIGNvbnN0IGJsb2JQcmVmaXggPSB0ZXh0RW5jb2RlciQxLmVuY29kZSgnYmxvYiAnICsgY29udGVudHMubGVuZ3RoICsgJ1xcMCcpO1xuICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJsb2JQcmVmaXguYnl0ZUxlbmd0aCArIGNvbnRlbnRzLmJ5dGVMZW5ndGgpO1xuICBhcnJheS5zZXQoYmxvYlByZWZpeCwgMCk7XG4gIGFycmF5LnNldChjb250ZW50cywgYmxvYlByZWZpeC5ieXRlTGVuZ3RoKTtcbiAgY29uc3QgZGlnZXN0UHJvbWlzZSA9IHNoYTEoYXJyYXkpO1xuICBibG9iU2hhQ2FjaGUuc2V0KGNvbnRlbnRzLCBkaWdlc3RQcm9taXNlKTtcbiAgZGlnZXN0UHJvbWlzZS50aGVuKGRpZ2VzdCA9PiBibG9iU2hhQ2FjaGUuc2V0KGNvbnRlbnRzLCBkaWdlc3QpKTtcbiAgcmV0dXJuIGRpZ2VzdFByb21pc2U7XG59XG5mdW5jdGlvbiBnZXRUcmVlTm9kZUF0UGF0aChyb290LCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuICBsZXQgbm9kZSA9IHJvb3QuZ2V0KHBhcnRzWzBdKTtcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzLnNsaWNlKDEpKSB7XG4gICAgaWYgKCFub2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICghbm9kZS5jaGlsZHJlbikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBub2RlID0gbm9kZS5jaGlsZHJlbi5nZXQocGFydCk7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5mdW5jdGlvbiBnZXROb2RlQXRQYXRoKHRyZWUsIHBhdGgpIHtcbiAgaWYgKHBhdGggPT09ICcnKSByZXR1cm4gdHJlZTtcbiAgbGV0IG5vZGUgPSB0cmVlO1xuICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aC5zcGxpdCgnLycpKSB7XG4gICAgaWYgKCFub2RlLmhhcyhwYXJ0KSkge1xuICAgICAgbm9kZS5zZXQocGFydCwgbmV3IE1hcCgpKTtcbiAgICB9XG4gICAgY29uc3QgaW5uZXJOb2RlID0gbm9kZS5nZXQocGFydCk7XG4gICAgYXNzZXJ0KGlubmVyTm9kZSBpbnN0YW5jZW9mIE1hcCwgJ2V4cGVjdGVkIHRyZWUnKTtcbiAgICBub2RlID0gaW5uZXJOb2RlO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0RmlsZW5hbWUocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC8uKlxcLy8sICcnKTtcbn1cbmZ1bmN0aW9uIGdldERpcm5hbWUocGF0aCkge1xuICBpZiAoIXBhdGguaW5jbHVkZXMoJy8nKSkgcmV0dXJuICcnO1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9bXi9dKyQvLCAnJyk7XG59XG5mdW5jdGlvbiB0b1RyZWVDaGFuZ2VzKGNoYW5nZXMpIHtcbiAgY29uc3QgY2hhbmdlc1Jvb3QgPSBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3QgZGVsZXRpb24gb2YgY2hhbmdlcy5kZWxldGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShkZWxldGlvbikpO1xuICAgIHBhcmVudFRyZWUuc2V0KGdldEZpbGVuYW1lKGRlbGV0aW9uKSwgJ2RlbGV0ZScpO1xuICB9XG4gIGZvciAoY29uc3QgYWRkaXRpb24gb2YgY2hhbmdlcy5hZGRpdGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShhZGRpdGlvbi5wYXRoKSk7XG4gICAgcGFyZW50VHJlZS5zZXQoZ2V0RmlsZW5hbWUoYWRkaXRpb24ucGF0aCksIGFkZGl0aW9uLmNvbnRlbnRzKTtcbiAgfVxuICByZXR1cm4gY2hhbmdlc1Jvb3Q7XG59XG5jb25zdCBTUEFDRV9DSEFSX0NPREUgPSAzMjtcbmNvbnN0IHNwYWNlID0gbmV3IFVpbnQ4QXJyYXkoW1NQQUNFX0NIQVJfQ09ERV0pO1xuY29uc3QgbnVsbGNoYXIgPSBuZXcgVWludDhBcnJheShbMF0pO1xuY29uc3QgdHJlZSA9IHRleHRFbmNvZGVyJDEuZW5jb2RlKCd0cmVlICcpO1xuXG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaXNvbW9ycGhpYy1naXQvaXNvbW9ycGhpYy1naXQvYmxvYi9jMDlkZmEyMGZmZTBhYjllNjYwMmUwZmExNzJkNzJiYTg5OTRlNDQzL3NyYy9tb2RlbHMvR2l0VHJlZS5qcyNMMTA4LUwxMjJcbmZ1bmN0aW9uIHRyZWVTaGEoY2hpbGRyZW4pIHtcbiAgY29uc3QgZW50cmllcyA9IFsuLi5jaGlsZHJlbl0ubWFwKChbbmFtZSwgbm9kZV0pID0+ICh7XG4gICAgbmFtZSxcbiAgICBzaGE6IG5vZGUuZW50cnkuc2hhLFxuICAgIG1vZGU6IG5vZGUuZW50cnkubW9kZVxuICB9KSk7XG4gIGVudHJpZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFOYW1lID0gYS5tb2RlID09PSAnMDQwMDAwJyA/IGEubmFtZSArICcvJyA6IGEubmFtZTtcbiAgICBjb25zdCBiTmFtZSA9IGIubW9kZSA9PT0gJzA0MDAwMCcgPyBiLm5hbWUgKyAnLycgOiBiLm5hbWU7XG4gICAgcmV0dXJuIGFOYW1lID09PSBiTmFtZSA/IDAgOiBhTmFtZSA8IGJOYW1lID8gLTEgOiAxO1xuICB9KTtcbiAgY29uc3QgdHJlZU9iamVjdCA9IGVudHJpZXMuZmxhdE1hcChlbnRyeSA9PiB7XG4gICAgY29uc3QgbW9kZSA9IHRleHRFbmNvZGVyJDEuZW5jb2RlKGVudHJ5Lm1vZGUucmVwbGFjZSgvXjAvLCAnJykpO1xuICAgIGNvbnN0IG5hbWUgPSB0ZXh0RW5jb2RlciQxLmVuY29kZShlbnRyeS5uYW1lKTtcbiAgICBjb25zdCBzaGEgPSBoZXhUb0J5dGVzKGVudHJ5LnNoYSk7XG4gICAgcmV0dXJuIFttb2RlLCBzcGFjZSwgbmFtZSwgbnVsbGNoYXIsIHNoYV07XG4gIH0pO1xuICByZXR1cm4gc2hhMShjb25jYXRCeXRlcyhbdHJlZSwgdGV4dEVuY29kZXIkMS5lbmNvZGUodHJlZU9iamVjdC5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwuYnl0ZUxlbmd0aCwgMCkudG9TdHJpbmcoKSksIG51bGxjaGFyLCAuLi50cmVlT2JqZWN0XSkpO1xufVxuZnVuY3Rpb24gY29uY2F0Qnl0ZXMoYnl0ZUFycmF5cykge1xuICBjb25zdCB0b3RhbExlbmd0aCA9IGJ5dGVBcnJheXMucmVkdWNlKChzdW0sIGFycikgPT4gc3VtICsgYXJyLmJ5dGVMZW5ndGgsIDApO1xuICBjb25zdCByZXN1bHQgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBmb3IgKGNvbnN0IGFyciBvZiBieXRlQXJyYXlzKSB7XG4gICAgcmVzdWx0LnNldChhcnIsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IGFyci5ieXRlTGVuZ3RoO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBoZXhUb0J5dGVzKHN0cikge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KHN0ci5sZW5ndGggLyAyKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5ieXRlTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBzdGFydCA9IGkgKiAyO1xuICAgIGJ5dGVzW2ldID0gcGFyc2VJbnQoc3RyLnNsaWNlKHN0YXJ0LCBzdGFydCArIDIpLCAxNik7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHJlZU5vZGVFbnRyeShwYXRoLCBjaGlsZHJlbikge1xuICBjb25zdCBzaGEgPSBhd2FpdCB0cmVlU2hhKGNoaWxkcmVuKTtcbiAgcmV0dXJuIHtcbiAgICBwYXRoLFxuICAgIG1vZGU6ICcwNDAwMDAnLFxuICAgIHR5cGU6ICd0cmVlJyxcbiAgICBzaGFcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJsb2JOb2RlRW50cnkocGF0aCwgY29udGVudHMpIHtcbiAgY29uc3Qgc2hhID0gJ3NoYScgaW4gY29udGVudHMgPyBjb250ZW50cy5zaGEgOiBhd2FpdCBibG9iU2hhKGNvbnRlbnRzKTtcbiAgcmV0dXJuIHtcbiAgICBwYXRoLFxuICAgIG1vZGU6ICcxMDA2NDQnLFxuICAgIHR5cGU6ICdibG9iJyxcbiAgICBzaGFcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyh0cmVlLCBjaGFuZ2VzKSB7XG4gIHZhciBfYXdhaXQkdXBkYXRlVHJlZTtcbiAgY29uc3QgbmV3VHJlZSA9IChfYXdhaXQkdXBkYXRlVHJlZSA9IGF3YWl0IHVwZGF0ZVRyZWUodHJlZSwgdG9UcmVlQ2hhbmdlcyhjaGFuZ2VzKSwgW10pKSAhPT0gbnVsbCAmJiBfYXdhaXQkdXBkYXRlVHJlZSAhPT0gdm9pZCAwID8gX2F3YWl0JHVwZGF0ZVRyZWUgOiBuZXcgTWFwKCk7XG4gIHJldHVybiB7XG4gICAgZW50cmllczogdHJlZVRvRW50cmllcyhuZXdUcmVlKSxcbiAgICBzaGE6IGF3YWl0IHRyZWVTaGEobmV3VHJlZSAhPT0gbnVsbCAmJiBuZXdUcmVlICE9PSB2b2lkIDAgPyBuZXdUcmVlIDogbmV3IE1hcCgpKVxuICB9O1xufVxuZnVuY3Rpb24gdHJlZVRvRW50cmllcyh0cmVlKSB7XG4gIHJldHVybiBbLi4udHJlZS52YWx1ZXMoKV0uZmxhdE1hcCh4ID0+IHguY2hpbGRyZW4gPyBbeC5lbnRyeSwgLi4udHJlZVRvRW50cmllcyh4LmNoaWxkcmVuKV0gOiBbeC5lbnRyeV0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVHJlZSh0cmVlLCBjaGFuZ2VkVHJlZSwgcGF0aCkge1xuICBjb25zdCBuZXdUcmVlID0gbmV3IE1hcCh0cmVlKTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgY2hhbmdlZFRyZWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgIHZhciBfbmV3VHJlZSRnZXQkY2hpbGRyZW4sIF9uZXdUcmVlJGdldDtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ2hpbGRyZW4gPSAoX25ld1RyZWUkZ2V0JGNoaWxkcmVuID0gKF9uZXdUcmVlJGdldCA9IG5ld1RyZWUuZ2V0KGtleSkpID09PSBudWxsIHx8IF9uZXdUcmVlJGdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25ld1RyZWUkZ2V0LmNoaWxkcmVuKSAhPT0gbnVsbCAmJiBfbmV3VHJlZSRnZXQkY2hpbGRyZW4gIT09IHZvaWQgMCA/IF9uZXdUcmVlJGdldCRjaGlsZHJlbiA6IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gYXdhaXQgdXBkYXRlVHJlZShleGlzdGluZ0NoaWxkcmVuLCB2YWx1ZSwgcGF0aC5jb25jYXQoa2V5KSk7XG4gICAgICBpZiAoY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgY3JlYXRlVHJlZU5vZGVFbnRyeShwYXRoLmNvbmNhdChrZXkpLmpvaW4oJy8nKSwgY2hpbGRyZW4pO1xuICAgICAgbmV3VHJlZS5zZXQoa2V5LCB7XG4gICAgICAgIGVudHJ5LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnc2hhJyBpbiB2YWx1ZSkge1xuICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCBjcmVhdGVCbG9iTm9kZUVudHJ5KHBhdGguY29uY2F0KGtleSkuam9pbignLycpLCB2YWx1ZSk7XG4gICAgICBuZXdUcmVlLnNldChrZXksIHtcbiAgICAgICAgZW50cnlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAobmV3VHJlZS5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gbmV3VHJlZTtcbn1cbmZ1bmN0aW9uIHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMoZW50cmllcykge1xuICBjb25zdCByb290ID0gbmV3IE1hcCgpO1xuICBjb25zdCBnZXRDaGlsZHJlbkF0UGF0aCA9IHBhcnRzID0+IHtcbiAgICB2YXIgX25vZGU7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICAgIGxldCBub2RlID0gcm9vdC5nZXQocGFydHNbMF0pO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5zbGljZSgxKSkge1xuICAgICAgaWYgKCFub2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW4uZ2V0KHBhcnQpO1xuICAgIH1cbiAgICByZXR1cm4gKF9ub2RlID0gbm9kZSkgPT09IG51bGwgfHwgX25vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlLmNoaWxkcmVuO1xuICB9O1xuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBzcGxpdCA9IGVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdldENoaWxkcmVuQXRQYXRoKHNwbGl0LnNsaWNlKDAsIC0xKSk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBjaGlsZHJlbi5zZXQoc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0sIHtcbiAgICAgICAgZW50cnksXG4gICAgICAgIGNoaWxkcmVuOiBlbnRyeS50eXBlID09PSAndHJlZScgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpIHtcbiAgaWYgKHNlZW5TY2hlbWFzLmhhcyhzY2hlbWEpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlZW5TY2hlbWFzLmFkZChzY2hlbWEpO1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICByZXR1cm4gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLmVsZW1lbnQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nKSB7XG4gICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0JyAmJiBzY2hlbWEuZGlyZWN0b3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKHNjaGVtYS5kaXJlY3RvcnkpKTtcbiAgICB9XG4gICAgaWYgKChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50JyB8fCBzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldHMnKSAmJiBzY2hlbWEuZGlyZWN0b3JpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBkaXJlY3Rvcnkgb2Ygc2NoZW1hLmRpcmVjdG9yaWVzKSB7XG4gICAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKGRpcmVjdG9yeSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoZmllbGQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBmb3IgKGNvbnN0IGlubmVyU2NoZW1hIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLnZhbHVlcykpIHtcbiAgICAgIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKGlubmVyU2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgYXNzZXJ0TmV2ZXIkMShzY2hlbWEpO1xufVxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKHNjaGVtYSkge1xuICBjb25zdCBkaXJlY3RvcmllcyA9IG5ldyBTZXQoKTtcbiAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3RvcmllcywgbmV3IFNldCgpKTtcbiAgcmV0dXJuIGRpcmVjdG9yaWVzO1xufVxuZnVuY3Rpb24gZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KHNjaGVtYSwgZGlyZWN0b3J5LCBzbHVnLCBmb3JtYXQpIHtcbiAgY29uc3QgZGlyZWN0b3JpZXMgPSBbZml4UGF0aChkaXJlY3RvcnkpXTtcbiAgaWYgKGZvcm1hdC5kYXRhTG9jYXRpb24gPT09ICdvdXRlcicpIHtcbiAgICBkaXJlY3Rvcmllcy5wdXNoKGZpeFBhdGgoZGlyZWN0b3J5KSArIGdldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdCkpO1xuICB9XG4gIGNvbnN0IHRvQWRkID0gc2x1ZyA9PT0gdW5kZWZpbmVkID8gJycgOiBgLyR7c2x1Z31gO1xuICBmb3IgKGNvbnN0IGRpcmVjdG9yeSBvZiBjb2xsZWN0RGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEoc2NoZW1hKSkge1xuICAgIGRpcmVjdG9yaWVzLnB1c2goZGlyZWN0b3J5ICsgdG9BZGQpO1xuICB9XG4gIHJldHVybiBkaXJlY3Rvcmllcztcbn1cblxuY29uc3QgdGV4dERlY29kZXIkMSA9IG5ldyBUZXh0RGVjb2RlcigpO1xuY29uc3QgZGVmYXVsdEFsdEZpZWxkJDEgPSB0ZXh0KHtcbiAgbGFiZWw6ICdBbHQgdGV4dCcsXG4gIGRlc2NyaXB0aW9uOiAnVGhpcyB0ZXh0IHdpbGwgYmUgdXNlZCBieSBzY3JlZW4gcmVhZGVycyBhbmQgc2VhcmNoIGVuZ2luZXMuJ1xufSk7XG5jb25zdCBlbXB0eVRpdGxlRmllbGQkMSA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgSW5wdXQoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0sXG4gIHBhcnNlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWVcbiAgICB9O1xuICB9LFxuICBsYWJlbDogJ1RpdGxlJ1xufSk7XG5mdW5jdGlvbiBub3JtYWxpc2VEb2N1bWVudEZlYXR1cmVzKGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRmb3JtYXR0aW5nLCBfZm9ybWF0dGluZyRhbGlnbm1lbnQsIF9mb3JtYXR0aW5nJGFsaWdubWVudDIsIF9mb3JtYXR0aW5nJGJsb2NrVHlwZSwgX2Zvcm1hdHRpbmckaW5saW5lTWFyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIzLCBfZm9ybWF0dGluZyRpbmxpbmVNYXI0LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LCBfZm9ybWF0dGluZyRsaXN0VHlwZXMsIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIsIF9pbWFnZXNDb25maWckc2NoZW1hJCwgX2ltYWdlc0NvbmZpZyRzY2hlbWEsIF9pbWFnZXNDb25maWckc2NoZW1hJDIsIF9pbWFnZXNDb25maWckc2NoZW1hMjtcbiAgY29uc3QgZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nID09PSB0cnVlID8ge1xuICAgIC8vIGFsaWdubWVudDogdHJ1ZSwgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgIGJsb2NrVHlwZXM6IHRydWUsXG4gICAgaGVhZGluZ0xldmVsczogdHJ1ZSxcbiAgICBpbmxpbmVNYXJrczogdHJ1ZSxcbiAgICBsaXN0VHlwZXM6IHRydWUsXG4gICAgc29mdEJyZWFrczogdHJ1ZVxuICB9IDogKF9jb25maWckZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nKSAhPT0gbnVsbCAmJiBfY29uZmlnJGZvcm1hdHRpbmcgIT09IHZvaWQgMCA/IF9jb25maWckZm9ybWF0dGluZyA6IHt9O1xuICBjb25zdCBpbWFnZXNDb25maWcgPSBjb25maWcuaW1hZ2VzID09PSB0cnVlID8ge30gOiBjb25maWcuaW1hZ2VzO1xuICByZXR1cm4ge1xuICAgIGZvcm1hdHRpbmc6IHtcbiAgICAgIGFsaWdubWVudDogZm9ybWF0dGluZy5hbGlnbm1lbnQgPT09IHRydWUgPyB7XG4gICAgICAgIGNlbnRlcjogdHJ1ZSxcbiAgICAgICAgZW5kOiB0cnVlXG4gICAgICB9IDoge1xuICAgICAgICBjZW50ZXI6ICEhKChfZm9ybWF0dGluZyRhbGlnbm1lbnQgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50LmNlbnRlciksXG4gICAgICAgIGVuZDogISEoKF9mb3JtYXR0aW5nJGFsaWdubWVudDIgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50MiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGFsaWdubWVudDIuZW5kKVxuICAgICAgfSxcbiAgICAgIGJsb2NrVHlwZXM6IChmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IHRydWUgPyB7XG4gICAgICAgIGJsb2NrcXVvdGU6IHRydWUsXG4gICAgICAgIGNvZGU6IHtcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgfVxuICAgICAgfSA6IHtcbiAgICAgICAgYmxvY2txdW90ZTogISEoKF9mb3JtYXR0aW5nJGJsb2NrVHlwZSA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlLmJsb2NrcXVvdGUpLFxuICAgICAgICBjb2RlOiAoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PiB7XG4gICAgICAgICAgaWYgKCgoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IG51bGwgfHwgX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Zvcm1hdHRpbmckYmxvY2tUeXBlMi5jb2RlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSA9PT0gdHJ1ZSB8fCAhZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUuc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsndHlwZScsICdjaGlsZHJlbicsICdsYW5ndWFnZSddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIGZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgY2Fubm90IGJlIGEga2V5IGluIHRoZSBzY2hlbWEgZm9yIGNvZGUgYmxvY2tzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IG9iamVjdChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZS5zY2hlbWEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoKVxuICAgICAgfSxcbiAgICAgIGhlYWRpbmdzOiAoX29iaiRzY2hlbWEgPT4ge1xuICAgICAgICBjb25zdCBvcHQgPSBmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuaGVhZGluZ0xldmVscztcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIG9wdCA9PT0gJ29iamVjdCcgJiYgJ2xldmVscycgaW4gb3B0ID8gb3B0IDoge1xuICAgICAgICAgIGxldmVsczogb3B0LFxuICAgICAgICAgIHNjaGVtYTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvYmouc2NoZW1hKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWyd0eXBlJywgJ2NoaWxkcmVuJywgJ2xldmVsJywgJ3RleHRBbGlnbiddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIG9iai5zY2hlbWEpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7a2V5fVwiIGNhbm5vdCBiZSBhIGtleSBpbiB0aGUgc2NoZW1hIGZvciBoZWFkaW5nc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxldmVsczogWy4uLm5ldyBTZXQob2JqLmxldmVscyA9PT0gdHJ1ZSA/IFsxLCAyLCAzLCA0LCA1LCA2XSA6IG9iai5sZXZlbHMpXSxcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCgoX29iaiRzY2hlbWEgPSBvYmouc2NoZW1hKSAhPT0gbnVsbCAmJiBfb2JqJHNjaGVtYSAhPT0gdm9pZCAwID8gX29iaiRzY2hlbWEgOiB7fSlcbiAgICAgICAgfTtcbiAgICAgIH0pKCksXG4gICAgICBpbmxpbmVNYXJrczogZm9ybWF0dGluZy5pbmxpbmVNYXJrcyA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgY29kZTogdHJ1ZSxcbiAgICAgICAgaXRhbGljOiB0cnVlLFxuICAgICAgICBrZXlib2FyZDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgc3RyaWtldGhyb3VnaDogdHJ1ZSxcbiAgICAgICAgc3Vic2NyaXB0OiBmYWxzZSxcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgICAgICBzdXBlcnNjcmlwdDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSAvLyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5IGluIG1hcmtkb3duXG4gICAgICB9IDoge1xuICAgICAgICBib2xkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyLmJvbGQpLFxuICAgICAgICBjb2RlOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyMiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjIgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLmNvZGUpLFxuICAgICAgICBpdGFsaWM6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXIzID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyMyAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjMuaXRhbGljKSxcbiAgICAgICAgc3RyaWtldGhyb3VnaDogISEoKF9mb3JtYXR0aW5nJGlubGluZU1hcjQgPSBmb3JtYXR0aW5nLmlubGluZU1hcmtzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI0ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNC5zdHJpa2V0aHJvdWdoKSxcbiAgICAgICAgdW5kZXJsaW5lOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNSA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjUgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LnVuZGVybGluZSksXG4gICAgICAgIGtleWJvYXJkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjYgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LmtleWJvYXJkKSxcbiAgICAgICAgc3Vic2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNyA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjcgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LnN1YnNjcmlwdCksXG4gICAgICAgIHN1cGVyc2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyOCA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjggIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LnN1cGVyc2NyaXB0KVxuICAgICAgfSxcbiAgICAgIGxpc3RUeXBlczogZm9ybWF0dGluZy5saXN0VHlwZXMgPT09IHRydWUgPyB7XG4gICAgICAgIG9yZGVyZWQ6IHRydWUsXG4gICAgICAgIHVub3JkZXJlZDogdHJ1ZVxuICAgICAgfSA6IHtcbiAgICAgICAgb3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlcyA9IGZvcm1hdHRpbmcubGlzdFR5cGVzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMub3JkZXJlZCksXG4gICAgICAgIHVub3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlczIgPSBmb3JtYXR0aW5nLmxpc3RUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckbGlzdFR5cGVzMiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIudW5vcmRlcmVkKVxuICAgICAgfSxcbiAgICAgIHNvZnRCcmVha3M6ICEhZm9ybWF0dGluZy5zb2Z0QnJlYWtzXG4gICAgfSxcbiAgICBsaW5rczogISFjb25maWcubGlua3MsXG4gICAgbGF5b3V0czogWy4uLm5ldyBTZXQoKGNvbmZpZy5sYXlvdXRzIHx8IFtdKS5tYXAoeCA9PiBKU09OLnN0cmluZ2lmeSh4KSkpXS5tYXAoeCA9PiBKU09OLnBhcnNlKHgpKSxcbiAgICBkaXZpZGVyczogISFjb25maWcuZGl2aWRlcnMsXG4gICAgaW1hZ2VzOiBpbWFnZXNDb25maWcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDoge1xuICAgICAgLi4uaW1hZ2VzQ29uZmlnLFxuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIGFsdDogKF9pbWFnZXNDb25maWckc2NoZW1hJCA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYSA9IGltYWdlc0NvbmZpZy5zY2hlbWEpID09PSBudWxsIHx8IF9pbWFnZXNDb25maWckc2NoZW1hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW1hZ2VzQ29uZmlnJHNjaGVtYS5hbHQpICE9PSBudWxsICYmIF9pbWFnZXNDb25maWckc2NoZW1hJCAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkIDogZGVmYXVsdEFsdEZpZWxkJDEsXG4gICAgICAgIHRpdGxlOiAoX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPSBpbWFnZXNDb25maWcuc2NoZW1hKSA9PT0gbnVsbCB8fCBfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbWFnZXNDb25maWckc2NoZW1hMi50aXRsZSkgIT09IG51bGwgJiYgX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA6IGVtcHR5VGl0bGVGaWVsZCQxXG4gICAgICB9XG4gICAgfSxcbiAgICB0YWJsZXM6ICEhY29uZmlnLnRhYmxlc1xuICB9O1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIGBmaWVsZHMubWFya2RvY2AgaGFzIHN1cGVyc2VkZWQgdGhpcyBmaWVsZC4gYGZpZWxkcy5tZHhgIGlzIGFsc28gYXZhaWxhYmxlIGlmIHlvdSBwcmVmZXIgTURYLlxuICovXG5mdW5jdGlvbiBkb2N1bWVudCh7XG4gIGxhYmVsLFxuICBjb21wb25lbnRCbG9ja3MgPSB7fSxcbiAgZGVzY3JpcHRpb24sXG4gIC4uLmRvY3VtZW50RmVhdHVyZXNDb25maWdcbn0pIHtcbiAgY29uc3QgZG9jdW1lbnRGZWF0dXJlcyA9IG5vcm1hbGlzZURvY3VtZW50RmVhdHVyZXMoZG9jdW1lbnRGZWF0dXJlc0NvbmZpZyk7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfV07XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGNvbXBvbmVudEJsb2NrczogY29tcG9uZW50QmxvY2tzLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZG9jdW1lbnRGZWF0dXJlczogZG9jdW1lbnRGZWF0dXJlcyxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcGFyc2UoXywgZGF0YSkge1xuICAgICAgY29uc3QgbWFya2RvYyA9IHRleHREZWNvZGVyJDEuZGVjb2RlKGRhdGEuY29udGVudCk7XG4gICAgICBmcm9tTWFya2RvYyhwYXJzZShtYXJrZG9jKSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZUZpbGVzKG5vcm1hbGl6ZURvY3VtZW50RmllbGRDaGlsZHJlbigpLCBjb21wb25lbnRCbG9ja3MsIGRhdGEub3RoZXIsIGRhdGEuZXh0ZXJuYWwsICdlZGl0JywgZG9jdW1lbnRGZWF0dXJlcywgZGF0YS5zbHVnKTtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246ICcubWRvYycsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGRpcmVjdG9yaWVzOiBbLi4uY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKG9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY29tcG9uZW50QmxvY2tzKS5tYXAoKFtuYW1lLCBibG9ja10pID0+IFtuYW1lLCBvYmplY3QoYmxvY2suc2NoZW1hKV0pKSkpLCAuLi4odHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IFtmaXhQYXRoKGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSldIDogW10pXSxcbiAgICBzZXJpYWxpemUodmFsdWUsIG9wdHMpIHtcbiAgICAgIHJldHVybiBzZXJpYWxpemVNYXJrZG9jKCk7XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IG1hcmtkb2MgPSB0ZXh0RGVjb2RlciQxLmRlY29kZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IGZyb21NYXJrZG9jKHBhcnNlKG1hcmtkb2MpLCBjb21wb25lbnRCbG9ja3MpO1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVGaWxlcyhkb2N1bWVudCwgY29tcG9uZW50QmxvY2tzLCBuZXcgTWFwKCksIG5ldyBNYXAoKSwgJ3JlYWQnLCBkb2N1bWVudEZlYXR1cmVzLCB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuY29uc3QgZGVmYXVsdEFsdEZpZWxkID0gdGV4dCh7XG4gIGxhYmVsOiAnQWx0IHRleHQnLFxuICBkZXNjcmlwdGlvbjogJ1RoaXMgdGV4dCB3aWxsIGJlIHVzZWQgYnkgc2NyZWVuIHJlYWRlcnMgYW5kIHNlYXJjaCBlbmdpbmVzLidcbn0pO1xuY29uc3QgZW1wdHlUaXRsZUZpZWxkID0gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICBJbnB1dCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgZGVmYXVsdFZhbHVlKCkge1xuICAgIHJldHVybiAnJztcbiAgfSxcbiAgcGFyc2UodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH0sXG4gIGxhYmVsOiAnVGl0bGUnXG59KTtcbmZ1bmN0aW9uIGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRib2xkLCBfb3B0aW9ucyRpdGFsaWMsIF9vcHRpb25zJHN0cmlrZXRocm91ZywgX29wdGlvbnMkY29kZSwgX29wdGlvbnMkYmxvY2txdW90ZSwgX29wdGlvbnMkb3JkZXJlZExpc3QsIF9vcHRpb25zJHVub3JkZXJlZExpcywgX29wdGlvbnMkdGFibGUsIF9vcHRpb25zJGxpbmssIF9vcHRpb25zJGRpdmlkZXI7XG4gIHJldHVybiB7XG4gICAgYm9sZDogKF9vcHRpb25zJGJvbGQgPSBvcHRpb25zLmJvbGQpICE9PSBudWxsICYmIF9vcHRpb25zJGJvbGQgIT09IHZvaWQgMCA/IF9vcHRpb25zJGJvbGQgOiB0cnVlLFxuICAgIGl0YWxpYzogKF9vcHRpb25zJGl0YWxpYyA9IG9wdGlvbnMuaXRhbGljKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRpdGFsaWMgIT09IHZvaWQgMCA/IF9vcHRpb25zJGl0YWxpYyA6IHRydWUsXG4gICAgc3RyaWtldGhyb3VnaDogKF9vcHRpb25zJHN0cmlrZXRocm91ZyA9IG9wdGlvbnMuc3RyaWtldGhyb3VnaCkgIT09IG51bGwgJiYgX29wdGlvbnMkc3RyaWtldGhyb3VnICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRzdHJpa2V0aHJvdWcgOiB0cnVlLFxuICAgIGNvZGU6IChfb3B0aW9ucyRjb2RlID0gb3B0aW9ucy5jb2RlKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRjb2RlICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRjb2RlIDogdHJ1ZSxcbiAgICBoZWFkaW5nOiAoKCkgPT4ge1xuICAgICAgbGV0IGxldmVscyA9IFtdO1xuICAgICAgbGV0IGxldmVsc09wdCA9IHR5cGVvZiBvcHRpb25zLmhlYWRpbmcgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMuaGVhZGluZykgPyBvcHRpb25zLmhlYWRpbmcubGV2ZWxzIDogb3B0aW9ucy5oZWFkaW5nO1xuICAgICAgaWYgKGxldmVsc09wdCA9PT0gdHJ1ZSB8fCBsZXZlbHNPcHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXZlbHMgPSBbMSwgMiwgMywgNCwgNSwgNl07XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsZXZlbHNPcHQpKSB7XG4gICAgICAgIGxldmVscyA9IGxldmVsc09wdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxldmVscyxcbiAgICAgICAgc2NoZW1hOiBvcHRpb25zLmhlYWRpbmcgJiYgdHlwZW9mIG9wdGlvbnMuaGVhZGluZyA9PT0gJ29iamVjdCcgJiYgJ3NjaGVtYScgaW4gb3B0aW9ucy5oZWFkaW5nID8gb3B0aW9ucy5oZWFkaW5nLnNjaGVtYSA6IHt9XG4gICAgICB9O1xuICAgIH0pKCksXG4gICAgYmxvY2txdW90ZTogKF9vcHRpb25zJGJsb2NrcXVvdGUgPSBvcHRpb25zLmJsb2NrcXVvdGUpICE9PSBudWxsICYmIF9vcHRpb25zJGJsb2NrcXVvdGUgIT09IHZvaWQgMCA/IF9vcHRpb25zJGJsb2NrcXVvdGUgOiB0cnVlLFxuICAgIG9yZGVyZWRMaXN0OiAoX29wdGlvbnMkb3JkZXJlZExpc3QgPSBvcHRpb25zLm9yZGVyZWRMaXN0KSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRvcmRlcmVkTGlzdCAhPT0gdm9pZCAwID8gX29wdGlvbnMkb3JkZXJlZExpc3QgOiB0cnVlLFxuICAgIHVub3JkZXJlZExpc3Q6IChfb3B0aW9ucyR1bm9yZGVyZWRMaXMgPSBvcHRpb25zLnVub3JkZXJlZExpc3QpICE9PSBudWxsICYmIF9vcHRpb25zJHVub3JkZXJlZExpcyAhPT0gdm9pZCAwID8gX29wdGlvbnMkdW5vcmRlcmVkTGlzIDogdHJ1ZSxcbiAgICB0YWJsZTogKF9vcHRpb25zJHRhYmxlID0gb3B0aW9ucy50YWJsZSkgIT09IG51bGwgJiYgX29wdGlvbnMkdGFibGUgIT09IHZvaWQgMCA/IF9vcHRpb25zJHRhYmxlIDogdHJ1ZSxcbiAgICBsaW5rOiAoX29wdGlvbnMkbGluayA9IG9wdGlvbnMubGluaykgIT09IG51bGwgJiYgX29wdGlvbnMkbGluayAhPT0gdm9pZCAwID8gX29wdGlvbnMkbGluayA6IHRydWUsXG4gICAgaW1hZ2U6IG9wdGlvbnMuaW1hZ2UgIT09IGZhbHNlID8gKChfb3B0cyR0cmFuc2Zvcm1GaWxlbmEsIF9vcHRzJHNjaGVtYSRhbHQsIF9vcHRzJHNjaGVtYSwgX29wdHMkc2NoZW1hJHRpdGxlLCBfb3B0cyRzY2hlbWEyKSA9PiB7XG4gICAgICBjb25zdCBvcHRzID0gb3B0aW9ucy5pbWFnZSA9PT0gdHJ1ZSA/IHVuZGVmaW5lZCA6IG9wdGlvbnMuaW1hZ2U7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXJlY3Rvcnk6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5kaXJlY3RvcnksXG4gICAgICAgIHB1YmxpY1BhdGg6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5wdWJsaWNQYXRoLFxuICAgICAgICB0cmFuc2Zvcm1GaWxlbmFtZTogKF9vcHRzJHRyYW5zZm9ybUZpbGVuYSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy50cmFuc2Zvcm1GaWxlbmFtZSkgIT09IG51bGwgJiYgX29wdHMkdHJhbnNmb3JtRmlsZW5hICE9PSB2b2lkIDAgPyBfb3B0cyR0cmFuc2Zvcm1GaWxlbmEgOiB4ID0+IHgsXG4gICAgICAgIHNjaGVtYToge1xuICAgICAgICAgIGFsdDogKF9vcHRzJHNjaGVtYSRhbHQgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCB8fCAoX29wdHMkc2NoZW1hID0gb3B0cy5zY2hlbWEpID09PSBudWxsIHx8IF9vcHRzJHNjaGVtYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdHMkc2NoZW1hLmFsdCkgIT09IG51bGwgJiYgX29wdHMkc2NoZW1hJGFsdCAhPT0gdm9pZCAwID8gX29wdHMkc2NoZW1hJGFsdCA6IGRlZmF1bHRBbHRGaWVsZCxcbiAgICAgICAgICB0aXRsZTogKF9vcHRzJHNjaGVtYSR0aXRsZSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwIHx8IChfb3B0cyRzY2hlbWEyID0gb3B0cy5zY2hlbWEpID09PSBudWxsIHx8IF9vcHRzJHNjaGVtYTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzJHNjaGVtYTIudGl0bGUpICE9PSBudWxsICYmIF9vcHRzJHNjaGVtYSR0aXRsZSAhPT0gdm9pZCAwID8gX29wdHMkc2NoZW1hJHRpdGxlIDogZW1wdHlUaXRsZUZpZWxkXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkoKSA6IHVuZGVmaW5lZCxcbiAgICBkaXZpZGVyOiAoX29wdGlvbnMkZGl2aWRlciA9IG9wdGlvbnMuZGl2aWRlcikgIT09IG51bGwgJiYgX29wdGlvbnMkZGl2aWRlciAhPT0gdm9pZCAwID8gX29wdGlvbnMkZGl2aWRlciA6IHRydWUsXG4gICAgY29kZUJsb2NrOiBvcHRpb25zLmNvZGVCbG9jayA9PT0gZmFsc2UgPyB1bmRlZmluZWQgOiB7XG4gICAgICBzY2hlbWE6IHR5cGVvZiBvcHRpb25zLmNvZGVCbG9jayA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmNvZGVCbG9jay5zY2hlbWEgOiB7fVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VHlwZUZvckZpZWxkKGZpZWxkKSB7XG4gIGlmIChmaWVsZC5raW5kID09PSAnb2JqZWN0JyB8fCBmaWVsZC5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQua2luZCA9PT0gJ2NoaWxkJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJyAmJiAnb3B0aW9ucycgaW4gZmllbGQgJiYgQXJyYXkuaXNBcnJheShmaWVsZC5vcHRpb25zKSAmJiBmaWVsZC5vcHRpb25zLmV2ZXJ5KHZhbCA9PiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwgIT09IG51bGwgJiYgJ3ZhbHVlJyBpbiB2YWwgJiYgdHlwZW9mIHZhbC52YWx1ZSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIG1hdGNoZXM6IGZpZWxkLm9wdGlvbnMubWFwKHggPT4geC52YWx1ZSksXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCByZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmllbGQucGFyc2UoJycpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWRcbiAgICAgIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBmaWVsZC5wYXJzZSgxKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IE51bWJlclxuICAgICAgfTtcbiAgICB9IGNhdGNoIHt9XG4gICAgaWYgKHR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09ICdzbHVnJykge1xuICAgIGxldCByZXF1aXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBmaWVsZC5wYXJzZSgnJywgdW5kZWZpbmVkKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09ICdhc3NldCcpIHtcbiAgICBsZXQgcmVxdWlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZmllbGQudmFsaWRhdGUobnVsbCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gZmllbGRzVG9NYXJrZG9jQXR0cmlidXRlcyhmaWVsZHMpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhmaWVsZHMpLm1hcCgoW25hbWUsIGZpZWxkXSkgPT4ge1xuICAgIGNvbnN0IHNjaGVtYSA9IGdldFR5cGVGb3JGaWVsZChmaWVsZCk7XG4gICAgcmV0dXJuIFtuYW1lLCBzY2hlbWFdO1xuICB9KSk7XG59XG5mdW5jdGlvbiBjcmVhdGVNYXJrZG9jQ29uZmlnKG9wdHMpIHtcbiAgY29uc3QgZWRpdG9yQ29uZmlnID0gZWRpdG9yT3B0aW9uc1RvQ29uZmlnKG9wdHMub3B0aW9ucyB8fCB7fSk7XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBub2Rlczoge1xuICAgICAgLi4ubm9kZXNcbiAgICB9LFxuICAgIHRhZ3M6IHt9XG4gIH07XG4gIGlmIChlZGl0b3JDb25maWcuaGVhZGluZy5sZXZlbHMubGVuZ3RoKSB7XG4gICAgY29uZmlnLm5vZGVzLmhlYWRpbmcgPSB7XG4gICAgICAuLi5ub2Rlcy5oZWFkaW5nLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAuLi5ub2Rlcy5oZWFkaW5nLmF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLmZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoZWRpdG9yQ29uZmlnLmhlYWRpbmcuc2NoZW1hKVxuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLm5vZGVzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuYmxvY2txdW90ZSkge1xuICAgIGNvbmZpZy5ub2Rlcy5ibG9ja3F1b3RlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChlZGl0b3JDb25maWcuY29kZUJsb2NrKSB7XG4gICAgY29uZmlnLm5vZGVzLmZlbmNlID0ge1xuICAgICAgLi4ubm9kZXMuZmVuY2UsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIC4uLm5vZGVzLmZlbmNlLmF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLmZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoZWRpdG9yQ29uZmlnLmNvZGVCbG9jay5zY2hlbWEpXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcubm9kZXMuZmVuY2UgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcub3JkZXJlZExpc3QgJiYgIWVkaXRvckNvbmZpZy51bm9yZGVyZWRMaXN0KSB7XG4gICAgY29uZmlnLm5vZGVzLmxpc3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuYm9sZCkge1xuICAgIGNvbmZpZy5ub2Rlcy5zdHJvbmcgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuaXRhbGljKSB7XG4gICAgY29uZmlnLm5vZGVzLmVtID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghZWRpdG9yQ29uZmlnLnN0cmlrZXRocm91Z2gpIHtcbiAgICBjb25maWcubm9kZXMucyA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWVkaXRvckNvbmZpZy5saW5rKSB7XG4gICAgY29uZmlnLm5vZGVzLmxpbmsgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuaW1hZ2UpIHtcbiAgICBjb25maWcubm9kZXMuaW1hZ2UgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuZGl2aWRlcikge1xuICAgIGNvbmZpZy5ub2Rlcy5ociA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWVkaXRvckNvbmZpZy50YWJsZSkge1xuICAgIGNvbmZpZy5ub2Rlcy50YWJsZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBmb3IgKGNvbnN0IFtuYW1lLCBjb21wb25lbnRdIG9mIE9iamVjdC5lbnRyaWVzKG9wdHMuY29tcG9uZW50cyB8fCB7fSkpIHtcbiAgICB2YXIgX29wdHMkcmVuZGVyO1xuICAgIGNvbnN0IGlzRW1wdHkgPSBjb21wb25lbnQua2luZCA9PT0gJ2Jsb2NrJyB8fCBjb21wb25lbnQua2luZCA9PT0gJ2lubGluZSc7XG4gICAgY29uZmlnLnRhZ3NbbmFtZV0gPSB7XG4gICAgICByZW5kZXI6IChfb3B0cyRyZW5kZXIgPSBvcHRzLnJlbmRlcikgPT09IG51bGwgfHwgX29wdHMkcmVuZGVyID09PSB2b2lkIDAgfHwgKF9vcHRzJHJlbmRlciA9IF9vcHRzJHJlbmRlci50YWdzKSA9PT0gbnVsbCB8fCBfb3B0cyRyZW5kZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzJHJlbmRlcltuYW1lXSxcbiAgICAgIGNoaWxkcmVuOiBpc0VtcHR5ID8gW10gOiB1bmRlZmluZWQsXG4gICAgICBzZWxmQ2xvc2luZzogaXNFbXB0eSxcbiAgICAgIGF0dHJpYnV0ZXM6IGZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoY29tcG9uZW50LnNjaGVtYSksXG4gICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyBpbiBjb21wb25lbnQgPyBjb21wb25lbnQuZGVzY3JpcHRpb24gOiB1bmRlZmluZWQsXG4gICAgICBpbmxpbmU6IGNvbXBvbmVudC5raW5kID09PSAnaW5saW5lJyB8fCBjb21wb25lbnQua2luZCA9PT0gJ21hcmsnXG4gICAgfTtcbiAgfVxuICBmb3IgKGNvbnN0IFtuYW1lLCByZW5kZXJdIG9mIE9iamVjdC5lbnRyaWVzKCgoX29wdHMkcmVuZGVyMiA9IG9wdHMucmVuZGVyKSA9PT0gbnVsbCB8fCBfb3B0cyRyZW5kZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0cyRyZW5kZXIyLm5vZGVzKSB8fCB7fSkpIHtcbiAgICB2YXIgX29wdHMkcmVuZGVyMjtcbiAgICBjb25zdCBub2RlU2NoZW1hID0gY29uZmlnLm5vZGVzW25hbWVdO1xuICAgIGlmIChub2RlU2NoZW1hKSB7XG4gICAgICBub2RlU2NoZW1hLnJlbmRlciA9IHJlbmRlcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5mdW5jdGlvbiBnZXREaXJlY3Rvcmllc0ZvckVkaXRvckZpZWxkKGNvbXBvbmVudHMsIGNvbmZpZykge1xuICByZXR1cm4gWy4uLmNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYShvYmplY3QoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNvbXBvbmVudHMpLm1hcCgoW25hbWUsIGNvbXBvbmVudF0pID0+IFtuYW1lLCBvYmplY3QoY29tcG9uZW50LnNjaGVtYSldKSkpKSwgLi4uKHR5cGVvZiBjb25maWcuaW1hZ2UgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjb25maWcuaW1hZ2UuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IFtmaXhQYXRoKGNvbmZpZy5pbWFnZS5kaXJlY3RvcnkpXSA6IFtdKV07XG59XG5mdW5jdGlvbiBtYXJrZG9jKHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fSxcbiAgZXh0ZW5zaW9uID0gJ21kb2MnXG59KSB7XG4gIGxldCBzY2hlbWE7XG4gIGNvbnN0IGNvbmZpZyA9IGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKTtcbiAgbGV0IGdldFNjaGVtYSA9ICgpID0+IHtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgc2NoZW1hID0gY3JlYXRlRWRpdG9yU2NoZW1hKCk7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG4gIH07XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRWYWx1ZShnZXRTY2hlbWEoKSk7XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJzZTogKF8sIHtcbiAgICAgIGNvbnRlbnQsXG4gICAgICBvdGhlcixcbiAgICAgIGV4dGVybmFsLFxuICAgICAgc2x1Z1xuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHRleHQgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY29udGVudCk7XG4gICAgICByZXR1cm4gcGFyc2VUb0VkaXRvclN0YXRlKHRleHQsIGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246IGAuJHtleHRlbnNpb259YCxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgZGlyZWN0b3JpZXM6IGdldERpcmVjdG9yaWVzRm9yRWRpdG9yRmllbGQoY29tcG9uZW50cywgY29uZmlnKSxcbiAgICBzZXJpYWxpemUodmFsdWUsIHtcbiAgICAgIHNsdWdcbiAgICB9KSB7XG4gICAgICBjb25zdCBvdXQgPSBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGUoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnQ6IHRleHRFbmNvZGVyLmVuY29kZShvdXQuY29udGVudCksXG4gICAgICAgIGV4dGVybmFsOiBvdXQuZXh0ZXJuYWwsXG4gICAgICAgIG90aGVyOiBvdXQub3RoZXIsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlOiAoXywge1xuICAgICAgICBjb250ZW50XG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY29udGVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogcGFyc2UodGV4dClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbGxhYm9yYXRpb246IHtcbiAgICAgIHRvWWpzKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBwcm9zZW1pcnJvclRvWVhtbEZyYWdtZW50KHZhbHVlLmRvYyk7XG4gICAgICB9LFxuICAgICAgZnJvbVlqcyh5anNWYWx1ZSwgYXdhcmVuZXNzKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFZGl0b3JTdGF0ZUZyb21ZSlMoZ2V0U2NoZW1hKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbm1hcmtkb2MuY3JlYXRlTWFya2RvY0NvbmZpZyA9IGNyZWF0ZU1hcmtkb2NDb25maWc7XG5tYXJrZG9jLmlubGluZSA9IGZ1bmN0aW9uIGlubGluZU1hcmtkb2Moe1xuICBsYWJlbCxcbiAgZGVzY3JpcHRpb24sXG4gIG9wdGlvbnMgPSB7fSxcbiAgY29tcG9uZW50cyA9IHt9XG59KSB7XG4gIGxldCBzY2hlbWE7XG4gIGNvbnN0IGNvbmZpZyA9IGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKTtcbiAgbGV0IGdldFNjaGVtYSA9ICgpID0+IHtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgc2NoZW1hID0gY3JlYXRlRWRpdG9yU2NoZW1hKCk7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG4gIH07XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnYXNzZXRzJyxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFZhbHVlKGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEb2N1bWVudEZpZWxkSW5wdXQsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhcnNlOiAodmFsdWUsIHtcbiAgICAgIG90aGVyLFxuICAgICAgZXh0ZXJuYWwsXG4gICAgICBzbHVnXG4gICAgfSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlVG9FZGl0b3JTdGF0ZSh2YWx1ZSwgZ2V0U2NoZW1hKCkpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGRpcmVjdG9yaWVzOiBnZXREaXJlY3Rvcmllc0ZvckVkaXRvckZpZWxkKGNvbXBvbmVudHMsIGNvbmZpZyksXG4gICAgc2VyaWFsaXplKHZhbHVlLCB7XG4gICAgICBzbHVnXG4gICAgfSkge1xuICAgICAgY29uc3Qgb3V0ID0gc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBleHRlcm5hbDogb3V0LmV4dGVybmFsLFxuICAgICAgICBvdGhlcjogb3V0Lm90aGVyLFxuICAgICAgICB2YWx1ZTogb3V0LmNvbnRlbnRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlOiB2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogcGFyc2UodmFsdWUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gbWR4KHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fSxcbiAgZXh0ZW5zaW9uID0gJ21keCdcbn0pIHtcbiAgbGV0IHNjaGVtYTtcbiAgY29uc3QgY29uZmlnID0gZWRpdG9yT3B0aW9uc1RvQ29uZmlnKG9wdGlvbnMpO1xuICBsZXQgZ2V0U2NoZW1hID0gKCkgPT4ge1xuICAgIGlmICghc2NoZW1hKSB7XG4gICAgICBzY2hlbWEgPSBjcmVhdGVFZGl0b3JTY2hlbWEoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFZhbHVlKGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEb2N1bWVudEZpZWxkSW5wdXQsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhcnNlOiAoXywge1xuICAgICAgY29udGVudCxcbiAgICAgIG90aGVyLFxuICAgICAgZXh0ZXJuYWwsXG4gICAgICBzbHVnXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9IHRleHREZWNvZGVyLmRlY29kZShjb250ZW50KTtcbiAgICAgIHJldHVybiBwYXJzZVRvRWRpdG9yU3RhdGVNRFgodGV4dCwgZ2V0U2NoZW1hKCkpO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogYC4ke2V4dGVuc2lvbn1gLFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBkaXJlY3RvcmllczogZ2V0RGlyZWN0b3JpZXNGb3JFZGl0b3JGaWVsZChjb21wb25lbnRzLCBjb25maWcpLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgc2x1Z1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IG91dCA9IHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZU1EWCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudDogdGV4dEVuY29kZXIuZW5jb2RlKG91dC5jb250ZW50KSxcbiAgICAgICAgZXh0ZXJuYWw6IG91dC5leHRlcm5hbCxcbiAgICAgICAgb3RoZXI6IG91dC5vdGhlcixcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2U6IChfLCB7XG4gICAgICAgIGNvbnRlbnRcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRleHREZWNvZGVyLmRlY29kZShjb250ZW50KTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5tZHguaW5saW5lID0gZnVuY3Rpb24gbWR4KHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fVxufSkge1xuICBsZXQgc2NoZW1hO1xuICBjb25zdCBjb25maWcgPSBlZGl0b3JPcHRpb25zVG9Db25maWcob3B0aW9ucyk7XG4gIGxldCBnZXRTY2hlbWEgPSAoKSA9PiB7XG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgIHNjaGVtYSA9IGNyZWF0ZUVkaXRvclNjaGVtYSgpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ2Fzc2V0cycsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRWYWx1ZShnZXRTY2hlbWEoKSk7XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJzZTogKHZhbHVlLCB7XG4gICAgICBvdGhlcixcbiAgICAgIGV4dGVybmFsLFxuICAgICAgc2x1Z1xuICAgIH0pID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZVRvRWRpdG9yU3RhdGVNRFgodmFsdWUsIGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBkaXJlY3RvcmllczogZ2V0RGlyZWN0b3JpZXNGb3JFZGl0b3JGaWVsZChjb21wb25lbnRzLCBjb25maWcpLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgc2x1Z1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IG91dCA9IHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZU1EWCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXh0ZXJuYWw6IG91dC5leHRlcm5hbCxcbiAgICAgICAgb3RoZXI6IG91dC5vdGhlcixcbiAgICAgICAgdmFsdWU6IG91dC5jb250ZW50XG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZTogdmFsdWUgPT4ge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgeyBtYXJrZG9jIGFzIGEsIGdldERpcmVjdG9yaWVzRm9yVHJlZUtleSBhcyBiLCBnZXRDb2xsZWN0aW9uUGF0aCBhcyBjLCBkb2N1bWVudCBhcyBkLCBnZXRTaW5nbGV0b25Gb3JtYXQgYXMgZSwgZml4UGF0aCBhcyBmLCBnZXRTcmNQcmVmaXggYXMgZywgZ2V0U2luZ2xldG9uUGF0aCBhcyBoLCBibG9iU2hhIGFzIGksIGdldENvbGxlY3Rpb25Gb3JtYXQgYXMgaiwgZ2V0U2x1Z0dsb2JGb3JDb2xsZWN0aW9uIGFzIGssIGdldERhdGFGaWxlRXh0ZW5zaW9uIGFzIGwsIG1keCBhcyBtLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGggYXMgbiwgb2JqZWN0IGFzIG8sIGdldEVudHJ5RGF0YUZpbGVwYXRoIGFzIHAsIGdldFZhbHVlQXRQcm9wUGF0aCBhcyBxLCBnZXRUcmVlTm9kZUF0UGF0aCBhcyByLCB0cmVlRW50cmllc1RvVHJlZU5vZGVzIGFzIHQsIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyBhcyB1IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/index-aaf578e2.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/core/dist/keystatic-core-ui.node.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/keystatic-core-ui.node.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Keystatic: () => (/* binding */ Keystatic)\n/* harmony export */ });\nfunction assertValidRepoConfig(repo) {\n  if (typeof repo === 'string') {\n    if (!repo.includes('/')) {\n      throw new Error(`Invalid repo config: ${repo}. It must be in the form owner/name`);\n    }\n  }\n  if (typeof repo === 'object') {\n    if (!repo.owner && !repo.name) {\n      throw new Error(`Invalid repo config: owner and name are missing`);\n    }\n    if (!repo.owner) {\n      throw new Error(`Invalid repo config: owner is missing`);\n    }\n    if (!repo.name) {\n      throw new Error(`Invalid repo config: name is missing`);\n    }\n  }\n}\n\nfunction Keystatic(props) {\n  if (props.config.storage.kind === 'github') {\n    assertValidRepoConfig(props.config.storage.repo);\n  }\n  return null;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUtdWkubm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDLEtBQUs7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9kaXN0L2tleXN0YXRpYy1jb3JlLXVpLm5vZGUuanM/NGI0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhc3NlcnRWYWxpZFJlcG9Db25maWcocmVwbykge1xuICBpZiAodHlwZW9mIHJlcG8gPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKCFyZXBvLmluY2x1ZGVzKCcvJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXBvIGNvbmZpZzogJHtyZXBvfS4gSXQgbXVzdCBiZSBpbiB0aGUgZm9ybSBvd25lci9uYW1lYCk7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2YgcmVwbyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoIXJlcG8ub3duZXIgJiYgIXJlcG8ubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlcG8gY29uZmlnOiBvd25lciBhbmQgbmFtZSBhcmUgbWlzc2luZ2ApO1xuICAgIH1cbiAgICBpZiAoIXJlcG8ub3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXBvIGNvbmZpZzogb3duZXIgaXMgbWlzc2luZ2ApO1xuICAgIH1cbiAgICBpZiAoIXJlcG8ubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlcG8gY29uZmlnOiBuYW1lIGlzIG1pc3NpbmdgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gS2V5c3RhdGljKHByb3BzKSB7XG4gIGlmIChwcm9wcy5jb25maWcuc3RvcmFnZS5raW5kID09PSAnZ2l0aHViJykge1xuICAgIGFzc2VydFZhbGlkUmVwb0NvbmZpZyhwcm9wcy5jb25maWcuc3RvcmFnZS5yZXBvKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IHsgS2V5c3RhdGljIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/keystatic-core-ui.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/core/dist/keystatic-core.node.js":
/*!******************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/keystatic-core.node.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockWrapper: () => (/* binding */ BlockWrapper),\n/* harmony export */   NotEditable: () => (/* binding */ NotEditable),\n/* harmony export */   ToolbarSeparator: () => (/* binding */ ToolbarSeparator),\n/* harmony export */   collection: () => (/* binding */ collection),\n/* harmony export */   component: () => (/* reexport safe */ _api_daad6cc5_node_js__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   fields: () => (/* binding */ index),\n/* harmony export */   singleton: () => (/* binding */ singleton)\n/* harmony export */ });\n/* harmony import */ var _api_daad6cc5_node_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api-daad6cc5.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/api-daad6cc5.node.js\");\n/* harmony import */ var _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-1a9da0fb.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-1a9da0fb.node.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-aaf578e2.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-aaf578e2.node.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! emery */ \"(ssr)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(ssr)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _index_39d45899_node_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-39d45899.node.js */ \"(ssr)/./node_modules/@keystatic/core/dist/index-39d45899.node.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! emery/assertions */ \"(ssr)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\n\n\n\n\n\n\n\n// Common\n\n// Storage\n// ----------------------------------------------------------------------------\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction config(config) {\n  return config;\n}\nfunction collection(collection) {\n  return collection;\n}\nfunction singleton(collection) {\n  return collection;\n}\n\nfunction array(element, opts) {\n  var _opts$label;\n  return {\n    kind: 'array',\n    element,\n    label: (_opts$label = opts === null || opts === void 0 ? void 0 : opts.label) !== null && _opts$label !== void 0 ? _opts$label : 'Items',\n    description: opts === null || opts === void 0 ? void 0 : opts.description,\n    itemLabel: opts === null || opts === void 0 ? void 0 : opts.itemLabel,\n    asChildTag: opts === null || opts === void 0 ? void 0 : opts.asChildTag,\n    slugField: opts === null || opts === void 0 ? void 0 : opts.slugField,\n    validation: opts === null || opts === void 0 ? void 0 : opts.validation\n  };\n}\n\nfunction select({\n  label,\n  options,\n  defaultValue,\n  description\n}) {\n  const optionValuesSet = new Set(options.map(x => x.value));\n  if (!optionValuesSet.has(defaultValue)) {\n    throw new Error(`A defaultValue of ${defaultValue} was provided to a select field but it does not match the value of one of the options provided`);\n  }\n  const field = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.S, {\n        label: label,\n        options: options,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return defaultValue;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (!optionValuesSet.has(value)) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a valid option');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction blocks(blocks, opts) {\n  const entries = Object.entries(blocks);\n  if (!entries.length) {\n    throw new Error('fields.blocks must have at least one entry');\n  }\n  const select$1 = select({\n    label: 'Kind',\n    defaultValue: entries[0][0],\n    options: Object.entries(blocks).map(([key, {\n      label\n    }]) => ({\n      label,\n      value: key\n    }))\n  });\n  const element = conditional(select$1, Object.fromEntries(entries.map(([key, {\n    schema\n  }]) => [key, schema])));\n  return {\n    ...array(element, {\n      label: opts.label,\n      description: opts.description,\n      validation: opts.validation,\n      itemLabel(props) {\n        const kind = props.discriminant;\n        const block = blocks[kind];\n        if (!block.itemLabel) return block.label;\n        return block.itemLabel(props.value);\n      }\n    }),\n    Input: _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.B\n  };\n}\n\nfunction checkbox({\n  label,\n  defaultValue = false,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.C, {\n        ...props,\n        label: label,\n        description: description\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) return defaultValue;\n      if (typeof value !== 'boolean') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a boolean');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction child(options) {\n  return {\n    kind: 'child',\n    options: options.kind === 'block' ? {\n      ...options,\n      dividers: options.dividers,\n      formatting: options.formatting === 'inherit' ? {\n        blockTypes: 'inherit',\n        headingLevels: 'inherit',\n        inlineMarks: 'inherit',\n        listTypes: 'inherit',\n        alignment: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links,\n      images: options.images,\n      tables: options.tables,\n      componentBlocks: options.componentBlocks\n    } : {\n      kind: 'inline',\n      placeholder: options.placeholder,\n      formatting: options.formatting === 'inherit' ? {\n        inlineMarks: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links\n    }\n  };\n}\n\nfunction cloudImage({\n  label,\n  description,\n  validation\n}) {\n  return {\n    ...(0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.o)({\n      src: (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.t)({\n        label: 'URL',\n        validation: {\n          length: {\n            min: validation !== null && validation !== void 0 && validation.isRequired ? 1 : 0\n          }\n        }\n      }),\n      alt: (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.t)({\n        label: 'Alt text'\n      }),\n      height: (0,_index_39d45899_node_js__WEBPACK_IMPORTED_MODULE_6__.i)({\n        label: 'Height'\n      }),\n      width: (0,_index_39d45899_node_js__WEBPACK_IMPORTED_MODULE_6__.i)({\n        label: 'Width'\n      })\n    }, {\n      label,\n      description\n    }),\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.a, {\n        ...props,\n        isRequired: validation === null || validation === void 0 ? void 0 : validation.isRequired\n      });\n    }\n  };\n}\n\nfunction conditional(discriminant, values) {\n  return {\n    kind: 'conditional',\n    discriminant,\n    values: values\n  };\n}\n\nfunction validateDate(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) {\n    return `${label} is not a valid date`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const date = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (date < min) {\n        return `${label} must be after ${min.toLocaleDateString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (date > max) {\n        return `${label} must be no later than ${max.toLocaleDateString()}`;\n      }\n    }\n  }\n}\n\nfunction date({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.D, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (value instanceof Date) {\n        const year = value.getUTCFullYear();\n        const month = String(value.getUTCMonth() + 1).padStart(2, '0');\n        const day = String(value.getUTCDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      if (value === null) return {\n        value: undefined\n      };\n      const date = new Date(value);\n      date.toISOString = () => value;\n      date.toString = () => value;\n      return {\n        value: date\n      };\n    },\n    validate(value) {\n      const message = validateDate(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction validateDatetime(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(value)) {\n    return `${label} is not a valid datetime`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const datetime = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (datetime < min) {\n        return `${label} must be after ${min.toISOString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (datetime > max) {\n        return `${label} must be no later than ${max.toISOString()}`;\n      }\n    }\n  }\n}\n\nfunction datetime({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.d, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      if (defaultValue.kind === 'now') {\n        const now = new Date();\n        return new Date(now.getTime() - now.getTimezoneOffset() * 60 * 1000).toISOString().slice(0, -8);\n      }\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (value instanceof Date) {\n        return value.toISOString().slice(0, -8);\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string or date');\n      }\n      return value;\n    },\n    serialize(value) {\n      if (value === null) return {\n        value: undefined\n      };\n      const date = new Date(value + 'Z');\n      date.toJSON = () => date.toISOString().slice(0, -8);\n      date.toString = () => date.toISOString().slice(0, -8);\n      return {\n        value: date\n      };\n    },\n    validate(value) {\n      const message = validateDatetime(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction empty() {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    serialize() {\n      return {\n        value: undefined\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    label: 'Empty'\n  });\n}\n\n/**\n * @deprecated `emptyDocument` has been replaced with the `emptyContent` field\n */\nfunction emptyDocument() {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: '.mdoc',\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction emptyContent(opts) {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: `.${opts.extension}`,\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction file({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath,\n  transformFilename\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.e, {\n        label: label,\n        description: description,\n        validation: validation,\n        transformFilename: transformFilename,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.f)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction image({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath,\n  transformFilename\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.I, {\n        label: label,\n        description: description,\n        validation: validation,\n        transformFilename: transformFilename,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.f)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction pluralize(count, options) {\n  const {\n    singular,\n    plural = singular + 's',\n    inclusive = true\n  } = options;\n  const variant = count === 1 ? singular : plural;\n  return inclusive ? `${count} ${variant}` : variant;\n}\n\nfunction validateMultiRelationshipLength(validation, value) {\n  var _validation$length$mi, _validation$length, _validation$length$ma, _validation$length2;\n  const minLength = (_validation$length$mi = validation === null || validation === void 0 || (_validation$length = validation.length) === null || _validation$length === void 0 ? void 0 : _validation$length.min) !== null && _validation$length$mi !== void 0 ? _validation$length$mi : 0;\n  if (value.length < minLength) {\n    return `Must have at least ${pluralize(minLength, {\n      singular: 'item'\n    })}.`;\n  }\n  const maxLength = (_validation$length$ma = validation === null || validation === void 0 || (_validation$length2 = validation.length) === null || _validation$length2 === void 0 ? void 0 : _validation$length2.max) !== null && _validation$length$ma !== void 0 ? _validation$length$ma : Infinity;\n  if (value.length > maxLength) {\n    return `Must have at most ${pluralize(maxLength, {\n      singular: 'item'\n    })}.`;\n  }\n}\n\nfunction multiRelationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.M, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return [];\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value) || !value.every(emery__WEBPACK_IMPORTED_MODULE_4__.isString)) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an array of strings');\n      }\n      return value;\n    },\n    validate(value) {\n      const error = validateMultiRelationshipLength(validation, value);\n      if (error) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(error);\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction multiselect({\n  label,\n  options,\n  defaultValue = [],\n  description\n}) {\n  const valuesToOption = new Map(options.map(x => [x.value, x]));\n  const field = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.f, {\n        label: label,\n        description: description,\n        options: options,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value)) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an array of options');\n      }\n      if (!value.every(x => typeof x === 'string' && valuesToOption.has(x))) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(`Must be an array with one of ${options.map(x => x.value).join(', ')}`);\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction validateNumber(validation, value, step, label) {\n  if (value !== null && typeof value !== 'number') {\n    return `${label} must be a number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n    if (step !== undefined && (validation === null || validation === void 0 ? void 0 : validation.validateStep) !== undefined && !isAtStep(value, step)) {\n      return `${label} must be a multiple of ${step}`;\n    }\n  }\n}\nfunction decimalPlaces(value) {\n  const stringified = value.toString();\n  const indexOfDecimal = stringified.indexOf('.');\n  if (indexOfDecimal === -1) {\n    const indexOfE = stringified.indexOf('e-');\n    return indexOfE === -1 ? 0 : parseInt(stringified.slice(indexOfE + 2));\n  }\n  return stringified.length - indexOfDecimal - 1;\n}\nfunction isAtStep(value, step) {\n  const dc = Math.max(decimalPlaces(step), decimalPlaces(value));\n  const base = Math.pow(10, dc);\n  return value * base % (step * base) === 0;\n}\n\nfunction number({\n  label,\n  defaultValue,\n  step,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.N, {\n        label: label,\n        description: description,\n        validation: validation,\n        step: step,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a number');\n    },\n    validate(value) {\n      const message = validateNumber(validation, value, step, label);\n      if (message !== undefined) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction pathReference({\n  label,\n  pattern,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.P, {\n        label: label,\n        pattern: pattern,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction relationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.R, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction parseSlugFieldAsNormalField(value) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug: ''\n    };\n  }\n  if (typeof value !== 'object') {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an object');\n  }\n  if (Object.keys(value).length !== 2) {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Unexpected keys');\n  }\n  if (!('name' in value) || !('slug' in value)) {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Missing name or slug');\n  }\n  if (typeof value.name !== 'string') {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('name must be a string');\n  }\n  if (typeof value.slug !== 'string') {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('slug must be a string');\n  }\n  return {\n    name: value.name,\n    slug: value.slug\n  };\n}\nfunction parseAsSlugField(value, slug) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug\n    };\n  }\n  if (typeof value !== 'string') {\n    throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n  }\n  return {\n    name: value,\n    slug\n  };\n}\nfunction slug(_args) {\n  var _args$name$validation, _args$name$validation2, _args$name$validation3, _args$name$validation4, _args$name$validation5, _args$slug;\n  const args = {\n    ..._args,\n    name: {\n      ..._args.name,\n      validation: {\n        pattern: (_args$name$validation = _args.name.validation) === null || _args$name$validation === void 0 ? void 0 : _args$name$validation.pattern,\n        length: {\n          min: Math.max((_args$name$validation2 = _args.name.validation) !== null && _args$name$validation2 !== void 0 && _args$name$validation2.isRequired ? 1 : 0, (_args$name$validation3 = (_args$name$validation4 = _args.name.validation) === null || _args$name$validation4 === void 0 || (_args$name$validation4 = _args$name$validation4.length) === null || _args$name$validation4 === void 0 ? void 0 : _args$name$validation4.min) !== null && _args$name$validation3 !== void 0 ? _args$name$validation3 : 0),\n          max: (_args$name$validation5 = _args.name.validation) === null || _args$name$validation5 === void 0 || (_args$name$validation5 = _args$name$validation5.length) === null || _args$name$validation5 === void 0 ? void 0 : _args$name$validation5.max\n        }\n      }\n    }\n  };\n  const naiveGenerateSlug = ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.generate) || _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.s;\n  let _defaultValue;\n  function defaultValue() {\n    if (!_defaultValue) {\n      var _args$name$defaultVal, _args$name$defaultVal2;\n      _defaultValue = {\n        name: (_args$name$defaultVal = args.name.defaultValue) !== null && _args$name$defaultVal !== void 0 ? _args$name$defaultVal : '',\n        slug: naiveGenerateSlug((_args$name$defaultVal2 = args.name.defaultValue) !== null && _args$name$defaultVal2 !== void 0 ? _args$name$defaultVal2 : '')\n      };\n    }\n    return _defaultValue;\n  }\n  function validate(value, {\n    slugField\n  } = {\n    slugField: undefined\n  }) {\n    var _args$name$validation6, _args$name$validation7, _args$name$validation8, _args$name$validation9, _args$name$validation10, _args$slug$validation, _args$slug2, _args$slug$validation2, _args$slug3, _args$slug$label, _args$slug4, _args$slug5;\n    const nameMessage = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.v)(value.name, (_args$name$validation6 = (_args$name$validation7 = args.name.validation) === null || _args$name$validation7 === void 0 || (_args$name$validation7 = _args$name$validation7.length) === null || _args$name$validation7 === void 0 ? void 0 : _args$name$validation7.min) !== null && _args$name$validation6 !== void 0 ? _args$name$validation6 : 0, (_args$name$validation8 = (_args$name$validation9 = args.name.validation) === null || _args$name$validation9 === void 0 || (_args$name$validation9 = _args$name$validation9.length) === null || _args$name$validation9 === void 0 ? void 0 : _args$name$validation9.max) !== null && _args$name$validation8 !== void 0 ? _args$name$validation8 : Infinity, args.name.label, undefined, (_args$name$validation10 = args.name.validation) === null || _args$name$validation10 === void 0 ? void 0 : _args$name$validation10.pattern);\n    if (nameMessage !== undefined) {\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(nameMessage);\n    }\n    const slugMessage = (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.v)(value.slug, (_args$slug$validation = (_args$slug2 = args.slug) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.validation) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.length) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.min) !== null && _args$slug$validation !== void 0 ? _args$slug$validation : 1, (_args$slug$validation2 = (_args$slug3 = args.slug) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.validation) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.length) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.max) !== null && _args$slug$validation2 !== void 0 ? _args$slug$validation2 : Infinity, (_args$slug$label = (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.label) !== null && _args$slug$label !== void 0 ? _args$slug$label : 'Slug', slugField ? slugField : {\n      slugs: emptySet,\n      glob: '*'\n    }, (_args$slug5 = args.slug) === null || _args$slug5 === void 0 || (_args$slug5 = _args$slug5.validation) === null || _args$slug5 === void 0 ? void 0 : _args$slug5.pattern);\n    if (slugMessage !== undefined) {\n      throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(slugMessage);\n    }\n    return value;\n  }\n  const emptySet = new Set();\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    label: args.name.label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.g, {\n        args: args,\n        naiveGenerateSlug: naiveGenerateSlug,\n        defaultValue: defaultValue(),\n        ...props\n      });\n    },\n    defaultValue,\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return parseAsSlugField(value, args.slug);\n      }\n      return parseSlugFieldAsNormalField(value);\n    },\n    validate,\n    serialize(value) {\n      return {\n        value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        value: value.name,\n        slug: value.slug\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseSlugFieldAsNormalField(value);\n        return validate(parsed);\n      },\n      parseWithSlug(value, args) {\n        return validate(parseAsSlugField(value, args.slug), {\n          slugField: {\n            glob: args.glob,\n            slugs: emptySet\n          }\n        }).name;\n      }\n    }\n  };\n}\n\nfunction isValidURL(url) {\n  return url === (0,_braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_5__.sanitizeUrl)(url);\n}\n\nfunction validateUrl(validation, value, label) {\n  if (value !== null && (typeof value !== 'string' || !isValidURL(value))) {\n    return `${label} is not a valid URL`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n}\n\nfunction url({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.U, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue || null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value === '' ? null : value;\n    },\n    validate(value) {\n      const message = validateUrl(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction ignored() {\n  return {\n    kind: 'form',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return {\n        value: undefined\n      };\n    },\n    parse(value) {\n      return {\n        value\n      };\n    },\n    serialize(value) {\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    label: 'Ignored',\n    reader: {\n      parse(value) {\n        return value;\n      }\n    }\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  array: array,\n  blocks: blocks,\n  checkbox: checkbox,\n  child: child,\n  cloudImage: cloudImage,\n  conditional: conditional,\n  date: date,\n  datetime: datetime,\n  document: _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.d,\n  empty: empty,\n  emptyDocument: emptyDocument,\n  emptyContent: emptyContent,\n  file: file,\n  image: image,\n  integer: _index_39d45899_node_js__WEBPACK_IMPORTED_MODULE_6__.i,\n  multiRelationship: multiRelationship,\n  multiselect: multiselect,\n  number: number,\n  object: _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.o,\n  pathReference: pathReference,\n  relationship: relationship,\n  select: select,\n  slug: slug,\n  text: _index_1a9da0fb_node_js__WEBPACK_IMPORTED_MODULE_1__.t,\n  url: url,\n  ignored: ignored,\n  mdx: _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.m,\n  markdoc: _index_aaf578e2_node_js__WEBPACK_IMPORTED_MODULE_3__.a\n});\n\nfunction BlockWrapper() {}\nfunction NotEditable() {}\nfunction ToolbarSeparator() {}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUN1ZDtBQUN2ZTtBQUN1RjtBQUM5RjtBQUNxQjtBQUNFO0FBQ2Y7QUFDZjtBQUNWOztBQUVoQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EseUNBQXlDLGNBQWM7QUFDdkQ7QUFDQSxnQkFBZ0IsMERBQW1DO0FBQ25EO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUcsQ0FBQyxzREFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzREFBYztBQUNoQztBQUNBO0FBQ0Esa0JBQWtCLHNEQUFjO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcsc0RBQWdCO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQTtB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Q2hDO0FBQ0EsTUFBTSwwREFBYztBQUNwQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0RBQU07QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFJO0FBQ1o7QUFDQTtBQUNBLE9BQU8sc0RBQUc7QUFDVixXQUFXLHNEQUFPO0FBQ2xCLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUV1RyIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9rZXlzdGF0aWMtY29yZS5ub2RlLmpzPzFhMTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgYyBhcyBjb21wb25lbnQgfSBmcm9tICcuL2FwaS1kYWFkNmNjNS5ub2RlLmpzJztcbmltcG9ydCB7IGIgYXMgYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UsIFMgYXMgU2VsZWN0RmllbGRJbnB1dCwgRiBhcyBGaWVsZERhdGFFcnJvciwgQiBhcyBCbG9ja3NGaWVsZElucHV0LCBDIGFzIENoZWNrYm94RmllbGRJbnB1dCwgdCBhcyB0ZXh0LCBhIGFzIENsb3VkSW1hZ2VGaWVsZElucHV0LCBEIGFzIERhdGVGaWVsZElucHV0LCBjIGFzIGFzc2VydFJlcXVpcmVkLCBkIGFzIERhdGV0aW1lRmllbGRJbnB1dCwgZSBhcyBGaWxlRmllbGRJbnB1dCwgSSBhcyBJbWFnZUZpZWxkSW5wdXQsIE0gYXMgTXVsdGlSZWxhdGlvbnNoaXBJbnB1dCwgZiBhcyBNdWx0aXNlbGVjdEZpZWxkSW5wdXQsIE4gYXMgTnVtYmVyRmllbGRJbnB1dCwgUCBhcyBQYXRoUmVmZXJlbmNlSW5wdXQsIFIgYXMgUmVsYXRpb25zaGlwSW5wdXQsIHMgYXMgc2x1Z2lmeSwgZyBhcyBTbHVnRmllbGRJbnB1dCwgdiBhcyB2YWxpZGF0ZVRleHQsIFUgYXMgVXJsRmllbGRJbnB1dCB9IGZyb20gJy4vaW5kZXgtMWE5ZGEwZmIubm9kZS5qcyc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyBvIGFzIG9iamVjdCwgZyBhcyBnZXRTcmNQcmVmaXgsIGYgYXMgZml4UGF0aCwgZCBhcyBkb2N1bWVudCwgbSBhcyBtZHgsIGEgYXMgbWFya2RvYyB9IGZyb20gJy4vaW5kZXgtYWFmNTc4ZTIubm9kZS5qcyc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCB7IHNhbml0aXplVXJsIH0gZnJvbSAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0IHsgaSBhcyBpbnRlZ2VyIH0gZnJvbSAnLi9pbmRleC0zOWQ0NTg5OS5ub2RlLmpzJztcbmltcG9ydCAnQG1hcmtkb2MvbWFya2RvYy9kaXN0L2luZGV4Lm1qcyc7XG5pbXBvcnQgJ2VtZXJ5L2Fzc2VydGlvbnMnO1xuaW1wb3J0ICdjcnlwdG8nO1xuXG4vLyBDb21tb25cblxuLy8gU3RvcmFnZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGdW5jdGlvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZnVuY3Rpb24gY29uZmlnKGNvbmZpZykge1xuICByZXR1cm4gY29uZmlnO1xufVxuZnVuY3Rpb24gY29sbGVjdGlvbihjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufVxuZnVuY3Rpb24gc2luZ2xldG9uKGNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIGFycmF5KGVsZW1lbnQsIG9wdHMpIHtcbiAgdmFyIF9vcHRzJGxhYmVsO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdhcnJheScsXG4gICAgZWxlbWVudCxcbiAgICBsYWJlbDogKF9vcHRzJGxhYmVsID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmxhYmVsKSAhPT0gbnVsbCAmJiBfb3B0cyRsYWJlbCAhPT0gdm9pZCAwID8gX29wdHMkbGFiZWwgOiAnSXRlbXMnLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuZGVzY3JpcHRpb24sXG4gICAgaXRlbUxhYmVsOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuaXRlbUxhYmVsLFxuICAgIGFzQ2hpbGRUYWc6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5hc0NoaWxkVGFnLFxuICAgIHNsdWdGaWVsZDogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnNsdWdGaWVsZCxcbiAgICB2YWxpZGF0aW9uOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudmFsaWRhdGlvblxuICB9O1xufVxuXG5mdW5jdGlvbiBzZWxlY3Qoe1xuICBsYWJlbCxcbiAgb3B0aW9ucyxcbiAgZGVmYXVsdFZhbHVlLFxuICBkZXNjcmlwdGlvblxufSkge1xuICBjb25zdCBvcHRpb25WYWx1ZXNTZXQgPSBuZXcgU2V0KG9wdGlvbnMubWFwKHggPT4geC52YWx1ZSkpO1xuICBpZiAoIW9wdGlvblZhbHVlc1NldC5oYXMoZGVmYXVsdFZhbHVlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQSBkZWZhdWx0VmFsdWUgb2YgJHtkZWZhdWx0VmFsdWV9IHdhcyBwcm92aWRlZCB0byBhIHNlbGVjdCBmaWVsZCBidXQgaXQgZG9lcyBub3QgbWF0Y2ggdGhlIHZhbHVlIG9mIG9uZSBvZiB0aGUgb3B0aW9ucyBwcm92aWRlZGApO1xuICB9XG4gIGNvbnN0IGZpZWxkID0gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChTZWxlY3RGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIGlmICghb3B0aW9uVmFsdWVzU2V0Lmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgdmFsaWQgb3B0aW9uJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIC4uLmZpZWxkLFxuICAgIG9wdGlvbnNcbiAgfTtcbn1cblxuZnVuY3Rpb24gYmxvY2tzKGJsb2Nrcywgb3B0cykge1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoYmxvY2tzKTtcbiAgaWYgKCFlbnRyaWVzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZmllbGRzLmJsb2NrcyBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGVudHJ5Jyk7XG4gIH1cbiAgY29uc3Qgc2VsZWN0JDEgPSBzZWxlY3Qoe1xuICAgIGxhYmVsOiAnS2luZCcsXG4gICAgZGVmYXVsdFZhbHVlOiBlbnRyaWVzWzBdWzBdLFxuICAgIG9wdGlvbnM6IE9iamVjdC5lbnRyaWVzKGJsb2NrcykubWFwKChba2V5LCB7XG4gICAgICBsYWJlbFxuICAgIH1dKSA9PiAoe1xuICAgICAgbGFiZWwsXG4gICAgICB2YWx1ZToga2V5XG4gICAgfSkpXG4gIH0pO1xuICBjb25zdCBlbGVtZW50ID0gY29uZGl0aW9uYWwoc2VsZWN0JDEsIE9iamVjdC5mcm9tRW50cmllcyhlbnRyaWVzLm1hcCgoW2tleSwge1xuICAgIHNjaGVtYVxuICB9XSkgPT4gW2tleSwgc2NoZW1hXSkpKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hcnJheShlbGVtZW50LCB7XG4gICAgICBsYWJlbDogb3B0cy5sYWJlbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBvcHRzLmRlc2NyaXB0aW9uLFxuICAgICAgdmFsaWRhdGlvbjogb3B0cy52YWxpZGF0aW9uLFxuICAgICAgaXRlbUxhYmVsKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGtpbmQgPSBwcm9wcy5kaXNjcmltaW5hbnQ7XG4gICAgICAgIGNvbnN0IGJsb2NrID0gYmxvY2tzW2tpbmRdO1xuICAgICAgICBpZiAoIWJsb2NrLml0ZW1MYWJlbCkgcmV0dXJuIGJsb2NrLmxhYmVsO1xuICAgICAgICByZXR1cm4gYmxvY2suaXRlbUxhYmVsKHByb3BzLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBJbnB1dDogQmxvY2tzRmllbGRJbnB1dFxuICB9O1xufVxuXG5mdW5jdGlvbiBjaGVja2JveCh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUgPSBmYWxzZSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goQ2hlY2tib3hGaWVsZElucHV0LCB7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvblxuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIGJvb2xlYW4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoaWxkKG9wdGlvbnMpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnY2hpbGQnLFxuICAgIG9wdGlvbnM6IG9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJyA/IHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBkaXZpZGVyczogb3B0aW9ucy5kaXZpZGVycyxcbiAgICAgIGZvcm1hdHRpbmc6IG9wdGlvbnMuZm9ybWF0dGluZyA9PT0gJ2luaGVyaXQnID8ge1xuICAgICAgICBibG9ja1R5cGVzOiAnaW5oZXJpdCcsXG4gICAgICAgIGhlYWRpbmdMZXZlbHM6ICdpbmhlcml0JyxcbiAgICAgICAgaW5saW5lTWFya3M6ICdpbmhlcml0JyxcbiAgICAgICAgbGlzdFR5cGVzOiAnaW5oZXJpdCcsXG4gICAgICAgIGFsaWdubWVudDogJ2luaGVyaXQnLFxuICAgICAgICBzb2Z0QnJlYWtzOiAnaW5oZXJpdCdcbiAgICAgIH0gOiBvcHRpb25zLmZvcm1hdHRpbmcsXG4gICAgICBsaW5rczogb3B0aW9ucy5saW5rcyxcbiAgICAgIGltYWdlczogb3B0aW9ucy5pbWFnZXMsXG4gICAgICB0YWJsZXM6IG9wdGlvbnMudGFibGVzLFxuICAgICAgY29tcG9uZW50QmxvY2tzOiBvcHRpb25zLmNvbXBvbmVudEJsb2Nrc1xuICAgIH0gOiB7XG4gICAgICBraW5kOiAnaW5saW5lJyxcbiAgICAgIHBsYWNlaG9sZGVyOiBvcHRpb25zLnBsYWNlaG9sZGVyLFxuICAgICAgZm9ybWF0dGluZzogb3B0aW9ucy5mb3JtYXR0aW5nID09PSAnaW5oZXJpdCcgPyB7XG4gICAgICAgIGlubGluZU1hcmtzOiAnaW5oZXJpdCcsXG4gICAgICAgIHNvZnRCcmVha3M6ICdpbmhlcml0J1xuICAgICAgfSA6IG9wdGlvbnMuZm9ybWF0dGluZyxcbiAgICAgIGxpbmtzOiBvcHRpb25zLmxpbmtzXG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjbG91ZEltYWdlKHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICB2YWxpZGF0aW9uXG59KSB7XG4gIHJldHVybiB7XG4gICAgLi4ub2JqZWN0KHtcbiAgICAgIHNyYzogdGV4dCh7XG4gICAgICAgIGxhYmVsOiAnVVJMJyxcbiAgICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICAgIGxlbmd0aDoge1xuICAgICAgICAgICAgbWluOiB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgPyAxIDogMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBhbHQ6IHRleHQoe1xuICAgICAgICBsYWJlbDogJ0FsdCB0ZXh0J1xuICAgICAgfSksXG4gICAgICBoZWlnaHQ6IGludGVnZXIoe1xuICAgICAgICBsYWJlbDogJ0hlaWdodCdcbiAgICAgIH0pLFxuICAgICAgd2lkdGg6IGludGVnZXIoe1xuICAgICAgICBsYWJlbDogJ1dpZHRoJ1xuICAgICAgfSlcbiAgICB9LCB7XG4gICAgICBsYWJlbCxcbiAgICAgIGRlc2NyaXB0aW9uXG4gICAgfSksXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENsb3VkSW1hZ2VGaWVsZElucHV0LCB7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBpc1JlcXVpcmVkOiB2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24uaXNSZXF1aXJlZFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjb25kaXRpb25hbChkaXNjcmltaW5hbnQsIHZhbHVlcykge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdjb25kaXRpb25hbCcsXG4gICAgZGlzY3JpbWluYW50LFxuICAgIHZhbHVlczogdmFsdWVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF0ZSh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICEvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9JC8udGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIG5vdCBhIHZhbGlkIGRhdGVgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAoKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24ubWluIHx8IHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24ubWF4KSAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWluKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1pbik7XG4gICAgICBpZiAoZGF0ZSA8IG1pbikge1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYWZ0ZXIgJHttaW4udG9Mb2NhbGVEYXRlU3RyaW5nKCl9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtYXggPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1heCk7XG4gICAgICBpZiAoZGF0ZSA+IG1heCkge1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgbm8gbGF0ZXIgdGhhbiAke21heC50b0xvY2FsZURhdGVTdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXRlKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGF0ZUZpZWxkSW5wdXQsIHtcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICBjb25zdCBtb250aCA9IFN0cmluZyh0b2RheS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgIGNvbnN0IGRheSA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgY29uc3QgeWVhciA9IHZhbHVlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKHZhbHVlLmdldFVUQ01vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBkYXkgPSBTdHJpbmcodmFsdWUuZ2V0VVRDRGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgZGF0ZS50b0lTT1N0cmluZyA9ICgpID0+IHZhbHVlO1xuICAgICAgZGF0ZS50b1N0cmluZyA9ICgpID0+IHZhbHVlO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGRhdGVcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHZhbGlkYXRlRGF0ZSh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpO1xuICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF0ZXRpbWUodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAhL15cXGR7NH0tXFxkezJ9LVxcZHsyfVRcXGR7Mn06XFxkezJ9JC8udGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIG5vdCBhIHZhbGlkIGRhdGV0aW1lYDtcbiAgfVxuICBpZiAodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyByZXF1aXJlZGA7XG4gIH1cbiAgaWYgKCh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLm1pbiB8fCB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLm1heCkgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICBjb25zdCBkYXRldGltZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1pbiA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWluKTtcbiAgICAgIGlmIChkYXRldGltZSA8IG1pbikge1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYWZ0ZXIgJHttaW4udG9JU09TdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5tYXgpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1heCA9IG5ldyBEYXRlKHZhbGlkYXRpb24ubWF4KTtcbiAgICAgIGlmIChkYXRldGltZSA+IG1heCkge1xuICAgICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgbm8gbGF0ZXIgdGhhbiAke21heC50b0lTT1N0cmluZygpfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRhdGV0aW1lKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRGF0ZXRpbWVGaWVsZElucHV0LCB7XG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZhdWx0VmFsdWUua2luZCA9PT0gJ25vdycpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtOCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgLTgpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nIG9yIGRhdGUnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlICsgJ1onKTtcbiAgICAgIGRhdGUudG9KU09OID0gKCkgPT4gZGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIC04KTtcbiAgICAgIGRhdGUudG9TdHJpbmcgPSAoKSA9PiBkYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgLTgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IGRhdGVcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHZhbGlkYXRlRGF0ZXRpbWUodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBsYWJlbDogJ0VtcHR5J1xuICB9KTtcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBgZW1wdHlEb2N1bWVudGAgaGFzIGJlZW4gcmVwbGFjZWQgd2l0aCB0aGUgYGVtcHR5Q29udGVudGAgZmllbGRcbiAqL1xuZnVuY3Rpb24gZW1wdHlEb2N1bWVudCgpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogJy5tZG9jJyxcbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBjb250ZW50OiBuZXcgVWludDhBcnJheSgpLFxuICAgICAgICBleHRlcm5hbDogbmV3IE1hcCgpLFxuICAgICAgICBvdGhlcjogbmV3IE1hcCgpXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZW1wdHlDb250ZW50KG9wdHMpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogYC4ke29wdHMuZXh0ZW5zaW9ufWAsXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgY29udGVudDogbmV3IFVpbnQ4QXJyYXkoKSxcbiAgICAgICAgZXh0ZXJuYWw6IG5ldyBNYXAoKSxcbiAgICAgICAgb3RoZXI6IG5ldyBNYXAoKVxuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGZpbGUoe1xuICBsYWJlbCxcbiAgZGlyZWN0b3J5LFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvbixcbiAgcHVibGljUGF0aCxcbiAgdHJhbnNmb3JtRmlsZW5hbWVcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdhc3NldCcsXG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEZpbGVGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1GaWxlbmFtZTogdHJhbnNmb3JtRmlsZW5hbWUsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZmlsZW5hbWUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlLCBhcmdzKSB7XG4gICAgICB2YXIgX3ZhbHVlJG1hdGNoJCwgX3ZhbHVlJG1hdGNoO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmdzLmFzc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBhcmdzLmFzc2V0LFxuICAgICAgICBmaWxlbmFtZTogdmFsdWUuc2xpY2UoZ2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1ZykubGVuZ3RoKSxcbiAgICAgICAgZXh0ZW5zaW9uOiAoX3ZhbHVlJG1hdGNoJCA9IChfdmFsdWUkbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFwuKFteLl0rJCkvKSkgPT09IG51bGwgfHwgX3ZhbHVlJG1hdGNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWUkbWF0Y2hbMV0pICE9PSBudWxsICYmIF92YWx1ZSRtYXRjaCQgIT09IHZvaWQgMCA/IF92YWx1ZSRtYXRjaCQgOiAnJ1xuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGFzc2V0OiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCA/IGFyZ3Muc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXggKyAnLicgKyB2YWx1ZS5leHRlbnNpb24gOiB2YWx1ZS5maWxlbmFtZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBgJHtnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKX0ke2ZpbGVuYW1lfWAsXG4gICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudDogdmFsdWUuZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgZGlyZWN0b3J5OiBkaXJlY3RvcnkgPyBmaXhQYXRoKGRpcmVjdG9yeSkgOiB1bmRlZmluZWQsXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcbiAgICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBpbWFnZSh7XG4gIGxhYmVsLFxuICBkaXJlY3RvcnksXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uLFxuICBwdWJsaWNQYXRoLFxuICB0cmFuc2Zvcm1GaWxlbmFtZVxufSkge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ2Fzc2V0JyxcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goSW1hZ2VGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICB0cmFuc2Zvcm1GaWxlbmFtZTogdHJhbnNmb3JtRmlsZW5hbWUsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZmlsZW5hbWUodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5zbGljZShnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlLCBhcmdzKSB7XG4gICAgICB2YXIgX3ZhbHVlJG1hdGNoJCwgX3ZhbHVlJG1hdGNoO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmdzLmFzc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBhcmdzLmFzc2V0LFxuICAgICAgICBmaWxlbmFtZTogdmFsdWUuc2xpY2UoZ2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1ZykubGVuZ3RoKSxcbiAgICAgICAgZXh0ZW5zaW9uOiAoX3ZhbHVlJG1hdGNoJCA9IChfdmFsdWUkbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFwuKFteLl0rJCkvKSkgPT09IG51bGwgfHwgX3ZhbHVlJG1hdGNoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsdWUkbWF0Y2hbMV0pICE9PSBudWxsICYmIF92YWx1ZSRtYXRjaCQgIT09IHZvaWQgMCA/IF92YWx1ZSRtYXRjaCQgOiAnJ1xuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGFzc2V0OiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYXJncy5zdWdnZXN0ZWRGaWxlbmFtZVByZWZpeCA/IGFyZ3Muc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXggKyAnLicgKyB2YWx1ZS5leHRlbnNpb24gOiB2YWx1ZS5maWxlbmFtZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBgJHtnZXRTcmNQcmVmaXgocHVibGljUGF0aCwgYXJncy5zbHVnKX0ke2ZpbGVuYW1lfWAsXG4gICAgICAgIGFzc2V0OiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudDogdmFsdWUuZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgZGlyZWN0b3J5OiBkaXJlY3RvcnkgPyBmaXhQYXRoKGRpcmVjdG9yeSkgOiB1bmRlZmluZWQsXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcbiAgICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBwbHVyYWxpemUoY291bnQsIG9wdGlvbnMpIHtcbiAgY29uc3Qge1xuICAgIHNpbmd1bGFyLFxuICAgIHBsdXJhbCA9IHNpbmd1bGFyICsgJ3MnLFxuICAgIGluY2x1c2l2ZSA9IHRydWVcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHZhcmlhbnQgPSBjb3VudCA9PT0gMSA/IHNpbmd1bGFyIDogcGx1cmFsO1xuICByZXR1cm4gaW5jbHVzaXZlID8gYCR7Y291bnR9ICR7dmFyaWFudH1gIDogdmFyaWFudDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVNdWx0aVJlbGF0aW9uc2hpcExlbmd0aCh2YWxpZGF0aW9uLCB2YWx1ZSkge1xuICB2YXIgX3ZhbGlkYXRpb24kbGVuZ3RoJG1pLCBfdmFsaWRhdGlvbiRsZW5ndGgsIF92YWxpZGF0aW9uJGxlbmd0aCRtYSwgX3ZhbGlkYXRpb24kbGVuZ3RoMjtcbiAgY29uc3QgbWluTGVuZ3RoID0gKF92YWxpZGF0aW9uJGxlbmd0aCRtaSA9IHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwIHx8IChfdmFsaWRhdGlvbiRsZW5ndGggPSB2YWxpZGF0aW9uLmxlbmd0aCkgPT09IG51bGwgfHwgX3ZhbGlkYXRpb24kbGVuZ3RoID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsaWRhdGlvbiRsZW5ndGgubWluKSAhPT0gbnVsbCAmJiBfdmFsaWRhdGlvbiRsZW5ndGgkbWkgIT09IHZvaWQgMCA/IF92YWxpZGF0aW9uJGxlbmd0aCRtaSA6IDA7XG4gIGlmICh2YWx1ZS5sZW5ndGggPCBtaW5MZW5ndGgpIHtcbiAgICByZXR1cm4gYE11c3QgaGF2ZSBhdCBsZWFzdCAke3BsdXJhbGl6ZShtaW5MZW5ndGgsIHtcbiAgICAgIHNpbmd1bGFyOiAnaXRlbSdcbiAgICB9KX0uYDtcbiAgfVxuICBjb25zdCBtYXhMZW5ndGggPSAoX3ZhbGlkYXRpb24kbGVuZ3RoJG1hID0gdmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgfHwgKF92YWxpZGF0aW9uJGxlbmd0aDIgPSB2YWxpZGF0aW9uLmxlbmd0aCkgPT09IG51bGwgfHwgX3ZhbGlkYXRpb24kbGVuZ3RoMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbGlkYXRpb24kbGVuZ3RoMi5tYXgpICE9PSBudWxsICYmIF92YWxpZGF0aW9uJGxlbmd0aCRtYSAhPT0gdm9pZCAwID8gX3ZhbGlkYXRpb24kbGVuZ3RoJG1hIDogSW5maW5pdHk7XG4gIGlmICh2YWx1ZS5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICByZXR1cm4gYE11c3QgaGF2ZSBhdCBtb3N0ICR7cGx1cmFsaXplKG1heExlbmd0aCwge1xuICAgICAgc2luZ3VsYXI6ICdpdGVtJ1xuICAgIH0pfS5gO1xuICB9XG59XG5cbmZ1bmN0aW9uIG11bHRpUmVsYXRpb25zaGlwKHtcbiAgbGFiZWwsXG4gIGNvbGxlY3Rpb24sXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KE11bHRpUmVsYXRpb25zaGlwSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8ICF2YWx1ZS5ldmVyeShpc1N0cmluZykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHZhbGlkYXRlTXVsdGlSZWxhdGlvbnNoaXBMZW5ndGgodmFsaWRhdGlvbiwgdmFsdWUpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG11bHRpc2VsZWN0KHtcbiAgbGFiZWwsXG4gIG9wdGlvbnMsXG4gIGRlZmF1bHRWYWx1ZSA9IFtdLFxuICBkZXNjcmlwdGlvblxufSkge1xuICBjb25zdCB2YWx1ZXNUb09wdGlvbiA9IG5ldyBNYXAob3B0aW9ucy5tYXAoeCA9PiBbeC52YWx1ZSwgeF0pKTtcbiAgY29uc3QgZmllbGQgPSBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KE11bHRpc2VsZWN0RmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhbiBhcnJheSBvZiBvcHRpb25zJyk7XG4gICAgICB9XG4gICAgICBpZiAoIXZhbHVlLmV2ZXJ5KHggPT4gdHlwZW9mIHggPT09ICdzdHJpbmcnICYmIHZhbHVlc1RvT3B0aW9uLmhhcyh4KSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKGBNdXN0IGJlIGFuIGFycmF5IHdpdGggb25lIG9mICR7b3B0aW9ucy5tYXAoeCA9PiB4LnZhbHVlKS5qb2luKCcsICcpfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5maWVsZCxcbiAgICBvcHRpb25zXG4gIH07XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKHZhbGlkYXRpb24sIHZhbHVlLCBzdGVwLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhIG51bWJlcmA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1pbikgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA8IHZhbGlkYXRpb24ubWluKSB7XG4gICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYXQgbGVhc3QgJHt2YWxpZGF0aW9uLm1pbn1gO1xuICAgIH1cbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5tYXgpICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPiB2YWxpZGF0aW9uLm1heCkge1xuICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGF0IG1vc3QgJHt2YWxpZGF0aW9uLm1heH1gO1xuICAgIH1cbiAgICBpZiAoc3RlcCAhPT0gdW5kZWZpbmVkICYmICh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24udmFsaWRhdGVTdGVwKSAhPT0gdW5kZWZpbmVkICYmICFpc0F0U3RlcCh2YWx1ZSwgc3RlcCkpIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7c3RlcH1gO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZGVjaW1hbFBsYWNlcyh2YWx1ZSkge1xuICBjb25zdCBzdHJpbmdpZmllZCA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gIGNvbnN0IGluZGV4T2ZEZWNpbWFsID0gc3RyaW5naWZpZWQuaW5kZXhPZignLicpO1xuICBpZiAoaW5kZXhPZkRlY2ltYWwgPT09IC0xKSB7XG4gICAgY29uc3QgaW5kZXhPZkUgPSBzdHJpbmdpZmllZC5pbmRleE9mKCdlLScpO1xuICAgIHJldHVybiBpbmRleE9mRSA9PT0gLTEgPyAwIDogcGFyc2VJbnQoc3RyaW5naWZpZWQuc2xpY2UoaW5kZXhPZkUgKyAyKSk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ2lmaWVkLmxlbmd0aCAtIGluZGV4T2ZEZWNpbWFsIC0gMTtcbn1cbmZ1bmN0aW9uIGlzQXRTdGVwKHZhbHVlLCBzdGVwKSB7XG4gIGNvbnN0IGRjID0gTWF0aC5tYXgoZGVjaW1hbFBsYWNlcyhzdGVwKSwgZGVjaW1hbFBsYWNlcyh2YWx1ZSkpO1xuICBjb25zdCBiYXNlID0gTWF0aC5wb3coMTAsIGRjKTtcbiAgcmV0dXJuIHZhbHVlICogYmFzZSAlIChzdGVwICogYmFzZSkgPT09IDA7XG59XG5cbmZ1bmN0aW9uIG51bWJlcih7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHN0ZXAsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KE51bWJlckZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIHN0ZXA6IHN0ZXAsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgIT09IG51bGwgJiYgZGVmYXVsdFZhbHVlICE9PSB2b2lkIDAgPyBkZWZhdWx0VmFsdWUgOiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHZhbGlkYXRlTnVtYmVyKHZhbGlkYXRpb24sIHZhbHVlLCBzdGVwLCBsYWJlbCk7XG4gICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHBhdGhSZWZlcmVuY2Uoe1xuICBsYWJlbCxcbiAgcGF0dGVybixcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUGF0aFJlZmVyZW5jZUlucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgcGF0dGVybjogcGF0dGVybixcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbGF0aW9uc2hpcCh7XG4gIGxhYmVsLFxuICBjb2xsZWN0aW9uLFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChSZWxhdGlvbnNoaXBJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZVNsdWdGaWVsZEFzTm9ybWFsRmllbGQodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJycsXG4gICAgICBzbHVnOiAnJ1xuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gb2JqZWN0Jyk7XG4gIH1cbiAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggIT09IDIpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ1VuZXhwZWN0ZWQga2V5cycpO1xuICB9XG4gIGlmICghKCduYW1lJyBpbiB2YWx1ZSkgfHwgISgnc2x1ZycgaW4gdmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNaXNzaW5nIG5hbWUgb3Igc2x1ZycpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUubmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ25hbWUgbXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUuc2x1ZyAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ3NsdWcgbXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIHJldHVybiB7XG4gICAgbmFtZTogdmFsdWUubmFtZSxcbiAgICBzbHVnOiB2YWx1ZS5zbHVnXG4gIH07XG59XG5mdW5jdGlvbiBwYXJzZUFzU2x1Z0ZpZWxkKHZhbHVlLCBzbHVnKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc2x1Z1xuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG5hbWU6IHZhbHVlLFxuICAgIHNsdWdcbiAgfTtcbn1cbmZ1bmN0aW9uIHNsdWcoX2FyZ3MpIHtcbiAgdmFyIF9hcmdzJG5hbWUkdmFsaWRhdGlvbiwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMywgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNSwgX2FyZ3Mkc2x1ZztcbiAgY29uc3QgYXJncyA9IHtcbiAgICAuLi5fYXJncyxcbiAgICBuYW1lOiB7XG4gICAgICAuLi5fYXJncy5uYW1lLFxuICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICBwYXR0ZXJuOiAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uID0gX2FyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJG5hbWUkdmFsaWRhdGlvbi5wYXR0ZXJuLFxuICAgICAgICBsZW5ndGg6IHtcbiAgICAgICAgICBtaW46IE1hdGgubWF4KChfYXJncyRuYW1lJHZhbGlkYXRpb24yID0gX2FyZ3MubmFtZS52YWxpZGF0aW9uKSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJHZhbGlkYXRpb24yICE9PSB2b2lkIDAgJiYgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMi5pc1JlcXVpcmVkID8gMSA6IDAsIChfYXJncyRuYW1lJHZhbGlkYXRpb24zID0gKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPSBfYXJncy5uYW1lLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPT09IHZvaWQgMCB8fCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCA9IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQubGVuZ3RoKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb240ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRuYW1lJHZhbGlkYXRpb240Lm1pbikgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMyAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMyA6IDApLFxuICAgICAgICAgIG1heDogKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjUgPSBfYXJncy5uYW1lLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjUgPT09IHZvaWQgMCB8fCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNSA9IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjUubGVuZ3RoKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb241ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRuYW1lJHZhbGlkYXRpb241Lm1heFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBuYWl2ZUdlbmVyYXRlU2x1ZyA9ICgoX2FyZ3Mkc2x1ZyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3Mkc2x1Zy5nZW5lcmF0ZSkgfHwgc2x1Z2lmeTtcbiAgbGV0IF9kZWZhdWx0VmFsdWU7XG4gIGZ1bmN0aW9uIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICBpZiAoIV9kZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciBfYXJncyRuYW1lJGRlZmF1bHRWYWwsIF9hcmdzJG5hbWUkZGVmYXVsdFZhbDI7XG4gICAgICBfZGVmYXVsdFZhbHVlID0ge1xuICAgICAgICBuYW1lOiAoX2FyZ3MkbmFtZSRkZWZhdWx0VmFsID0gYXJncy5uYW1lLmRlZmF1bHRWYWx1ZSkgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSRkZWZhdWx0VmFsICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJGRlZmF1bHRWYWwgOiAnJyxcbiAgICAgICAgc2x1ZzogbmFpdmVHZW5lcmF0ZVNsdWcoKF9hcmdzJG5hbWUkZGVmYXVsdFZhbDIgPSBhcmdzLm5hbWUuZGVmYXVsdFZhbHVlKSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJGRlZmF1bHRWYWwyICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJGRlZmF1bHRWYWwyIDogJycpXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRWYWx1ZTtcbiAgfVxuICBmdW5jdGlvbiB2YWxpZGF0ZSh2YWx1ZSwge1xuICAgIHNsdWdGaWVsZFxuICB9ID0ge1xuICAgIHNsdWdGaWVsZDogdW5kZWZpbmVkXG4gIH0pIHtcbiAgICB2YXIgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNiwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNywgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOCwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOSwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMTAsIF9hcmdzJHNsdWckdmFsaWRhdGlvbiwgX2FyZ3Mkc2x1ZzIsIF9hcmdzJHNsdWckdmFsaWRhdGlvbjIsIF9hcmdzJHNsdWczLCBfYXJncyRzbHVnJGxhYmVsLCBfYXJncyRzbHVnNCwgX2FyZ3Mkc2x1ZzU7XG4gICAgY29uc3QgbmFtZU1lc3NhZ2UgPSB2YWxpZGF0ZVRleHQodmFsdWUubmFtZSwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjYgPSAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNyA9IGFyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb243ID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjcgPSBfYXJncyRuYW1lJHZhbGlkYXRpb243Lmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNy5taW4pICE9PSBudWxsICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjYgIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjYgOiAwLCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOCA9IChfYXJncyRuYW1lJHZhbGlkYXRpb245ID0gYXJncy5uYW1lLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjkgPT09IHZvaWQgMCB8fCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOSA9IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjkubGVuZ3RoKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb245ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRuYW1lJHZhbGlkYXRpb245Lm1heCkgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOCAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOCA6IEluZmluaXR5LCBhcmdzLm5hbWUubGFiZWwsIHVuZGVmaW5lZCwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjEwID0gYXJncy5uYW1lLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRuYW1lJHZhbGlkYXRpb24xMC5wYXR0ZXJuKTtcbiAgICBpZiAobmFtZU1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG5hbWVNZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3Qgc2x1Z01lc3NhZ2UgPSB2YWxpZGF0ZVRleHQodmFsdWUuc2x1ZywgKF9hcmdzJHNsdWckdmFsaWRhdGlvbiA9IChfYXJncyRzbHVnMiA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzIgPSBfYXJncyRzbHVnMi52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMiA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMiA9IF9hcmdzJHNsdWcyLmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWcyLm1pbikgIT09IG51bGwgJiYgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uICE9PSB2b2lkIDAgPyBfYXJncyRzbHVnJHZhbGlkYXRpb24gOiAxLCAoX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiA9IChfYXJncyRzbHVnMyA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzMgPSBfYXJncyRzbHVnMy52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnMyA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnMyA9IF9hcmdzJHNsdWczLmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWczLm1heCkgIT09IG51bGwgJiYgX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiAhPT0gdm9pZCAwID8gX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uMiA6IEluZmluaXR5LCAoX2FyZ3Mkc2x1ZyRsYWJlbCA9IChfYXJncyRzbHVnNCA9IGFyZ3Muc2x1ZykgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWc0LmxhYmVsKSAhPT0gbnVsbCAmJiBfYXJncyRzbHVnJGxhYmVsICE9PSB2b2lkIDAgPyBfYXJncyRzbHVnJGxhYmVsIDogJ1NsdWcnLCBzbHVnRmllbGQgPyBzbHVnRmllbGQgOiB7XG4gICAgICBzbHVnczogZW1wdHlTZXQsXG4gICAgICBnbG9iOiAnKidcbiAgICB9LCAoX2FyZ3Mkc2x1ZzUgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWc1ID09PSB2b2lkIDAgfHwgKF9hcmdzJHNsdWc1ID0gX2FyZ3Mkc2x1ZzUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWc1LnBhdHRlcm4pO1xuICAgIGlmIChzbHVnTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3Ioc2x1Z01lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgY29uc3QgZW1wdHlTZXQgPSBuZXcgU2V0KCk7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnc2x1ZycsXG4gICAgbGFiZWw6IGFyZ3MubmFtZS5sYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2x1Z0ZpZWxkSW5wdXQsIHtcbiAgICAgICAgYXJnczogYXJncyxcbiAgICAgICAgbmFpdmVHZW5lcmF0ZVNsdWc6IG5haXZlR2VuZXJhdGVTbHVnLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSgpLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUsXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICgoYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNsdWcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlQXNTbHVnRmllbGQodmFsdWUsIGFyZ3Muc2x1Zyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VTbHVnRmllbGRBc05vcm1hbEZpZWxkKHZhbHVlKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBzZXJpYWxpemVXaXRoU2x1Zyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlLm5hbWUsXG4gICAgICAgIHNsdWc6IHZhbHVlLnNsdWdcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlU2x1Z0ZpZWxkQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShwYXJzZWQpO1xuICAgICAgfSxcbiAgICAgIHBhcnNlV2l0aFNsdWcodmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHBhcnNlQXNTbHVnRmllbGQodmFsdWUsIGFyZ3Muc2x1ZyksIHtcbiAgICAgICAgICBzbHVnRmllbGQ6IHtcbiAgICAgICAgICAgIGdsb2I6IGFyZ3MuZ2xvYixcbiAgICAgICAgICAgIHNsdWdzOiBlbXB0eVNldFxuICAgICAgICAgIH1cbiAgICAgICAgfSkubmFtZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRVUkwodXJsKSB7XG4gIHJldHVybiB1cmwgPT09IHNhbml0aXplVXJsKHVybCk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVXJsKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgIWlzVmFsaWRVUkwodmFsdWUpKSkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgbm90IGEgdmFsaWQgVVJMYDtcbiAgfVxuICBpZiAodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyByZXF1aXJlZGA7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXJsKHtcbiAgbGFiZWwsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVXJsRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6IHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZVVybCh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpO1xuICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpZ25vcmVkKCkge1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBJbnB1dCgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGxhYmVsOiAnSWdub3JlZCcsXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYXJyYXk6IGFycmF5LFxuICBibG9ja3M6IGJsb2NrcyxcbiAgY2hlY2tib3g6IGNoZWNrYm94LFxuICBjaGlsZDogY2hpbGQsXG4gIGNsb3VkSW1hZ2U6IGNsb3VkSW1hZ2UsXG4gIGNvbmRpdGlvbmFsOiBjb25kaXRpb25hbCxcbiAgZGF0ZTogZGF0ZSxcbiAgZGF0ZXRpbWU6IGRhdGV0aW1lLFxuICBkb2N1bWVudDogZG9jdW1lbnQsXG4gIGVtcHR5OiBlbXB0eSxcbiAgZW1wdHlEb2N1bWVudDogZW1wdHlEb2N1bWVudCxcbiAgZW1wdHlDb250ZW50OiBlbXB0eUNvbnRlbnQsXG4gIGZpbGU6IGZpbGUsXG4gIGltYWdlOiBpbWFnZSxcbiAgaW50ZWdlcjogaW50ZWdlcixcbiAgbXVsdGlSZWxhdGlvbnNoaXA6IG11bHRpUmVsYXRpb25zaGlwLFxuICBtdWx0aXNlbGVjdDogbXVsdGlzZWxlY3QsXG4gIG51bWJlcjogbnVtYmVyLFxuICBvYmplY3Q6IG9iamVjdCxcbiAgcGF0aFJlZmVyZW5jZTogcGF0aFJlZmVyZW5jZSxcbiAgcmVsYXRpb25zaGlwOiByZWxhdGlvbnNoaXAsXG4gIHNlbGVjdDogc2VsZWN0LFxuICBzbHVnOiBzbHVnLFxuICB0ZXh0OiB0ZXh0LFxuICB1cmw6IHVybCxcbiAgaWdub3JlZDogaWdub3JlZCxcbiAgbWR4OiBtZHgsXG4gIG1hcmtkb2M6IG1hcmtkb2Ncbn0pO1xuXG5mdW5jdGlvbiBCbG9ja1dyYXBwZXIoKSB7fVxuZnVuY3Rpb24gTm90RWRpdGFibGUoKSB7fVxuZnVuY3Rpb24gVG9vbGJhclNlcGFyYXRvcigpIHt9XG5cbmV4cG9ydCB7IEJsb2NrV3JhcHBlciwgTm90RWRpdGFibGUsIFRvb2xiYXJTZXBhcmF0b3IsIGNvbGxlY3Rpb24sIGNvbmZpZywgaW5kZXggYXMgZmllbGRzLCBzaW5nbGV0b24gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/core/dist/keystatic-core.node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@keystatic/next/dist/keystatic-next-ui-app.js":
/*!********************************************************************!*\
  !*** ./node_modules/@keystatic/next/dist/keystatic-next-ui-app.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makePage: () => (/* binding */ makePage)\n/* harmony export */ });\n/* harmony import */ var _keystatic_core_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @keystatic/core/ui */ \"(ssr)/./node_modules/@keystatic/core/dist/keystatic-core-ui.node.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n\n\n\nfunction makePage(config) {\n  return function Page() {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_keystatic_core_ui__WEBPACK_IMPORTED_MODULE_0__.Keystatic, {\n      config: config,\n      appSlug: appSlug\n    });\n  };\n}\nconst appSlug = {\n  envName: 'NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG',\n  value: process.env.NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9uZXh0L2Rpc3Qva2V5c3RhdGljLW5leHQtdWktYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQztBQUNQOztBQUV4QztBQUNBO0FBQ0Esd0JBQXdCLHNEQUFHLENBQUMseURBQVM7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvbmV4dC9kaXN0L2tleXN0YXRpYy1uZXh0LXVpLWFwcC5qcz9kOTg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleXN0YXRpYyB9IGZyb20gJ0BrZXlzdGF0aWMvY29yZS91aSc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbmZ1bmN0aW9uIG1ha2VQYWdlKGNvbmZpZykge1xuICByZXR1cm4gZnVuY3Rpb24gUGFnZSgpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChLZXlzdGF0aWMsIHtcbiAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgYXBwU2x1ZzogYXBwU2x1Z1xuICAgIH0pO1xuICB9O1xufVxuY29uc3QgYXBwU2x1ZyA9IHtcbiAgZW52TmFtZTogJ05FWFRfUFVCTElDX0tFWVNUQVRJQ19HSVRIVUJfQVBQX1NMVUcnLFxuICB2YWx1ZTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfS0VZU1RBVElDX0dJVEhVQl9BUFBfU0xVR1xufTtcblxuZXhwb3J0IHsgbWFrZVBhZ2UgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@keystatic/next/dist/keystatic-next-ui-app.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/api-b2cd9ecd.node.react-server.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/api-b2cd9ecd.node.react-server.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   c: () => (/* binding */ component)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n\n\n\n\n\n// this is written like this rather than ArrayField<ComponentSchema> to avoid TypeScript erroring about circularity\nfunction component(options) {\n  return options;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLWIyY2Q5ZWNkLm5vZGUucmVhY3Qtc2VydmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJCO0FBQ29CO0FBQ2hDO0FBQ2tCOztBQUVqQztBQUNBO0FBQ0E7QUFDQTs7QUFFMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvYXBpLWIyY2Q5ZWNkLm5vZGUucmVhY3Qtc2VydmVyLmpzPzk1MWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgJy4vaW5kZXgtYjJkZTliZTEubm9kZS5yZWFjdC1zZXJ2ZXIuanMnO1xuaW1wb3J0ICdlbWVyeSc7XG5pbXBvcnQgJ0BicmFpbnRyZWUvc2FuaXRpemUtdXJsJztcblxuLy8gdGhpcyBpcyB3cml0dGVuIGxpa2UgdGhpcyByYXRoZXIgdGhhbiBBcnJheUZpZWxkPENvbXBvbmVudFNjaGVtYT4gdG8gYXZvaWQgVHlwZVNjcmlwdCBlcnJvcmluZyBhYm91dCBjaXJjdWxhcml0eVxuZnVuY3Rpb24gY29tcG9uZW50KG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmV4cG9ydCB7IGNvbXBvbmVudCBhcyBjIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/api-b2cd9ecd.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/generic-0d618209.node.react-server.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/generic-0d618209.node.react-server.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("var react__WEBPACK_IMPORTED_MODULE_6___namespace_cache;\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ cache),\n/* harmony export */   c: () => (/* binding */ collectionReader),\n/* harmony export */   s: () => (/* binding */ singletonReader)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-yaml */ \"(rsc)/./node_modules/js-yaml/dist/js-yaml.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react.js\");\n\n\n\n\n\n\n\n\nconst getInitialPropsValue = _getInitialPropsValue;\nfunction _getInitialPropsValue(schema) {\n  switch (schema.kind) {\n    case 'form':\n      return schema.defaultValue();\n    case 'child':\n      return schema.options.kind === 'block' ? [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }] : null;\n    case 'conditional':\n      {\n        const defaultValue = schema.discriminant.defaultValue();\n        return {\n          discriminant: defaultValue,\n          value: getInitialPropsValue(schema.values[defaultValue.toString()])\n        };\n      }\n    case 'object':\n      {\n        const obj = {};\n        for (const key of Object.keys(schema.fields)) {\n          obj[key] = getInitialPropsValue(schema.fields[key]);\n        }\n        return obj;\n      }\n    case 'array':\n      {\n        return [];\n      }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_2__.assertNever)(schema);\n}\n\nfunction validateArrayLength(schema, val, path) {\n  var _schema$validation, _schema$validation2;\n  if (((_schema$validation = schema.validation) === null || _schema$validation === void 0 || (_schema$validation = _schema$validation.length) === null || _schema$validation === void 0 ? void 0 : _schema$validation.min) !== undefined && val.length < schema.validation.length.min) {\n    return new PropValidationError(new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F(`Must have at least ${schema.validation.length.min} element${schema.validation.length.min === 1 ? '' : 's'}`), path, schema);\n  }\n  if (((_schema$validation2 = schema.validation) === null || _schema$validation2 === void 0 || (_schema$validation2 = _schema$validation2.length) === null || _schema$validation2 === void 0 ? void 0 : _schema$validation2.max) !== undefined && val.length > schema.validation.length.max) {\n    return new PropValidationError(new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F(`Must have at most ${schema.validation.length.max} element${schema.validation.length.max === 1 ? '' : 's'}}`), path, schema);\n  }\n}\n\nclass PropValidationError extends Error {\n  constructor(cause, path, schema) {\n    super(`field error at ${path.join('.')}`, {\n      cause\n    });\n    this.path = path;\n    this.schema = schema;\n    this.cause = cause;\n  }\n}\nfunction toFormFieldStoredValue(val) {\n  if (val === null) {\n    return undefined;\n  }\n  return val;\n}\nconst isArray = Array.isArray;\nfunction parseProps(schema, _value, path, pathWithArrayFieldSlugs, parseFormField, /** This should be true for the reader and false elsewhere */\nvalidateArrayFieldLength) {\n  let value = toFormFieldStoredValue(_value);\n  if (schema.kind === 'form') {\n    try {\n      return parseFormField(schema, value, path, pathWithArrayFieldSlugs);\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n  }\n  if (schema.kind === 'child') {\n    return null;\n  }\n  if (schema.kind === 'conditional') {\n    if (value === undefined) {\n      return getInitialPropsValue(schema);\n    }\n    try {\n      if (typeof value !== 'object' || value === null || isArray(value) || value instanceof Date) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F('Must be an object');\n      }\n      for (const key of Object.keys(value)) {\n        if (key !== 'discriminant' && key !== 'value') {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F(`Must only contain keys \"discriminant\" and \"value\", not \"${key}\"`);\n        }\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const parsedDiscriminant = parseProps(schema.discriminant, value.discriminant, path.concat('discriminant'), pathWithArrayFieldSlugs.concat('discriminant'), parseFormField, validateArrayFieldLength);\n    return {\n      discriminant: parsedDiscriminant,\n      value: parseProps(schema.values[parsedDiscriminant], value.value, path.concat('value'), pathWithArrayFieldSlugs.concat('value'), parseFormField, validateArrayFieldLength)\n    };\n  }\n  if (schema.kind === 'object') {\n    if (value === undefined) {\n      value = {};\n    }\n    try {\n      if (typeof value !== 'object' || value === null || isArray(value) || value instanceof Date) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F('Must be an object');\n      }\n      const allowedKeysSet = new Set(Object.keys(schema.fields));\n      for (const key of Object.keys(value)) {\n        if (!allowedKeysSet.has(key)) {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F(`Key on object value \"${key}\" is not allowed`);\n        }\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const val = {};\n    const errors = [];\n    for (const key of Object.keys(schema.fields)) {\n      let individualVal = value[key];\n      try {\n        const propVal = parseProps(schema.fields[key], individualVal, path.concat(key), pathWithArrayFieldSlugs.concat(key), parseFormField, validateArrayFieldLength);\n        val[key] = propVal;\n      } catch (err) {\n        errors.push(err);\n      }\n    }\n    if (errors.length) {\n      throw new AggregateError(errors);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    if (value === undefined) {\n      return [];\n    }\n    try {\n      if (!isArray(value)) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F('Must be an array');\n      }\n    } catch (err) {\n      throw new PropValidationError(err, path, schema);\n    }\n    const errors = [];\n    try {\n      if (validateArrayFieldLength) {\n        const error = validateArrayLength(schema, value, path);\n        if (error !== undefined) {\n          errors.push(error);\n        }\n      }\n      return value.map((innerVal, i) => {\n        try {\n          let slug = i.toString();\n          if (schema.slugField && typeof innerVal === 'object' && innerVal !== null && !isArray(innerVal) && !(innerVal instanceof Date)) {\n            if (schema.element.kind !== 'object') {\n              throw new Error('slugField on array fields requires the an object field element');\n            }\n            const slugField = schema.element.fields[schema.slugField];\n            if (!slugField) {\n              throw new Error(`slugField \"${schema.slugField}\" does not exist on object field`);\n            }\n            if (slugField.kind !== 'form') {\n              throw new Error(`slugField \"${schema.slugField}\" is not a form field`);\n            }\n            if (slugField.formKind !== 'slug') {\n              throw new Error(`slugField \"${schema.slugField}\" is not a slug field`);\n            }\n            let parsedSlugFieldValue;\n            try {\n              parsedSlugFieldValue = slugField.parse(toFormFieldStoredValue(innerVal[schema.slugField]), undefined);\n            } catch (err) {\n              throw new AggregateError([err]);\n            }\n            slug = slugField.serializeWithSlug(parsedSlugFieldValue).slug;\n          }\n          return parseProps(schema.element, innerVal, path.concat(i), pathWithArrayFieldSlugs.concat(slug), parseFormField, validateArrayFieldLength);\n        } catch (err) {\n          errors.push(err);\n        }\n      });\n    } finally {\n      if (errors.length) {\n        throw new AggregateError(errors);\n      }\n    }\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_2__.assertNever)(schema);\n}\n\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction splitFrontmatter(data) {\n  const str = textDecoder.decode(data);\n  const match = str.match(/^---(?:\\r?\\n([^]*?))?\\r?\\n---\\r?\\n?/);\n  if (match) {\n    var _match$;\n    const encoded = textEncoder.encode(match[0]);\n    return {\n      frontmatter: (_match$ = match[1]) !== null && _match$ !== void 0 ? _match$ : '',\n      content: data.slice(encoded.byteLength)\n    };\n  }\n  return null;\n}\nfunction loadDataFile(data, formatInfo, requireFrontmatter = false) {\n  const parse = formatInfo.data === 'json' ? JSON.parse : js_yaml__WEBPACK_IMPORTED_MODULE_5__.load;\n  if (!formatInfo.contentField) {\n    const dataFile = textDecoder.decode(data);\n    return {\n      loaded: parse(dataFile)\n    };\n  }\n  const res = splitFrontmatter(data);\n  if (requireFrontmatter && !res) {\n    throw new Error('Frontmatter not found');\n  }\n  return {\n    loaded: res === null ? {} : parse(res.frontmatter),\n    extraFakeFile: {\n      path: `${formatInfo.contentField.path.join('/')}${formatInfo.contentField.contentExtension}`,\n      contents: res === null ? data : res.content\n    }\n  };\n}\n\nfunction cache$1(func) {\n  return func;\n}\n\n// we conditionally using it since it's not actually in stable react releases yet\n// (though it should be unnecessary since this file is only imported in react-server environments anyway)\n// it's a function because some tools try to be smart with accessing things on namespace imports\n// and error at build time if you try to read an export that doesn't exist on a namespace object\nfunction getCache(react) {\n  var _react$cache;\n  return (_react$cache = react.cache) !== null && _react$cache !== void 0 ? _react$cache : cache$1;\n}\nconst cache = getCache(/*#__PURE__*/ (react__WEBPACK_IMPORTED_MODULE_6___namespace_cache || (react__WEBPACK_IMPORTED_MODULE_6___namespace_cache = __webpack_require__.t(react__WEBPACK_IMPORTED_MODULE_6__, 2))));\n\nfunction flattenErrors(error) {\n  if (error instanceof AggregateError) {\n    return error.errors.flatMap(flattenErrors);\n  }\n  return [error];\n}\nfunction formatFormDataError(error) {\n  const flatErrors = flattenErrors(error);\n  return flatErrors.map(error => {\n    if (error instanceof PropValidationError) {\n      const path = error.path.join('.');\n      return `${path}: ${error.cause instanceof _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.F ? error.cause.message : `Unexpected error: ${error.cause}`}`;\n    }\n    return `Unexpected error: ${error}`;\n  }).join('\\n');\n}\n\nasync function getAllEntries(parent, fsReader) {\n  return (await Promise.all((await fsReader.readdir(parent)).map(async dirent => {\n    const name = `${parent}${dirent.name}`;\n    const entry = {\n      entry: dirent,\n      name\n    };\n    if (dirent.kind === 'directory') {\n      return [entry, ...(await getAllEntries(`${name}/`, fsReader))];\n    }\n    return entry;\n  }))).flat();\n}\nconst listCollection = cache(async function listCollection(collectionPath, glob, formatInfo, extension, fsReader) {\n  const entries = glob === '*' ? (await fsReader.readdir(collectionPath)).map(entry => ({\n    entry,\n    name: entry.name\n  })) : (await getAllEntries(`${collectionPath}/`, fsReader)).map(x => ({\n    entry: x.entry,\n    name: x.name.slice(collectionPath.length + 1)\n  }));\n  return (await Promise.all(entries.map(async x => {\n    if (formatInfo.dataLocation === 'index') {\n      if (x.entry.kind !== 'directory') return [];\n      if (!(await fsReader.fileExists((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.j)(`${collectionPath}/${x.name}`, formatInfo)))) {\n        return [];\n      }\n      return [x.name];\n    } else {\n      if (x.entry.kind !== 'file' || !x.name.endsWith(extension)) {\n        return [];\n      }\n      return [x.name.slice(0, -extension.length)];\n    }\n  }))).flat();\n});\nfunction collectionReader(collection, config, fsReader) {\n  const formatInfo = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.l)(config, collection);\n  const collectionPath = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(config, collection);\n  const collectionConfig = config.collections[collection];\n  const schema = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.o)(collectionConfig.schema);\n  const glob = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.n)(config, collection);\n  const extension = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.p)(formatInfo);\n  const read = (slug, ...args) => {\n    var _args$;\n    return readItem(schema, formatInfo, (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.q)(config, collection, slug), (_args$ = args[0]) === null || _args$ === void 0 ? void 0 : _args$.resolveLinkedFiles, `\"${slug}\" in collection \"${collection}\"`, fsReader, slug, collectionConfig.slugField, glob);\n  };\n  const list = () => listCollection(collectionPath, glob, formatInfo, extension, fsReader);\n  return {\n    read,\n    readOrThrow: async (...args) => {\n      const entry = await read(...args);\n      if (entry === null) {\n        throw new Error(`Entry \"${args[0]}\" not found in collection \"${collection}\"`);\n      }\n      return entry;\n    },\n    // TODO: this could drop the fs.stat call that list does for each item\n    // since we just immediately read it\n    all: async (...args) => {\n      const slugs = await list();\n      return (await Promise.all(slugs.map(async slug => {\n        const entry = await read(slug, args[0]);\n        if (entry === null) return [];\n        return [{\n          slug,\n          entry\n        }];\n      }))).flat();\n    },\n    list\n  };\n}\nconst readItem = cache(async function readItem(rootSchema, formatInfo, itemDir, resolveLinkedFiles, debugReference, fsReader, ...slugInfo) {\n  if (typeof slugInfo[0] === 'string') {\n    if (slugInfo[0].includes('\\\\')) return null;\n    const split = slugInfo[0].split('/');\n    if (slugInfo[2] === '*' && split.length !== 1) return null;\n    if (split.includes('..') || split.includes('.')) return null;\n  }\n  const dataFile = await fsReader.readFile((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.j)(itemDir, formatInfo));\n  if (dataFile === null) return null;\n  const {\n    loaded,\n    extraFakeFile\n  } = loadDataFile(dataFile, formatInfo);\n  const contentFieldPathsToEagerlyResolve = resolveLinkedFiles ? [] : undefined;\n  let validated;\n  try {\n    validated = parseProps(rootSchema, loaded, [], [], (schema, value, path, pathWithArrayFieldSlugs) => {\n      if (schema.formKind === 'asset' || schema.formKind === 'assets') {\n        return schema.reader.parse(value);\n      }\n      if (schema.formKind === 'content') {\n        contentFieldPathsToEagerlyResolve === null || contentFieldPathsToEagerlyResolve === void 0 || contentFieldPathsToEagerlyResolve.push(path);\n        return async () => {\n          let content;\n          const filename = pathWithArrayFieldSlugs.join('/') + schema.contentExtension;\n          if (filename === (extraFakeFile === null || extraFakeFile === void 0 ? void 0 : extraFakeFile.path)) {\n            content = extraFakeFile.contents;\n          } else {\n            var _await$fsReader$readF;\n            content = (_await$fsReader$readF = await fsReader.readFile(`${itemDir}/${filename}`)) !== null && _await$fsReader$readF !== void 0 ? _await$fsReader$readF : undefined;\n          }\n          return schema.reader.parse(value, {\n            content\n          });\n        };\n      }\n      if (path.length === 1 && slugInfo[0] !== undefined) {\n        const [slug, slugField, glob] = slugInfo;\n        if (path[0] === slugField) {\n          if (schema.formKind !== 'slug') {\n            throw new Error(`Slug field ${slugInfo[1]} is not a slug field`);\n          }\n          return schema.reader.parseWithSlug(value, {\n            slug,\n            glob\n          });\n        }\n      }\n      return schema.reader.parse(value);\n    }, true);\n    if (contentFieldPathsToEagerlyResolve !== null && contentFieldPathsToEagerlyResolve !== void 0 && contentFieldPathsToEagerlyResolve.length) {\n      await Promise.all(contentFieldPathsToEagerlyResolve.map(async path => {\n        const parentValue = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.k)(validated, path.slice(0, -1));\n        const keyOnParent = path[path.length - 1];\n        const originalValue = parentValue[keyOnParent];\n        parentValue[keyOnParent] = await originalValue();\n      }));\n    }\n  } catch (err) {\n    const formatted = formatFormDataError(err);\n    throw new Error(`Invalid data for ${debugReference}:\\n${formatted}`);\n  }\n  return validated;\n});\nfunction singletonReader(singleton, config, fsReader) {\n  const formatInfo = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.e)(config, singleton);\n  const singletonPath = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.h)(config, singleton);\n  const schema = (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.o)(config.singletons[singleton].schema);\n  const read = (...args) => {\n    var _args$2;\n    return readItem(schema, formatInfo, singletonPath, (_args$2 = args[0]) === null || _args$2 === void 0 ? void 0 : _args$2.resolveLinkedFiles, `singleton \"${singleton}\"`, fsReader, undefined);\n  };\n  return {\n    read,\n    readOrThrow: async (...opts) => {\n      const entry = await read(...opts);\n      if (entry === null) {\n        throw new Error(`Singleton \"${singleton}\" not found`);\n      }\n      return entry;\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvZ2VuZXJpYy0wZDYxODIwOS5ub2RlLnJlYWN0LXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEyQjtBQUNxUjtBQUM1UTtBQUNIO0FBQzJDO0FBQzdDO0FBQ0E7O0FBRS9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGtEQUFXO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG1FQUFjLHVCQUF1Qiw4QkFBOEIsU0FBUyw4Q0FBOEM7QUFDaks7QUFDQTtBQUNBLHVDQUF1QyxtRUFBYyxzQkFBc0IsOEJBQThCLFNBQVMsK0NBQStDO0FBQ2pLO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QixlQUFlO0FBQzNDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUVBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFjLDREQUE0RCxJQUFJO0FBQ2xHO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtRUFBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFv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O0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsYUFBYTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0Qix1RUFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esd0NBQXdDLGVBQWUsS0FBSyxVQUFVO0FBQ3RFO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxxQkFBcUIsdUVBQWtCO0FBQ3ZDLHdCQUF3Qix1RUFBZ0I7QUFDeEMsaUJBQWlCLHVFQUFNO0FBQ3ZCO0FBQ0E7QUFDQSwrSkFBK0osVUFBVTtBQUN6SztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsVUFBVTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVtRSIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9nZW5lcmljLTBkNjE4MjA5Lm5vZGUucmVhY3Qtc2VydmVyLmpzPzk1NjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyBqIGFzIGdldEVudHJ5RGF0YUZpbGVwYXRoLCBrIGFzIGdldFZhbHVlQXRQcm9wUGF0aCwgbCBhcyBnZXRDb2xsZWN0aW9uRm9ybWF0LCBjIGFzIGdldENvbGxlY3Rpb25QYXRoLCBvIGFzIG9iamVjdCwgbiBhcyBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24sIHAgYXMgZ2V0RGF0YUZpbGVFeHRlbnNpb24sIGUgYXMgZ2V0U2luZ2xldG9uRm9ybWF0LCBoIGFzIGdldFNpbmdsZXRvblBhdGgsIHEgYXMgZ2V0Q29sbGVjdGlvbkl0ZW1QYXRoIH0gZnJvbSAnLi9pbmRleC1iMmRlOWJlMS5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgeyBhc3NlcnROZXZlciB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0IHsgRiBhcyBGaWVsZERhdGFFcnJvciB9IGZyb20gJy4vaW5kZXgtMTBlYTUwZTIubm9kZS5yZWFjdC1zZXJ2ZXIuanMnO1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gJ2pzLXlhbWwnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBnZXRJbml0aWFsUHJvcHNWYWx1ZSA9IF9nZXRJbml0aWFsUHJvcHNWYWx1ZTtcbmZ1bmN0aW9uIF9nZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEpIHtcbiAgc3dpdGNoIChzY2hlbWEua2luZCkge1xuICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgcmV0dXJuIHNjaGVtYS5kZWZhdWx0VmFsdWUoKTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gc2NoZW1hLm9wdGlvbnMua2luZCA9PT0gJ2Jsb2NrJyA/IFt7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfV0gOiBudWxsO1xuICAgIGNhc2UgJ2NvbmRpdGlvbmFsJzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gc2NoZW1hLmRpc2NyaW1pbmFudC5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkaXNjcmltaW5hbnQ6IGRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogZ2V0SW5pdGlhbFByb3BzVmFsdWUoc2NoZW1hLnZhbHVlc1tkZWZhdWx0VmFsdWUudG9TdHJpbmcoKV0pXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBnZXRJbml0aWFsUHJvcHNWYWx1ZShzY2hlbWEuZmllbGRzW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUxlbmd0aChzY2hlbWEsIHZhbCwgcGF0aCkge1xuICB2YXIgX3NjaGVtYSR2YWxpZGF0aW9uLCBfc2NoZW1hJHZhbGlkYXRpb24yO1xuICBpZiAoKChfc2NoZW1hJHZhbGlkYXRpb24gPSBzY2hlbWEudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX3NjaGVtYSR2YWxpZGF0aW9uID09PSB2b2lkIDAgfHwgKF9zY2hlbWEkdmFsaWRhdGlvbiA9IF9zY2hlbWEkdmFsaWRhdGlvbi5sZW5ndGgpID09PSBudWxsIHx8IF9zY2hlbWEkdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSR2YWxpZGF0aW9uLm1pbikgIT09IHVuZGVmaW5lZCAmJiB2YWwubGVuZ3RoIDwgc2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1pbikge1xuICAgIHJldHVybiBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihuZXcgRmllbGREYXRhRXJyb3IoYE11c3QgaGF2ZSBhdCBsZWFzdCAke3NjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5taW59IGVsZW1lbnQke3NjaGVtYS52YWxpZGF0aW9uLmxlbmd0aC5taW4gPT09IDEgPyAnJyA6ICdzJ31gKSwgcGF0aCwgc2NoZW1hKTtcbiAgfVxuICBpZiAoKChfc2NoZW1hJHZhbGlkYXRpb24yID0gc2NoZW1hLnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9zY2hlbWEkdmFsaWRhdGlvbjIgPT09IHZvaWQgMCB8fCAoX3NjaGVtYSR2YWxpZGF0aW9uMiA9IF9zY2hlbWEkdmFsaWRhdGlvbjIubGVuZ3RoKSA9PT0gbnVsbCB8fCBfc2NoZW1hJHZhbGlkYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2NoZW1hJHZhbGlkYXRpb24yLm1heCkgIT09IHVuZGVmaW5lZCAmJiB2YWwubGVuZ3RoID4gc2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heCkge1xuICAgIHJldHVybiBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihuZXcgRmllbGREYXRhRXJyb3IoYE11c3QgaGF2ZSBhdCBtb3N0ICR7c2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heH0gZWxlbWVudCR7c2NoZW1hLnZhbGlkYXRpb24ubGVuZ3RoLm1heCA9PT0gMSA/ICcnIDogJ3MnfX1gKSwgcGF0aCwgc2NoZW1hKTtcbiAgfVxufVxuXG5jbGFzcyBQcm9wVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihjYXVzZSwgcGF0aCwgc2NoZW1hKSB7XG4gICAgc3VwZXIoYGZpZWxkIGVycm9yIGF0ICR7cGF0aC5qb2luKCcuJyl9YCwge1xuICAgICAgY2F1c2VcbiAgICB9KTtcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuZnVuY3Rpb24gdG9Gb3JtRmllbGRTdG9yZWRWYWx1ZSh2YWwpIHtcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gcGFyc2VQcm9wcyhzY2hlbWEsIF92YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MsIHBhcnNlRm9ybUZpZWxkLCAvKiogVGhpcyBzaG91bGQgYmUgdHJ1ZSBmb3IgdGhlIHJlYWRlciBhbmQgZmFsc2UgZWxzZXdoZXJlICovXG52YWxpZGF0ZUFycmF5RmllbGRMZW5ndGgpIHtcbiAgbGV0IHZhbHVlID0gdG9Gb3JtRmllbGRTdG9yZWRWYWx1ZShfdmFsdWUpO1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdmb3JtJykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gcGFyc2VGb3JtRmllbGQoc2NoZW1hLCB2YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IFByb3BWYWxpZGF0aW9uRXJyb3IoZXJyLCBwYXRoLCBzY2hlbWEpO1xuICAgIH1cbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGdldEluaXRpYWxQcm9wc1ZhbHVlKHNjaGVtYSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCBpc0FycmF5KHZhbHVlKSB8fCB2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgIGlmIChrZXkgIT09ICdkaXNjcmltaW5hbnQnICYmIGtleSAhPT0gJ3ZhbHVlJykge1xuICAgICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihgTXVzdCBvbmx5IGNvbnRhaW4ga2V5cyBcImRpc2NyaW1pbmFudFwiIGFuZCBcInZhbHVlXCIsIG5vdCBcIiR7a2V5fVwiYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBQcm9wVmFsaWRhdGlvbkVycm9yKGVyciwgcGF0aCwgc2NoZW1hKTtcbiAgICB9XG4gICAgY29uc3QgcGFyc2VkRGlzY3JpbWluYW50ID0gcGFyc2VQcm9wcyhzY2hlbWEuZGlzY3JpbWluYW50LCB2YWx1ZS5kaXNjcmltaW5hbnQsIHBhdGguY29uY2F0KCdkaXNjcmltaW5hbnQnKSwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MuY29uY2F0KCdkaXNjcmltaW5hbnQnKSwgcGFyc2VGb3JtRmllbGQsIHZhbGlkYXRlQXJyYXlGaWVsZExlbmd0aCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc2NyaW1pbmFudDogcGFyc2VkRGlzY3JpbWluYW50LFxuICAgICAgdmFsdWU6IHBhcnNlUHJvcHMoc2NoZW1hLnZhbHVlc1twYXJzZWREaXNjcmltaW5hbnRdLCB2YWx1ZS52YWx1ZSwgcGF0aC5jb25jYXQoJ3ZhbHVlJyksIHBhdGhXaXRoQXJyYXlGaWVsZFNsdWdzLmNvbmNhdCgndmFsdWUnKSwgcGFyc2VGb3JtRmllbGQsIHZhbGlkYXRlQXJyYXlGaWVsZExlbmd0aClcbiAgICB9O1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsdWUgPSB7fTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsIHx8IGlzQXJyYXkodmFsdWUpIHx8IHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICB9XG4gICAgICBjb25zdCBhbGxvd2VkS2V5c1NldCA9IG5ldyBTZXQoT2JqZWN0LmtleXMoc2NoZW1hLmZpZWxkcykpO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgIGlmICghYWxsb3dlZEtleXNTZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoYEtleSBvbiBvYmplY3QgdmFsdWUgXCIke2tleX1cIiBpcyBub3QgYWxsb3dlZGApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgUHJvcFZhbGlkYXRpb25FcnJvcihlcnIsIHBhdGgsIHNjaGVtYSk7XG4gICAgfVxuICAgIGNvbnN0IHZhbCA9IHt9O1xuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpKSB7XG4gICAgICBsZXQgaW5kaXZpZHVhbFZhbCA9IHZhbHVlW2tleV07XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcm9wVmFsID0gcGFyc2VQcm9wcyhzY2hlbWEuZmllbGRzW2tleV0sIGluZGl2aWR1YWxWYWwsIHBhdGguY29uY2F0KGtleSksIHBhdGhXaXRoQXJyYXlGaWVsZFNsdWdzLmNvbmNhdChrZXkpLCBwYXJzZUZvcm1GaWVsZCwgdmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKTtcbiAgICAgICAgdmFsW2tleV0gPSBwcm9wVmFsO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgaWYgKCFpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gYXJyYXknKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IG5ldyBQcm9wVmFsaWRhdGlvbkVycm9yKGVyciwgcGF0aCwgc2NoZW1hKTtcbiAgICB9XG4gICAgY29uc3QgZXJyb3JzID0gW107XG4gICAgdHJ5IHtcbiAgICAgIGlmICh2YWxpZGF0ZUFycmF5RmllbGRMZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0ZUFycmF5TGVuZ3RoKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoaW5uZXJWYWwsIGkpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgc2x1ZyA9IGkudG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAoc2NoZW1hLnNsdWdGaWVsZCAmJiB0eXBlb2YgaW5uZXJWYWwgPT09ICdvYmplY3QnICYmIGlubmVyVmFsICE9PSBudWxsICYmICFpc0FycmF5KGlubmVyVmFsKSAmJiAhKGlubmVyVmFsIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZWxlbWVudC5raW5kICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NsdWdGaWVsZCBvbiBhcnJheSBmaWVsZHMgcmVxdWlyZXMgdGhlIGFuIG9iamVjdCBmaWVsZCBlbGVtZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzbHVnRmllbGQgPSBzY2hlbWEuZWxlbWVudC5maWVsZHNbc2NoZW1hLnNsdWdGaWVsZF07XG4gICAgICAgICAgICBpZiAoIXNsdWdGaWVsZCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNsdWdGaWVsZCBcIiR7c2NoZW1hLnNsdWdGaWVsZH1cIiBkb2VzIG5vdCBleGlzdCBvbiBvYmplY3QgZmllbGRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzbHVnRmllbGQua2luZCAhPT0gJ2Zvcm0nKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc2x1Z0ZpZWxkIFwiJHtzY2hlbWEuc2x1Z0ZpZWxkfVwiIGlzIG5vdCBhIGZvcm0gZmllbGRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzbHVnRmllbGQuZm9ybUtpbmQgIT09ICdzbHVnJykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNsdWdGaWVsZCBcIiR7c2NoZW1hLnNsdWdGaWVsZH1cIiBpcyBub3QgYSBzbHVnIGZpZWxkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyc2VkU2x1Z0ZpZWxkVmFsdWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBwYXJzZWRTbHVnRmllbGRWYWx1ZSA9IHNsdWdGaWVsZC5wYXJzZSh0b0Zvcm1GaWVsZFN0b3JlZFZhbHVlKGlubmVyVmFsW3NjaGVtYS5zbHVnRmllbGRdKSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IoW2Vycl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2x1ZyA9IHNsdWdGaWVsZC5zZXJpYWxpemVXaXRoU2x1ZyhwYXJzZWRTbHVnRmllbGRWYWx1ZSkuc2x1ZztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHBhcnNlUHJvcHMoc2NoZW1hLmVsZW1lbnQsIGlubmVyVmFsLCBwYXRoLmNvbmNhdChpKSwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MuY29uY2F0KHNsdWcpLCBwYXJzZUZvcm1GaWVsZCwgdmFsaWRhdGVBcnJheUZpZWxkTGVuZ3RoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3NlcnROZXZlcihzY2hlbWEpO1xufVxuXG5jb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmZ1bmN0aW9uIHNwbGl0RnJvbnRtYXR0ZXIoZGF0YSkge1xuICBjb25zdCBzdHIgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoZGF0YSk7XG4gIGNvbnN0IG1hdGNoID0gc3RyLm1hdGNoKC9eLS0tKD86XFxyP1xcbihbXl0qPykpP1xccj9cXG4tLS1cXHI/XFxuPy8pO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgX21hdGNoJDtcbiAgICBjb25zdCBlbmNvZGVkID0gdGV4dEVuY29kZXIuZW5jb2RlKG1hdGNoWzBdKTtcbiAgICByZXR1cm4ge1xuICAgICAgZnJvbnRtYXR0ZXI6IChfbWF0Y2gkID0gbWF0Y2hbMV0pICE9PSBudWxsICYmIF9tYXRjaCQgIT09IHZvaWQgMCA/IF9tYXRjaCQgOiAnJyxcbiAgICAgIGNvbnRlbnQ6IGRhdGEuc2xpY2UoZW5jb2RlZC5ieXRlTGVuZ3RoKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBsb2FkRGF0YUZpbGUoZGF0YSwgZm9ybWF0SW5mbywgcmVxdWlyZUZyb250bWF0dGVyID0gZmFsc2UpIHtcbiAgY29uc3QgcGFyc2UgPSBmb3JtYXRJbmZvLmRhdGEgPT09ICdqc29uJyA/IEpTT04ucGFyc2UgOiBsb2FkO1xuICBpZiAoIWZvcm1hdEluZm8uY29udGVudEZpZWxkKSB7XG4gICAgY29uc3QgZGF0YUZpbGUgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoZGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRlZDogcGFyc2UoZGF0YUZpbGUpXG4gICAgfTtcbiAgfVxuICBjb25zdCByZXMgPSBzcGxpdEZyb250bWF0dGVyKGRhdGEpO1xuICBpZiAocmVxdWlyZUZyb250bWF0dGVyICYmICFyZXMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zyb250bWF0dGVyIG5vdCBmb3VuZCcpO1xuICB9XG4gIHJldHVybiB7XG4gICAgbG9hZGVkOiByZXMgPT09IG51bGwgPyB7fSA6IHBhcnNlKHJlcy5mcm9udG1hdHRlciksXG4gICAgZXh0cmFGYWtlRmlsZToge1xuICAgICAgcGF0aDogYCR7Zm9ybWF0SW5mby5jb250ZW50RmllbGQucGF0aC5qb2luKCcvJyl9JHtmb3JtYXRJbmZvLmNvbnRlbnRGaWVsZC5jb250ZW50RXh0ZW5zaW9ufWAsXG4gICAgICBjb250ZW50czogcmVzID09PSBudWxsID8gZGF0YSA6IHJlcy5jb250ZW50XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjYWNoZSQxKGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmM7XG59XG5cbi8vIHdlIGNvbmRpdGlvbmFsbHkgdXNpbmcgaXQgc2luY2UgaXQncyBub3QgYWN0dWFsbHkgaW4gc3RhYmxlIHJlYWN0IHJlbGVhc2VzIHlldFxuLy8gKHRob3VnaCBpdCBzaG91bGQgYmUgdW5uZWNlc3Nhcnkgc2luY2UgdGhpcyBmaWxlIGlzIG9ubHkgaW1wb3J0ZWQgaW4gcmVhY3Qtc2VydmVyIGVudmlyb25tZW50cyBhbnl3YXkpXG4vLyBpdCdzIGEgZnVuY3Rpb24gYmVjYXVzZSBzb21lIHRvb2xzIHRyeSB0byBiZSBzbWFydCB3aXRoIGFjY2Vzc2luZyB0aGluZ3Mgb24gbmFtZXNwYWNlIGltcG9ydHNcbi8vIGFuZCBlcnJvciBhdCBidWlsZCB0aW1lIGlmIHlvdSB0cnkgdG8gcmVhZCBhbiBleHBvcnQgdGhhdCBkb2Vzbid0IGV4aXN0IG9uIGEgbmFtZXNwYWNlIG9iamVjdFxuZnVuY3Rpb24gZ2V0Q2FjaGUocmVhY3QpIHtcbiAgdmFyIF9yZWFjdCRjYWNoZTtcbiAgcmV0dXJuIChfcmVhY3QkY2FjaGUgPSByZWFjdC5jYWNoZSkgIT09IG51bGwgJiYgX3JlYWN0JGNhY2hlICE9PSB2b2lkIDAgPyBfcmVhY3QkY2FjaGUgOiBjYWNoZSQxO1xufVxuY29uc3QgY2FjaGUgPSBnZXRDYWNoZShSZWFjdCk7XG5cbmZ1bmN0aW9uIGZsYXR0ZW5FcnJvcnMoZXJyb3IpIHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgQWdncmVnYXRlRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3IuZXJyb3JzLmZsYXRNYXAoZmxhdHRlbkVycm9ycyk7XG4gIH1cbiAgcmV0dXJuIFtlcnJvcl07XG59XG5mdW5jdGlvbiBmb3JtYXRGb3JtRGF0YUVycm9yKGVycm9yKSB7XG4gIGNvbnN0IGZsYXRFcnJvcnMgPSBmbGF0dGVuRXJyb3JzKGVycm9yKTtcbiAgcmV0dXJuIGZsYXRFcnJvcnMubWFwKGVycm9yID0+IHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm9wVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICBjb25zdCBwYXRoID0gZXJyb3IucGF0aC5qb2luKCcuJyk7XG4gICAgICByZXR1cm4gYCR7cGF0aH06ICR7ZXJyb3IuY2F1c2UgaW5zdGFuY2VvZiBGaWVsZERhdGFFcnJvciA/IGVycm9yLmNhdXNlLm1lc3NhZ2UgOiBgVW5leHBlY3RlZCBlcnJvcjogJHtlcnJvci5jYXVzZX1gfWA7XG4gICAgfVxuICAgIHJldHVybiBgVW5leHBlY3RlZCBlcnJvcjogJHtlcnJvcn1gO1xuICB9KS5qb2luKCdcXG4nKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsRW50cmllcyhwYXJlbnQsIGZzUmVhZGVyKSB7XG4gIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoKGF3YWl0IGZzUmVhZGVyLnJlYWRkaXIocGFyZW50KSkubWFwKGFzeW5jIGRpcmVudCA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGAke3BhcmVudH0ke2RpcmVudC5uYW1lfWA7XG4gICAgY29uc3QgZW50cnkgPSB7XG4gICAgICBlbnRyeTogZGlyZW50LFxuICAgICAgbmFtZVxuICAgIH07XG4gICAgaWYgKGRpcmVudC5raW5kID09PSAnZGlyZWN0b3J5Jykge1xuICAgICAgcmV0dXJuIFtlbnRyeSwgLi4uKGF3YWl0IGdldEFsbEVudHJpZXMoYCR7bmFtZX0vYCwgZnNSZWFkZXIpKV07XG4gICAgfVxuICAgIHJldHVybiBlbnRyeTtcbiAgfSkpKS5mbGF0KCk7XG59XG5jb25zdCBsaXN0Q29sbGVjdGlvbiA9IGNhY2hlKGFzeW5jIGZ1bmN0aW9uIGxpc3RDb2xsZWN0aW9uKGNvbGxlY3Rpb25QYXRoLCBnbG9iLCBmb3JtYXRJbmZvLCBleHRlbnNpb24sIGZzUmVhZGVyKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBnbG9iID09PSAnKicgPyAoYXdhaXQgZnNSZWFkZXIucmVhZGRpcihjb2xsZWN0aW9uUGF0aCkpLm1hcChlbnRyeSA9PiAoe1xuICAgIGVudHJ5LFxuICAgIG5hbWU6IGVudHJ5Lm5hbWVcbiAgfSkpIDogKGF3YWl0IGdldEFsbEVudHJpZXMoYCR7Y29sbGVjdGlvblBhdGh9L2AsIGZzUmVhZGVyKSkubWFwKHggPT4gKHtcbiAgICBlbnRyeTogeC5lbnRyeSxcbiAgICBuYW1lOiB4Lm5hbWUuc2xpY2UoY29sbGVjdGlvblBhdGgubGVuZ3RoICsgMSlcbiAgfSkpO1xuICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKGVudHJpZXMubWFwKGFzeW5jIHggPT4ge1xuICAgIGlmIChmb3JtYXRJbmZvLmRhdGFMb2NhdGlvbiA9PT0gJ2luZGV4Jykge1xuICAgICAgaWYgKHguZW50cnkua2luZCAhPT0gJ2RpcmVjdG9yeScpIHJldHVybiBbXTtcbiAgICAgIGlmICghKGF3YWl0IGZzUmVhZGVyLmZpbGVFeGlzdHMoZ2V0RW50cnlEYXRhRmlsZXBhdGgoYCR7Y29sbGVjdGlvblBhdGh9LyR7eC5uYW1lfWAsIGZvcm1hdEluZm8pKSkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFt4Lm5hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeC5lbnRyeS5raW5kICE9PSAnZmlsZScgfHwgIXgubmFtZS5lbmRzV2l0aChleHRlbnNpb24pKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbeC5uYW1lLnNsaWNlKDAsIC1leHRlbnNpb24ubGVuZ3RoKV07XG4gICAgfVxuICB9KSkpLmZsYXQoKTtcbn0pO1xuZnVuY3Rpb24gY29sbGVjdGlvblJlYWRlcihjb2xsZWN0aW9uLCBjb25maWcsIGZzUmVhZGVyKSB7XG4gIGNvbnN0IGZvcm1hdEluZm8gPSBnZXRDb2xsZWN0aW9uRm9ybWF0KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IGNvbGxlY3Rpb25QYXRoID0gZ2V0Q29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgY29uc3Qgc2NoZW1hID0gb2JqZWN0KGNvbGxlY3Rpb25Db25maWcuc2NoZW1hKTtcbiAgY29uc3QgZ2xvYiA9IGdldFNsdWdHbG9iRm9yQ29sbGVjdGlvbihjb25maWcsIGNvbGxlY3Rpb24pO1xuICBjb25zdCBleHRlbnNpb24gPSBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKTtcbiAgY29uc3QgcmVhZCA9IChzbHVnLCAuLi5hcmdzKSA9PiB7XG4gICAgdmFyIF9hcmdzJDtcbiAgICByZXR1cm4gcmVhZEl0ZW0oc2NoZW1hLCBmb3JtYXRJbmZvLCBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBzbHVnKSwgKF9hcmdzJCA9IGFyZ3NbMF0pID09PSBudWxsIHx8IF9hcmdzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkLnJlc29sdmVMaW5rZWRGaWxlcywgYFwiJHtzbHVnfVwiIGluIGNvbGxlY3Rpb24gXCIke2NvbGxlY3Rpb259XCJgLCBmc1JlYWRlciwgc2x1ZywgY29sbGVjdGlvbkNvbmZpZy5zbHVnRmllbGQsIGdsb2IpO1xuICB9O1xuICBjb25zdCBsaXN0ID0gKCkgPT4gbGlzdENvbGxlY3Rpb24oY29sbGVjdGlvblBhdGgsIGdsb2IsIGZvcm1hdEluZm8sIGV4dGVuc2lvbiwgZnNSZWFkZXIpO1xuICByZXR1cm4ge1xuICAgIHJlYWQsXG4gICAgcmVhZE9yVGhyb3c6IGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHJlYWQoLi4uYXJncyk7XG4gICAgICBpZiAoZW50cnkgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbnRyeSBcIiR7YXJnc1swXX1cIiBub3QgZm91bmQgaW4gY29sbGVjdGlvbiBcIiR7Y29sbGVjdGlvbn1cImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVudHJ5O1xuICAgIH0sXG4gICAgLy8gVE9ETzogdGhpcyBjb3VsZCBkcm9wIHRoZSBmcy5zdGF0IGNhbGwgdGhhdCBsaXN0IGRvZXMgZm9yIGVhY2ggaXRlbVxuICAgIC8vIHNpbmNlIHdlIGp1c3QgaW1tZWRpYXRlbHkgcmVhZCBpdFxuICAgIGFsbDogYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgIGNvbnN0IHNsdWdzID0gYXdhaXQgbGlzdCgpO1xuICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChzbHVncy5tYXAoYXN5bmMgc2x1ZyA9PiB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgcmVhZChzbHVnLCBhcmdzWzBdKTtcbiAgICAgICAgaWYgKGVudHJ5ID09PSBudWxsKSByZXR1cm4gW107XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgZW50cnlcbiAgICAgICAgfV07XG4gICAgICB9KSkpLmZsYXQoKTtcbiAgICB9LFxuICAgIGxpc3RcbiAgfTtcbn1cbmNvbnN0IHJlYWRJdGVtID0gY2FjaGUoYXN5bmMgZnVuY3Rpb24gcmVhZEl0ZW0ocm9vdFNjaGVtYSwgZm9ybWF0SW5mbywgaXRlbURpciwgcmVzb2x2ZUxpbmtlZEZpbGVzLCBkZWJ1Z1JlZmVyZW5jZSwgZnNSZWFkZXIsIC4uLnNsdWdJbmZvKSB7XG4gIGlmICh0eXBlb2Ygc2x1Z0luZm9bMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHNsdWdJbmZvWzBdLmluY2x1ZGVzKCdcXFxcJykpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHNwbGl0ID0gc2x1Z0luZm9bMF0uc3BsaXQoJy8nKTtcbiAgICBpZiAoc2x1Z0luZm9bMl0gPT09ICcqJyAmJiBzcGxpdC5sZW5ndGggIT09IDEpIHJldHVybiBudWxsO1xuICAgIGlmIChzcGxpdC5pbmNsdWRlcygnLi4nKSB8fCBzcGxpdC5pbmNsdWRlcygnLicpKSByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBkYXRhRmlsZSA9IGF3YWl0IGZzUmVhZGVyLnJlYWRGaWxlKGdldEVudHJ5RGF0YUZpbGVwYXRoKGl0ZW1EaXIsIGZvcm1hdEluZm8pKTtcbiAgaWYgKGRhdGFGaWxlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgY29uc3Qge1xuICAgIGxvYWRlZCxcbiAgICBleHRyYUZha2VGaWxlXG4gIH0gPSBsb2FkRGF0YUZpbGUoZGF0YUZpbGUsIGZvcm1hdEluZm8pO1xuICBjb25zdCBjb250ZW50RmllbGRQYXRoc1RvRWFnZXJseVJlc29sdmUgPSByZXNvbHZlTGlua2VkRmlsZXMgPyBbXSA6IHVuZGVmaW5lZDtcbiAgbGV0IHZhbGlkYXRlZDtcbiAgdHJ5IHtcbiAgICB2YWxpZGF0ZWQgPSBwYXJzZVByb3BzKHJvb3RTY2hlbWEsIGxvYWRlZCwgW10sIFtdLCAoc2NoZW1hLCB2YWx1ZSwgcGF0aCwgcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3MpID0+IHtcbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldCcgfHwgc2NoZW1hLmZvcm1LaW5kID09PSAnYXNzZXRzJykge1xuICAgICAgICByZXR1cm4gc2NoZW1hLnJlYWRlci5wYXJzZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoc2NoZW1hLmZvcm1LaW5kID09PSAnY29udGVudCcpIHtcbiAgICAgICAgY29udGVudEZpZWxkUGF0aHNUb0VhZ2VybHlSZXNvbHZlID09PSBudWxsIHx8IGNvbnRlbnRGaWVsZFBhdGhzVG9FYWdlcmx5UmVzb2x2ZSA9PT0gdm9pZCAwIHx8IGNvbnRlbnRGaWVsZFBhdGhzVG9FYWdlcmx5UmVzb2x2ZS5wdXNoKHBhdGgpO1xuICAgICAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGxldCBjb250ZW50O1xuICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gcGF0aFdpdGhBcnJheUZpZWxkU2x1Z3Muam9pbignLycpICsgc2NoZW1hLmNvbnRlbnRFeHRlbnNpb247XG4gICAgICAgICAgaWYgKGZpbGVuYW1lID09PSAoZXh0cmFGYWtlRmlsZSA9PT0gbnVsbCB8fCBleHRyYUZha2VGaWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBleHRyYUZha2VGaWxlLnBhdGgpKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gZXh0cmFGYWtlRmlsZS5jb250ZW50cztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIF9hd2FpdCRmc1JlYWRlciRyZWFkRjtcbiAgICAgICAgICAgIGNvbnRlbnQgPSAoX2F3YWl0JGZzUmVhZGVyJHJlYWRGID0gYXdhaXQgZnNSZWFkZXIucmVhZEZpbGUoYCR7aXRlbURpcn0vJHtmaWxlbmFtZX1gKSkgIT09IG51bGwgJiYgX2F3YWl0JGZzUmVhZGVyJHJlYWRGICE9PSB2b2lkIDAgPyBfYXdhaXQkZnNSZWFkZXIkcmVhZEYgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzY2hlbWEucmVhZGVyLnBhcnNlKHZhbHVlLCB7XG4gICAgICAgICAgICBjb250ZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEgJiYgc2x1Z0luZm9bMF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBbc2x1Zywgc2x1Z0ZpZWxkLCBnbG9iXSA9IHNsdWdJbmZvO1xuICAgICAgICBpZiAocGF0aFswXSA9PT0gc2x1Z0ZpZWxkKSB7XG4gICAgICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCAhPT0gJ3NsdWcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNsdWcgZmllbGQgJHtzbHVnSW5mb1sxXX0gaXMgbm90IGEgc2x1ZyBmaWVsZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc2NoZW1hLnJlYWRlci5wYXJzZVdpdGhTbHVnKHZhbHVlLCB7XG4gICAgICAgICAgICBzbHVnLFxuICAgICAgICAgICAgZ2xvYlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2NoZW1hLnJlYWRlci5wYXJzZSh2YWx1ZSk7XG4gICAgfSwgdHJ1ZSk7XG4gICAgaWYgKGNvbnRlbnRGaWVsZFBhdGhzVG9FYWdlcmx5UmVzb2x2ZSAhPT0gbnVsbCAmJiBjb250ZW50RmllbGRQYXRoc1RvRWFnZXJseVJlc29sdmUgIT09IHZvaWQgMCAmJiBjb250ZW50RmllbGRQYXRoc1RvRWFnZXJseVJlc29sdmUubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChjb250ZW50RmllbGRQYXRoc1RvRWFnZXJseVJlc29sdmUubWFwKGFzeW5jIHBhdGggPT4ge1xuICAgICAgICBjb25zdCBwYXJlbnRWYWx1ZSA9IGdldFZhbHVlQXRQcm9wUGF0aCh2YWxpZGF0ZWQsIHBhdGguc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgY29uc3Qga2V5T25QYXJlbnQgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBwYXJlbnRWYWx1ZVtrZXlPblBhcmVudF07XG4gICAgICAgIHBhcmVudFZhbHVlW2tleU9uUGFyZW50XSA9IGF3YWl0IG9yaWdpbmFsVmFsdWUoKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IGZvcm1hdHRlZCA9IGZvcm1hdEZvcm1EYXRhRXJyb3IoZXJyKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGF0YSBmb3IgJHtkZWJ1Z1JlZmVyZW5jZX06XFxuJHtmb3JtYXR0ZWR9YCk7XG4gIH1cbiAgcmV0dXJuIHZhbGlkYXRlZDtcbn0pO1xuZnVuY3Rpb24gc2luZ2xldG9uUmVhZGVyKHNpbmdsZXRvbiwgY29uZmlnLCBmc1JlYWRlcikge1xuICBjb25zdCBmb3JtYXRJbmZvID0gZ2V0U2luZ2xldG9uRm9ybWF0KGNvbmZpZywgc2luZ2xldG9uKTtcbiAgY29uc3Qgc2luZ2xldG9uUGF0aCA9IGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pO1xuICBjb25zdCBzY2hlbWEgPSBvYmplY3QoY29uZmlnLnNpbmdsZXRvbnNbc2luZ2xldG9uXS5zY2hlbWEpO1xuICBjb25zdCByZWFkID0gKC4uLmFyZ3MpID0+IHtcbiAgICB2YXIgX2FyZ3MkMjtcbiAgICByZXR1cm4gcmVhZEl0ZW0oc2NoZW1hLCBmb3JtYXRJbmZvLCBzaW5nbGV0b25QYXRoLCAoX2FyZ3MkMiA9IGFyZ3NbMF0pID09PSBudWxsIHx8IF9hcmdzJDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJDIucmVzb2x2ZUxpbmtlZEZpbGVzLCBgc2luZ2xldG9uIFwiJHtzaW5nbGV0b259XCJgLCBmc1JlYWRlciwgdW5kZWZpbmVkKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICByZWFkLFxuICAgIHJlYWRPclRocm93OiBhc3luYyAoLi4ub3B0cykgPT4ge1xuICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCByZWFkKC4uLm9wdHMpO1xuICAgICAgaWYgKGVudHJ5ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU2luZ2xldG9uIFwiJHtzaW5nbGV0b259XCIgbm90IGZvdW5kYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW50cnk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgeyBjYWNoZSBhcyBhLCBjb2xsZWN0aW9uUmVhZGVyIGFzIGMsIHNpbmdsZXRvblJlYWRlciBhcyBzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/generic-0d618209.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   B: () => (/* binding */ BlocksFieldInput),\n/* harmony export */   C: () => (/* binding */ CheckboxFieldInput),\n/* harmony export */   D: () => (/* binding */ DateFieldInput),\n/* harmony export */   F: () => (/* binding */ FieldDataError),\n/* harmony export */   I: () => (/* binding */ ImageFieldInput),\n/* harmony export */   M: () => (/* binding */ MultiRelationshipInput),\n/* harmony export */   N: () => (/* binding */ NumberFieldInput),\n/* harmony export */   P: () => (/* binding */ PathReferenceInput),\n/* harmony export */   R: () => (/* binding */ RelationshipInput),\n/* harmony export */   S: () => (/* binding */ SelectFieldInput),\n/* harmony export */   U: () => (/* binding */ UrlFieldInput),\n/* harmony export */   a: () => (/* binding */ CloudImageFieldInput),\n/* harmony export */   b: () => (/* binding */ basicFormFieldWithSimpleReaderParse),\n/* harmony export */   c: () => (/* binding */ assertRequired),\n/* harmony export */   d: () => (/* binding */ DatetimeFieldInput),\n/* harmony export */   e: () => (/* binding */ FileFieldInput),\n/* harmony export */   f: () => (/* binding */ MultiselectFieldInput),\n/* harmony export */   g: () => (/* binding */ SlugFieldInput),\n/* harmony export */   h: () => (/* binding */ DocumentFieldInput),\n/* harmony export */   i: () => (/* binding */ serializeMarkdoc),\n/* harmony export */   j: () => (/* binding */ getDefaultValue),\n/* harmony export */   k: () => (/* binding */ serializeFromEditorState),\n/* harmony export */   l: () => (/* binding */ prosemirrorToYXmlFragment),\n/* harmony export */   m: () => (/* binding */ createEditorStateFromYJS),\n/* harmony export */   n: () => (/* binding */ normalizeDocumentFieldChildren),\n/* harmony export */   o: () => (/* binding */ parseToEditorStateMDX),\n/* harmony export */   p: () => (/* binding */ parseToEditorState),\n/* harmony export */   q: () => (/* binding */ serializeFromEditorStateMDX),\n/* harmony export */   r: () => (/* binding */ createEditorSchema),\n/* harmony export */   s: () => (/* binding */ slugify),\n/* harmony export */   t: () => (/* binding */ text),\n/* harmony export */   u: () => (/* binding */ IntegerFieldInput),\n/* harmony export */   v: () => (/* binding */ validateText)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n\n\nclass FieldDataError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'FieldDataError';\n  }\n}\n\nfunction assertRequired(value, validation, label) {\n  if (value === null && validation !== null && validation !== void 0 && validation.isRequired) {\n    throw new FieldDataError(`${label} is required`);\n  }\n}\nfunction basicFormFieldWithSimpleReaderParse(config) {\n  return {\n    kind: 'form',\n    Input: config.Input,\n    defaultValue: config.defaultValue,\n    parse: config.parse,\n    serialize: config.serialize,\n    validate: config.validate,\n    reader: {\n      parse(value) {\n        return config.validate(config.parse(value));\n      }\n    },\n    label: config.label\n  };\n}\n\n// this is used in react-server environments to avoid bundling UI when the reader API is used\n// if you added a new field and get an error that there's missing a missing export here,\n// you probably just need to add another empty export here\n\nfunction empty() {\n  throw new Error(\"unexpected call to function that shouldn't be called in React server component environment\");\n}\nlet SlugFieldInput = empty,\n  TextFieldInput = empty,\n  UrlFieldInput = empty,\n  SelectFieldInput = empty,\n  RelationshipInput = empty,\n  PathReferenceInput = empty,\n  MultiselectFieldInput = empty,\n  MultiRelationshipInput = empty,\n  IntegerFieldInput = empty,\n  NumberFieldInput = empty,\n  ImageFieldInput = empty,\n  FileFieldInput = empty,\n  DatetimeFieldInput = empty,\n  DateFieldInput = empty,\n  CloudImageFieldInput = empty,\n  BlocksFieldInput = empty,\n  DocumentFieldInput = empty,\n  CheckboxFieldInput = empty,\n  createEditorSchema = empty,\n  getDefaultValue = empty,\n  parseToEditorState = empty,\n  serializeFromEditorState = empty,\n  parseToEditorStateMDX = empty,\n  serializeFromEditorStateMDX = empty,\n  createEditorStateFromYJS = empty,\n  prosemirrorToYXmlFragment = empty,\n  normalizeDocumentFieldChildren = empty,\n  slugify = empty,\n  serializeMarkdoc = empty;\n\nfunction validateText(val, min, max, fieldLabel, slugInfo, pattern) {\n  if (val.length < min) {\n    if (min === 1) {\n      return `${fieldLabel} must not be empty`;\n    } else {\n      return `${fieldLabel} must be at least ${min} characters long`;\n    }\n  }\n  if (val.length > max) {\n    return `${fieldLabel} must be no longer than ${max} characters`;\n  }\n  if (pattern && !pattern.regex.test(val)) {\n    return pattern.message || `${fieldLabel} must match the pattern ${pattern.regex}`;\n  }\n  if (slugInfo) {\n    if (val === '') {\n      return `${fieldLabel} must not be empty`;\n    }\n    if (val === '..') {\n      return `${fieldLabel} must not be ..`;\n    }\n    if (val === '.') {\n      return `${fieldLabel} must not be .`;\n    }\n    if (slugInfo.glob === '**') {\n      const split = val.split('/');\n      if (split.some(s => s === '..')) {\n        return `${fieldLabel} must not contain ..`;\n      }\n      if (split.some(s => s === '.')) {\n        return `${fieldLabel} must not be .`;\n      }\n    }\n    if ((slugInfo.glob === '*' ? /[\\\\/]/ : /[\\\\]/).test(val)) {\n      return `${fieldLabel} must not contain slashes`;\n    }\n    if (/^\\s|\\s$/.test(val)) {\n      return `${fieldLabel} must not start or end with spaces`;\n    }\n    if (slugInfo.slugs.has(val)) {\n      return `${fieldLabel} must be unique`;\n    }\n  }\n}\n\nfunction parseAsNormalField(value) {\n  if (value === undefined) {\n    return '';\n  }\n  if (typeof value !== 'string') {\n    throw new FieldDataError('Must be a string');\n  }\n  return value;\n}\nconst emptySet = new Set();\nfunction text({\n  label,\n  defaultValue = '',\n  validation: {\n    length: {\n      max = Infinity,\n      min = 0\n    } = {},\n    pattern,\n    isRequired\n  } = {},\n  description,\n  multiline = false\n}) {\n  min = Math.max(isRequired ? 1 : 0, min);\n  function validate(value, slugField) {\n    const message = validateText(value, min, max, label, slugField, pattern);\n    if (message !== undefined) {\n      throw new FieldDataError(message);\n    }\n    return value;\n  }\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextFieldInput, {\n        label: label,\n        description: description,\n        min: min,\n        max: max,\n        multiline: multiline,\n        pattern: pattern,\n        ...props\n      });\n    },\n    defaultValue() {\n      return typeof defaultValue === 'string' ? defaultValue : defaultValue();\n    },\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return args.slug;\n      }\n      return parseAsNormalField(value);\n    },\n    serialize(value) {\n      return {\n        value: value === '' ? undefined : value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        slug: value,\n        value: undefined\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseAsNormalField(value);\n        return validate(parsed, undefined);\n      },\n      parseWithSlug(_value, args) {\n        validate(parseAsNormalField(args.slug), {\n          glob: args.glob,\n          slugs: emptySet\n        });\n        return null;\n      }\n    },\n    validate(value, args) {\n      return validate(value, args === null || args === void 0 ? void 0 : args.slugField);\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMTBlYTUwZTIubm9kZS5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3Qzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QixNQUFNO0FBQ04sZ0JBQWdCLFlBQVksbUJBQW1CLEtBQUs7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsY0FBYyxZQUFZLHlCQUF5QixLQUFLO0FBQ3hEO0FBQ0E7QUFDQSxpQ0FBaUMsWUFBWSx5QkFBeUIsY0FBYztBQUNwRjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixZQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQUk7QUFDVjtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1I7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVnMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtMTBlYTUwZTIubm9kZS5yZWFjdC1zZXJ2ZXIuanM/OWQyYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbmNsYXNzIEZpZWxkRGF0YUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0ZpZWxkRGF0YUVycm9yJztcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsICYmIHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihgJHtsYWJlbH0gaXMgcmVxdWlyZWRgKTtcbiAgfVxufVxuZnVuY3Rpb24gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UoY29uZmlnKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIElucHV0OiBjb25maWcuSW5wdXQsXG4gICAgZGVmYXVsdFZhbHVlOiBjb25maWcuZGVmYXVsdFZhbHVlLFxuICAgIHBhcnNlOiBjb25maWcucGFyc2UsXG4gICAgc2VyaWFsaXplOiBjb25maWcuc2VyaWFsaXplLFxuICAgIHZhbGlkYXRlOiBjb25maWcudmFsaWRhdGUsXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY29uZmlnLnZhbGlkYXRlKGNvbmZpZy5wYXJzZSh2YWx1ZSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbGFiZWw6IGNvbmZpZy5sYWJlbFxuICB9O1xufVxuXG4vLyB0aGlzIGlzIHVzZWQgaW4gcmVhY3Qtc2VydmVyIGVudmlyb25tZW50cyB0byBhdm9pZCBidW5kbGluZyBVSSB3aGVuIHRoZSByZWFkZXIgQVBJIGlzIHVzZWRcbi8vIGlmIHlvdSBhZGRlZCBhIG5ldyBmaWVsZCBhbmQgZ2V0IGFuIGVycm9yIHRoYXQgdGhlcmUncyBtaXNzaW5nIGEgbWlzc2luZyBleHBvcnQgaGVyZSxcbi8vIHlvdSBwcm9iYWJseSBqdXN0IG5lZWQgdG8gYWRkIGFub3RoZXIgZW1wdHkgZXhwb3J0IGhlcmVcblxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcInVuZXhwZWN0ZWQgY2FsbCB0byBmdW5jdGlvbiB0aGF0IHNob3VsZG4ndCBiZSBjYWxsZWQgaW4gUmVhY3Qgc2VydmVyIGNvbXBvbmVudCBlbnZpcm9ubWVudFwiKTtcbn1cbmxldCBTbHVnRmllbGRJbnB1dCA9IGVtcHR5LFxuICBUZXh0RmllbGRJbnB1dCA9IGVtcHR5LFxuICBVcmxGaWVsZElucHV0ID0gZW1wdHksXG4gIFNlbGVjdEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgUmVsYXRpb25zaGlwSW5wdXQgPSBlbXB0eSxcbiAgUGF0aFJlZmVyZW5jZUlucHV0ID0gZW1wdHksXG4gIE11bHRpc2VsZWN0RmllbGRJbnB1dCA9IGVtcHR5LFxuICBNdWx0aVJlbGF0aW9uc2hpcElucHV0ID0gZW1wdHksXG4gIEludGVnZXJGaWVsZElucHV0ID0gZW1wdHksXG4gIE51bWJlckZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgSW1hZ2VGaWVsZElucHV0ID0gZW1wdHksXG4gIEZpbGVGaWVsZElucHV0ID0gZW1wdHksXG4gIERhdGV0aW1lRmllbGRJbnB1dCA9IGVtcHR5LFxuICBEYXRlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBDbG91ZEltYWdlRmllbGRJbnB1dCA9IGVtcHR5LFxuICBCbG9ja3NGaWVsZElucHV0ID0gZW1wdHksXG4gIERvY3VtZW50RmllbGRJbnB1dCA9IGVtcHR5LFxuICBDaGVja2JveEZpZWxkSW5wdXQgPSBlbXB0eSxcbiAgY3JlYXRlRWRpdG9yU2NoZW1hID0gZW1wdHksXG4gIGdldERlZmF1bHRWYWx1ZSA9IGVtcHR5LFxuICBwYXJzZVRvRWRpdG9yU3RhdGUgPSBlbXB0eSxcbiAgc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlID0gZW1wdHksXG4gIHBhcnNlVG9FZGl0b3JTdGF0ZU1EWCA9IGVtcHR5LFxuICBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGVNRFggPSBlbXB0eSxcbiAgY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTID0gZW1wdHksXG4gIHByb3NlbWlycm9yVG9ZWG1sRnJhZ21lbnQgPSBlbXB0eSxcbiAgbm9ybWFsaXplRG9jdW1lbnRGaWVsZENoaWxkcmVuID0gZW1wdHksXG4gIHNsdWdpZnkgPSBlbXB0eSxcbiAgc2VyaWFsaXplTWFya2RvYyA9IGVtcHR5O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVRleHQodmFsLCBtaW4sIG1heCwgZmllbGRMYWJlbCwgc2x1Z0luZm8sIHBhdHRlcm4pIHtcbiAgaWYgKHZhbC5sZW5ndGggPCBtaW4pIHtcbiAgICBpZiAobWluID09PSAxKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgZW1wdHlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSBhdCBsZWFzdCAke21pbn0gY2hhcmFjdGVycyBsb25nYDtcbiAgICB9XG4gIH1cbiAgaWYgKHZhbC5sZW5ndGggPiBtYXgpIHtcbiAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBiZSBubyBsb25nZXIgdGhhbiAke21heH0gY2hhcmFjdGVyc2A7XG4gIH1cbiAgaWYgKHBhdHRlcm4gJiYgIXBhdHRlcm4ucmVnZXgudGVzdCh2YWwpKSB7XG4gICAgcmV0dXJuIHBhdHRlcm4ubWVzc2FnZSB8fCBgJHtmaWVsZExhYmVsfSBtdXN0IG1hdGNoIHRoZSBwYXR0ZXJuICR7cGF0dGVybi5yZWdleH1gO1xuICB9XG4gIGlmIChzbHVnSW5mbykge1xuICAgIGlmICh2YWwgPT09ICcnKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgZW1wdHlgO1xuICAgIH1cbiAgICBpZiAodmFsID09PSAnLi4nKSB7XG4gICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgLi5gO1xuICAgIH1cbiAgICBpZiAodmFsID09PSAnLicpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBiZSAuYDtcbiAgICB9XG4gICAgaWYgKHNsdWdJbmZvLmdsb2IgPT09ICcqKicpIHtcbiAgICAgIGNvbnN0IHNwbGl0ID0gdmFsLnNwbGl0KCcvJyk7XG4gICAgICBpZiAoc3BsaXQuc29tZShzID0+IHMgPT09ICcuLicpKSB7XG4gICAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBjb250YWluIC4uYDtcbiAgICAgIH1cbiAgICAgIGlmIChzcGxpdC5zb21lKHMgPT4gcyA9PT0gJy4nKSkge1xuICAgICAgICByZXR1cm4gYCR7ZmllbGRMYWJlbH0gbXVzdCBub3QgYmUgLmA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgoc2x1Z0luZm8uZ2xvYiA9PT0gJyonID8gL1tcXFxcL10vIDogL1tcXFxcXS8pLnRlc3QodmFsKSkge1xuICAgICAgcmV0dXJuIGAke2ZpZWxkTGFiZWx9IG11c3Qgbm90IGNvbnRhaW4gc2xhc2hlc2A7XG4gICAgfVxuICAgIGlmICgvXlxcc3xcXHMkLy50ZXN0KHZhbCkpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IG5vdCBzdGFydCBvciBlbmQgd2l0aCBzcGFjZXNgO1xuICAgIH1cbiAgICBpZiAoc2x1Z0luZm8uc2x1Z3MuaGFzKHZhbCkpIHtcbiAgICAgIHJldHVybiBgJHtmaWVsZExhYmVsfSBtdXN0IGJlIHVuaXF1ZWA7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlQXNOb3JtYWxGaWVsZCh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IGVtcHR5U2V0ID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gdGV4dCh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUgPSAnJyxcbiAgdmFsaWRhdGlvbjoge1xuICAgIGxlbmd0aDoge1xuICAgICAgbWF4ID0gSW5maW5pdHksXG4gICAgICBtaW4gPSAwXG4gICAgfSA9IHt9LFxuICAgIHBhdHRlcm4sXG4gICAgaXNSZXF1aXJlZFxuICB9ID0ge30sXG4gIGRlc2NyaXB0aW9uLFxuICBtdWx0aWxpbmUgPSBmYWxzZVxufSkge1xuICBtaW4gPSBNYXRoLm1heChpc1JlcXVpcmVkID8gMSA6IDAsIG1pbik7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHZhbHVlLCBzbHVnRmllbGQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdGVUZXh0KHZhbHVlLCBtaW4sIG1heCwgbGFiZWwsIHNsdWdGaWVsZCwgcGF0dGVybik7XG4gICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdzbHVnJyxcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goVGV4dEZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIG1pbjogbWluLFxuICAgICAgICBtYXg6IG1heCxcbiAgICAgICAgbXVsdGlsaW5lOiBtdWx0aWxpbmUsXG4gICAgICAgIHBhdHRlcm46IHBhdHRlcm4sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJyA/IGRlZmF1bHRWYWx1ZSA6IGRlZmF1bHRWYWx1ZSgpO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUsIGFyZ3MpIHtcbiAgICAgIGlmICgoYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNsdWcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3Muc2x1ZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZUFzTm9ybWFsRmllbGQodmFsdWUpO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09ICcnID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBzZXJpYWxpemVXaXRoU2x1Zyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2x1ZzogdmFsdWUsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShwYXJzZWQsIHVuZGVmaW5lZCk7XG4gICAgICB9LFxuICAgICAgcGFyc2VXaXRoU2x1ZyhfdmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgdmFsaWRhdGUocGFyc2VBc05vcm1hbEZpZWxkKGFyZ3Muc2x1ZyksIHtcbiAgICAgICAgICBnbG9iOiBhcmdzLmdsb2IsXG4gICAgICAgICAgc2x1Z3M6IGVtcHR5U2V0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlLCBhcmdzKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGUodmFsdWUsIGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXJncy5zbHVnRmllbGQpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IHsgQmxvY2tzRmllbGRJbnB1dCBhcyBCLCBDaGVja2JveEZpZWxkSW5wdXQgYXMgQywgRGF0ZUZpZWxkSW5wdXQgYXMgRCwgRmllbGREYXRhRXJyb3IgYXMgRiwgSW1hZ2VGaWVsZElucHV0IGFzIEksIE11bHRpUmVsYXRpb25zaGlwSW5wdXQgYXMgTSwgTnVtYmVyRmllbGRJbnB1dCBhcyBOLCBQYXRoUmVmZXJlbmNlSW5wdXQgYXMgUCwgUmVsYXRpb25zaGlwSW5wdXQgYXMgUiwgU2VsZWN0RmllbGRJbnB1dCBhcyBTLCBVcmxGaWVsZElucHV0IGFzIFUsIENsb3VkSW1hZ2VGaWVsZElucHV0IGFzIGEsIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlIGFzIGIsIGFzc2VydFJlcXVpcmVkIGFzIGMsIERhdGV0aW1lRmllbGRJbnB1dCBhcyBkLCBGaWxlRmllbGRJbnB1dCBhcyBlLCBNdWx0aXNlbGVjdEZpZWxkSW5wdXQgYXMgZiwgU2x1Z0ZpZWxkSW5wdXQgYXMgZywgRG9jdW1lbnRGaWVsZElucHV0IGFzIGgsIHNlcmlhbGl6ZU1hcmtkb2MgYXMgaSwgZ2V0RGVmYXVsdFZhbHVlIGFzIGosIHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZSBhcyBrLCBwcm9zZW1pcnJvclRvWVhtbEZyYWdtZW50IGFzIGwsIGNyZWF0ZUVkaXRvclN0YXRlRnJvbVlKUyBhcyBtLCBub3JtYWxpemVEb2N1bWVudEZpZWxkQ2hpbGRyZW4gYXMgbiwgcGFyc2VUb0VkaXRvclN0YXRlTURYIGFzIG8sIHBhcnNlVG9FZGl0b3JTdGF0ZSBhcyBwLCBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGVNRFggYXMgcSwgY3JlYXRlRWRpdG9yU2NoZW1hIGFzIHIsIHNsdWdpZnkgYXMgcywgdGV4dCBhcyB0LCBJbnRlZ2VyRmllbGRJbnB1dCBhcyB1LCB2YWxpZGF0ZVRleHQgYXMgdiB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/index-9722793d.node.react-server.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-9722793d.node.react-server.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   i: () => (/* binding */ integer)\n/* harmony export */ });\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n\n\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.u, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.F('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.F(message);\n      }\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtOTcyMjc5M2Qubm9kZS5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1LO0FBQzNIOztBQUV4QztBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU8sbUJBQW1CLGVBQWU7QUFDekQ7QUFDQTtBQUNBLGdCQUFnQixPQUFPLGtCQUFrQixlQUFlO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsdUVBQW1DO0FBQzVDO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQUcsQ0FBQyxtRUFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUVBQWM7QUFDOUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtRUFBYztBQUNoQztBQUNBLE1BQU0sdUVBQWM7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtOTcyMjc5M2Qubm9kZS5yZWFjdC1zZXJ2ZXIuanM/MzNmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiIGFzIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlLCB1IGFzIEludGVnZXJGaWVsZElucHV0LCBGIGFzIEZpZWxkRGF0YUVycm9yLCBjIGFzIGFzc2VydFJlcXVpcmVkIH0gZnJvbSAnLi9pbmRleC0xMGVhNTBlMi5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZWdlcih2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYSB3aG9sZSBudW1iZXJgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPCB2YWxpZGF0aW9uLm1pbikge1xuICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7dmFsaWRhdGlvbi5taW59YDtcbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlID4gdmFsaWRhdGlvbi5tYXgpIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhdCBtb3N0ICR7dmFsaWRhdGlvbi5tYXh9YDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZWdlcih7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEludGVnZXJGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZUludGVnZXIodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgaW50ZWdlciBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/index-9722793d.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ markdoc),\n/* harmony export */   b: () => (/* binding */ getDirectoriesForTreeKey),\n/* harmony export */   c: () => (/* binding */ getCollectionPath),\n/* harmony export */   d: () => (/* binding */ document),\n/* harmony export */   e: () => (/* binding */ getSingletonFormat),\n/* harmony export */   f: () => (/* binding */ fixPath),\n/* harmony export */   g: () => (/* binding */ getSrcPrefix),\n/* harmony export */   h: () => (/* binding */ getSingletonPath),\n/* harmony export */   i: () => (/* binding */ blobSha),\n/* harmony export */   j: () => (/* binding */ getEntryDataFilepath),\n/* harmony export */   k: () => (/* binding */ getValueAtPropPath),\n/* harmony export */   l: () => (/* binding */ getCollectionFormat),\n/* harmony export */   m: () => (/* binding */ mdx),\n/* harmony export */   n: () => (/* binding */ getSlugGlobForCollection),\n/* harmony export */   o: () => (/* binding */ object),\n/* harmony export */   p: () => (/* binding */ getDataFileExtension),\n/* harmony export */   q: () => (/* binding */ getCollectionItemPath),\n/* harmony export */   r: () => (/* binding */ getTreeNodeAtPath),\n/* harmony export */   t: () => (/* binding */ treeEntriesToTreeNodes),\n/* harmony export */   u: () => (/* binding */ updateTreeWithChanges)\n/* harmony export */ });\n/* harmony import */ var _markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @markdoc/markdoc/dist/index.mjs */ \"(rsc)/./node_modules/@markdoc/markdoc/dist/index.mjs\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\n\n\n\nfunction object(fields, opts) {\n  return {\n    ...opts,\n    kind: 'object',\n    fields\n  };\n}\n\nfunction getValueAtPropPath(value, inputPath) {\n  const path = [...inputPath];\n  while (path.length) {\n    const key = path.shift();\n    value = value[key];\n  }\n  return value;\n}\nfunction transformProps(schema, value, visitors, path = []) {\n  if (schema.kind === 'form' || schema.kind === 'child') {\n    if (visitors[schema.kind]) {\n      return visitors[schema.kind](schema, value, path);\n    }\n    return value;\n  }\n  if (schema.kind === 'object') {\n    const val = Object.fromEntries(Object.entries(schema.fields).map(([key, val]) => {\n      return [key, transformProps(val, value[key], visitors, [...path, key])];\n    }));\n    if (visitors.object) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'array') {\n    const val = value.map((val, idx) => transformProps(schema.element, val, visitors, path.concat(idx)));\n    if (visitors.array) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  if (schema.kind === 'conditional') {\n    const discriminant = transformProps(schema.discriminant, value.discriminant, visitors, path.concat('discriminant'));\n    const conditionalVal = transformProps(schema.values[discriminant.toString()], value.value, visitors, path.concat('value'));\n    const val = {\n      discriminant,\n      value: conditionalVal\n    };\n    if (visitors.conditional) {\n      return visitors[schema.kind](schema, val, path);\n    }\n    return val;\n  }\n  (0,emery_assertions__WEBPACK_IMPORTED_MODULE_0__.assertNever)(schema);\n}\n\n// a v important note\n// marks in the markdown ast/html are represented quite differently to how they are in slate\n// if you had the markdown **something https://keystonejs.com something**\n// the bold node is the parent of the link node\n// but in slate, marks are only represented on text nodes\n\nconst currentlyActiveMarks = new Set();\nconst currentlyDisabledMarks = new Set();\nlet currentLink = null;\nfunction addMarkToChildren(mark, cb) {\n  const wasPreviouslyActive = currentlyActiveMarks.has(mark);\n  currentlyActiveMarks.add(mark);\n  try {\n    return cb();\n  } finally {\n    if (!wasPreviouslyActive) {\n      currentlyActiveMarks.delete(mark);\n    }\n  }\n}\nfunction setLinkForChildren(href, cb) {\n  // we'll only use the outer link\n  if (currentLink !== null) {\n    return cb();\n  }\n  currentLink = href;\n  try {\n    return cb();\n  } finally {\n    currentLink = null;\n  }\n}\n\n/**\n * This type is more strict than `Element & { type: 'link'; }` because `children`\n * is constrained to only contain Text nodes. This can't be assumed generally around the editor\n * (because of potentially future inline components or nested links(which are normalized away but the editor needs to not break if it happens))\n * but where this type is used, we're only going to allow links to contain Text and that's important\n * so that we know a block will never be inside an inline because Slate gets unhappy when that happens\n * (really the link inline should probably be a mark rather than an inline,\n * non-void inlines are probably always bad but that would imply changing the document\n * structure which would be such unnecessary breakage)\n */\n\nfunction getInlineNodes(text) {\n  const node = {\n    text\n  };\n  for (const mark of currentlyActiveMarks) {\n    if (!currentlyDisabledMarks.has(mark)) {\n      node[mark] = true;\n    }\n  }\n  if (currentLink !== null) {\n    return [{\n      text: ''\n    }, {\n      type: 'link',\n      href: currentLink,\n      children: [node]\n    }, {\n      text: ''\n    }];\n  }\n  return [node];\n}\n\nclass VariableChildFields extends Error {\n  constructor() {\n    super('There are a variable number of child fields');\n  }\n}\nfunction findSingleChildField(schema) {\n  try {\n    const result = _findConstantChildFields(schema, [], new Set());\n    if (result.length === 1) {\n      return result[0];\n    }\n    return;\n  } catch (err) {\n    if (err instanceof VariableChildFields) {\n      return;\n    }\n    throw err;\n  }\n}\nfunction _findConstantChildFields(schema, path, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return [];\n  }\n  seenSchemas.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return [];\n    case 'child':\n      return [{\n        relativePath: path,\n        options: schema.options,\n        kind: 'child'\n      }];\n    case 'conditional':\n      {\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'array':\n      {\n        if (schema.asChildTag) {\n          const child = _findConstantChildFields(schema.element, [], seenSchemas);\n          if (child.length > 1) {\n            return [];\n          }\n          return [{\n            kind: 'array',\n            asChildTag: schema.asChildTag,\n            field: schema,\n            relativePath: path,\n            child: child[0]\n          }];\n        }\n        if (couldContainChildField(schema)) {\n          throw new VariableChildFields();\n        }\n        return [];\n      }\n    case 'object':\n      {\n        const paths = [];\n        for (const [key, value] of Object.entries(schema.fields)) {\n          paths.push(..._findConstantChildFields(value, path.concat(key), seenSchemas));\n        }\n        return paths;\n      }\n  }\n}\nfunction couldContainChildField(schema, seen = new Set()) {\n  if (seen.has(schema)) {\n    return false;\n  }\n  seen.add(schema);\n  switch (schema.kind) {\n    case 'form':\n      return false;\n    case 'child':\n      return true;\n    case 'conditional':\n      return Object.values(schema.values).some(value => couldContainChildField(value, seen));\n    case 'object':\n      return Object.keys(schema.fields).some(key => couldContainChildField(schema.fields[key], seen));\n    case 'array':\n      return couldContainChildField(schema.element, seen);\n  }\n}\n\nfunction inlineNodeFromMarkdoc(node) {\n  if (node.type === 'inline') {\n    return inlineChildrenFromMarkdoc(node.children);\n  }\n  if (node.type === 'link') {\n    return setLinkForChildren(node.attributes.href, () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'text') {\n    return getInlineNodes(node.attributes.content);\n  }\n  if (node.type === 'strong') {\n    return addMarkToChildren('bold', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'code') {\n    return addMarkToChildren('code', () => getInlineNodes(node.attributes.content));\n  }\n  if (node.type === 'em') {\n    return addMarkToChildren('italic', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 's') {\n    return addMarkToChildren('strikethrough', () => inlineChildrenFromMarkdoc(node.children));\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'u') {\n      return addMarkToChildren('underline', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'kbd') {\n      return addMarkToChildren('keyboard', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sub') {\n      return addMarkToChildren('subscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n    if (node.tag === 'sup') {\n      return addMarkToChildren('superscript', () => inlineChildrenFromMarkdoc(node.children));\n    }\n  }\n  if (node.type === 'softbreak') {\n    return getInlineNodes(' ');\n  }\n  if (node.type === 'hardbreak') {\n    return getInlineNodes('\\n');\n  }\n  if (node.tag === 'component-inline-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n    return {\n      type: 'component-inline-prop',\n      children: inlineFromMarkdoc(node.children),\n      propPath: node.attributes.propPath\n    };\n  }\n  throw new Error(`Unknown inline node type: ${node.type}`);\n}\nfunction inlineChildrenFromMarkdoc(nodes) {\n  return nodes.flatMap(inlineNodeFromMarkdoc);\n}\nfunction inlineFromMarkdoc(nodes) {\n  const transformedNodes = nodes.flatMap(inlineNodeFromMarkdoc);\n  const nextNodes = [];\n  let lastNode;\n  for (const [idx, node] of transformedNodes.entries()) {\n    var _lastNode;\n    if (node.type === undefined && node.text === '' && ((_lastNode = lastNode) === null || _lastNode === void 0 ? void 0 : _lastNode.type) === undefined && idx !== transformedNodes.length - 1) {\n      continue;\n    }\n    nextNodes.push(node);\n    lastNode = node;\n  }\n  if (!nextNodes.length) {\n    nextNodes.push({\n      text: ''\n    });\n  }\n  return nextNodes;\n}\nfunction fromMarkdoc(node, componentBlocks) {\n  const nodes = node.children.flatMap(x => fromMarkdocNode(x, componentBlocks));\n  if (nodes.length === 0) {\n    return [{\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    }];\n  }\n  if (nodes[nodes.length - 1].type !== 'paragraph') {\n    nodes.push({\n      type: 'paragraph',\n      children: [{\n        text: ''\n      }]\n    });\n  }\n  return nodes;\n}\nfunction fromMarkdocNode(node, componentBlocks) {\n  if (node.type === 'blockquote') {\n    return {\n      type: 'blockquote',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'fence') {\n    const {\n      language,\n      content,\n      ...rest\n    } = node.attributes;\n    return {\n      type: 'code',\n      children: [{\n        text: content.replace(/\\n$/, '')\n      }],\n      ...(typeof language === 'string' ? {\n        language\n      } : {}),\n      ...rest\n    };\n  }\n  if (node.type === 'heading') {\n    return {\n      ...node.attributes,\n      level: node.attributes.level,\n      type: 'heading',\n      children: inlineFromMarkdoc(node.children)\n    };\n  }\n  if (node.type === 'list') {\n    return {\n      type: node.attributes.ordered ? 'ordered-list' : 'unordered-list',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'item') {\n    var _node$children$;\n    const children = [{\n      type: 'list-item-content',\n      children: node.children.length ? inlineFromMarkdoc([node.children[0]]) : [{\n        text: ''\n      }]\n    }];\n    if (((_node$children$ = node.children[1]) === null || _node$children$ === void 0 ? void 0 : _node$children$.type) === 'list') {\n      const list = node.children[1];\n      children.push({\n        type: list.attributes.ordered ? 'ordered-list' : 'unordered-list',\n        children: list.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      });\n    }\n    return {\n      type: 'list-item',\n      children\n    };\n  }\n  if (node.type === 'paragraph') {\n    if (node.children.length === 1 && node.children[0].type === 'inline' && node.children[0].children.length === 1 && node.children[0].children[0].type === 'image') {\n      var _image$attributes$tit;\n      const image = node.children[0].children[0];\n      return {\n        type: 'image',\n        src: decodeURI(image.attributes.src),\n        alt: image.attributes.alt,\n        title: (_image$attributes$tit = image.attributes.title) !== null && _image$attributes$tit !== void 0 ? _image$attributes$tit : '',\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    const children = inlineFromMarkdoc(node.children);\n    if (children.length === 1 && children[0].type === 'component-inline-prop') {\n      return children[0];\n    }\n    return {\n      type: 'paragraph',\n      children,\n      textAlign: node.attributes.textAlign\n    };\n  }\n  if (node.type === 'hr') {\n    return {\n      type: 'divider',\n      children: [{\n        text: ''\n      }]\n    };\n  }\n  if (node.type === 'table') {\n    return {\n      type: 'table',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tbody') {\n    return {\n      type: 'table-body',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'thead') {\n    if (!node.children.length) return [];\n    return {\n      type: 'table-head',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tr') {\n    return {\n      type: 'table-row',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'td') {\n    return {\n      type: 'table-cell',\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'th') {\n    return {\n      type: 'table-cell',\n      header: true,\n      children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n    };\n  }\n  if (node.type === 'tag') {\n    if (node.tag === 'table') {\n      return fromMarkdocNode(node.children[0], componentBlocks);\n    }\n    if (node.tag === 'layout') {\n      return {\n        type: 'layout',\n        layout: node.attributes.layout,\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'layout-area') {\n      return {\n        type: 'layout-area',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block') {\n      return {\n        type: 'component-block',\n        component: node.attributes.component,\n        props: node.attributes.props,\n        children: node.children.length === 0 ? [{\n          type: 'component-inline-prop',\n          children: [{\n            text: ''\n          }]\n        }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n      };\n    }\n    if (node.tag === 'component-block-prop' && Array.isArray(node.attributes.propPath) && node.attributes.propPath.every(x => typeof x === 'string' || typeof x === 'number')) {\n      return {\n        type: 'component-block-prop',\n        children: node.children.flatMap(x => fromMarkdocNode(x, componentBlocks)),\n        propPath: node.attributes.propPath\n      };\n    }\n    if (node.tag) {\n      const componentBlock = componentBlocks[node.tag];\n      if (componentBlock) {\n        const singleChildField = findSingleChildField({\n          kind: 'object',\n          fields: componentBlock.schema\n        });\n        if (singleChildField) {\n          const newAttributes = JSON.parse(JSON.stringify(node.attributes));\n          const children = [];\n          toChildrenAndProps(node.children, children, newAttributes, singleChildField, [], componentBlocks);\n          return {\n            type: 'component-block',\n            component: node.tag,\n            props: newAttributes,\n            children\n          };\n        }\n        return {\n          type: 'component-block',\n          component: node.tag,\n          props: node.attributes,\n          children: node.children.length === 0 ? [{\n            type: 'component-inline-prop',\n            children: [{\n              text: ''\n            }]\n          }] : node.children.flatMap(x => fromMarkdocNode(x, componentBlocks))\n        };\n      }\n    }\n    throw new Error(`Unknown tag: ${node.tag}`);\n  }\n  return inlineNodeFromMarkdoc(node);\n}\nfunction toChildrenAndProps(fromMarkdoc, resultingChildren, value, singleChildField, parentPropPath, componentBlocks) {\n  if (singleChildField.kind === 'child') {\n    const children = fromMarkdoc.flatMap(x => fromMarkdocNode(x, componentBlocks));\n    resultingChildren.push({\n      type: `component-${singleChildField.options.kind}-prop`,\n      propPath: [...parentPropPath, ...singleChildField.relativePath],\n      children\n    });\n  }\n  if (singleChildField.kind === 'array') {\n    const arr = [];\n    for (let [idx, child] of fromMarkdoc.entries()) {\n      if (child.type === 'paragraph') {\n        child = child.children[0].children[0];\n      }\n      if (child.type !== 'tag') {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found type: ${child.type}`);\n      }\n      if (child.tag !== singleChildField.asChildTag) {\n        throw new Error(`expected tag ${singleChildField.asChildTag}, found tag: ${child.tag}`);\n      }\n      const attributes = JSON.parse(JSON.stringify(child.attributes));\n      if (singleChildField.child) {\n        toChildrenAndProps(child.children, resultingChildren, attributes, singleChildField.child, [...parentPropPath, ...singleChildField.relativePath, idx], componentBlocks);\n      }\n      arr.push(attributes);\n    }\n    const key = singleChildField.relativePath[singleChildField.relativePath.length - 1];\n    const parent = getValueAtPropPath(value, singleChildField.relativePath.slice(0, -1));\n    parent[key] = arr;\n  }\n}\n\nfunction fixPath(path) {\n  return path.replace(/^\\.?\\/+/, '').replace(/\\/*$/, '');\n}\nconst collectionPath = /\\/\\*\\*?(?:$|\\/)/;\nfunction getConfiguredCollectionPath(config, collection) {\n  var _collectionConfig$pat;\n  const collectionConfig = config.collections[collection];\n  const path = (_collectionConfig$pat = collectionConfig.path) !== null && _collectionConfig$pat !== void 0 ? _collectionConfig$pat : `${collection}/*/`;\n  if (!collectionPath.test(path)) {\n    throw new Error(`Collection path must end with /* or /** or include /*/ or /**/ but ${collection} has ${path}`);\n  }\n  return path;\n}\nfunction getCollectionPath(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/\\*\\*?.*$/, ''));\n  return path;\n}\nfunction getCollectionFormat(config, collection) {\n  const collectionConfig = config.collections[collection];\n  return getFormatInfo(collectionConfig)(getConfiguredCollectionPath(config, collection));\n}\nfunction getSingletonFormat(config, singleton) {\n  var _singletonConfig$path;\n  const singletonConfig = config.singletons[singleton];\n  return getFormatInfo(singletonConfig)((_singletonConfig$path = singletonConfig.path) !== null && _singletonConfig$path !== void 0 ? _singletonConfig$path : `${singleton}/`);\n}\nfunction getCollectionItemPath(config, collection, slug) {\n  const basePath = getCollectionPath(config, collection);\n  const suffix = getCollectionItemSlugSuffix(config, collection);\n  return `${basePath}/${slug}${suffix}`;\n}\nfunction getEntryDataFilepath(dir, formatInfo) {\n  return `${dir}${formatInfo.dataLocation === 'index' ? '/index' : ''}${getDataFileExtension(formatInfo)}`;\n}\nfunction getSlugGlobForCollection(config, collection) {\n  const collectionPath = getConfiguredCollectionPath(config, collection);\n  return collectionPath.includes('**') ? '**' : '*';\n}\nfunction getCollectionItemSlugSuffix(config, collection) {\n  const configuredPath = getConfiguredCollectionPath(config, collection);\n  const path = fixPath(configuredPath.replace(/^[^*]+\\*\\*?/, ''));\n  return path ? `/${path}` : '';\n}\nfunction getSingletonPath(config, singleton) {\n  var _singleton$path, _singleton$path2;\n  if ((_singleton$path = config.singletons[singleton].path) !== null && _singleton$path !== void 0 && _singleton$path.includes('*')) {\n    throw new Error(`Singleton paths cannot include * but ${singleton} has ${config.singletons[singleton].path}`);\n  }\n  return fixPath((_singleton$path2 = config.singletons[singleton].path) !== null && _singleton$path2 !== void 0 ? _singleton$path2 : singleton);\n}\nfunction getDataFileExtension(formatInfo) {\n  return formatInfo.contentField ? formatInfo.contentField.contentExtension : '.' + formatInfo.data;\n}\nfunction weakMemoize(func) {\n  const cache = new WeakMap();\n  return arg => {\n    if (cache.has(arg)) {\n      return cache.get(arg);\n    }\n    const result = func(arg);\n    cache.set(arg, result);\n    return result;\n  };\n}\nfunction memoize(func) {\n  const cache = new Map();\n  return arg => {\n    if (cache.has(arg)) {\n      return cache.get(arg);\n    }\n    const result = func(arg);\n    cache.set(arg, result);\n    return result;\n  };\n}\nconst getFormatInfo = weakMemoize(collectionOrSingleton => {\n  return memoize(path => _getFormatInfo(collectionOrSingleton, path));\n});\nfunction _getFormatInfo(collectionOrSingleton, path) {\n  var _format$data;\n  const dataLocation = path.endsWith('/') ? 'index' : 'outer';\n  const {\n    schema,\n    format = 'yaml'\n  } = collectionOrSingleton;\n  if (typeof format === 'string') {\n    return {\n      dataLocation,\n      contentField: undefined,\n      data: format\n    };\n  }\n  let contentField;\n  if (format.contentField) {\n    let field = {\n      kind: 'object',\n      fields: schema\n    };\n    let path = Array.isArray(format.contentField) ? format.contentField : [format.contentField];\n    contentField = {\n      path,\n      contentExtension: getContentExtension(path, field, () => path.length === 1 ? path[0] : JSON.stringify(path))\n    };\n  }\n  return {\n    data: (_format$data = format.data) !== null && _format$data !== void 0 ? _format$data : 'yaml',\n    contentField,\n    dataLocation\n  };\n}\nfunction getContentExtension(path, schema, debugName) {\n  if (path.length === 0) {\n    if (schema.kind !== 'form' || schema.formKind !== 'content') {\n      throw new Error(`Content field for ${debugName()} is not a content field`);\n    }\n    return schema.contentExtension;\n  }\n  if (schema.kind === 'object') {\n    return getContentExtension(path.slice(1), schema.fields[path[0]], debugName);\n  }\n  if (schema.kind === 'conditional') {\n    if (path[0] !== 'value') {\n      throw new Error(`Conditional fields referenced in a contentField path must only reference the value field (${debugName()})`);\n    }\n    let contentExtension;\n    const innerPath = path.slice(1);\n    for (const value of Object.values(schema.values)) {\n      const foundContentExtension = getContentExtension(innerPath, value, debugName);\n      if (!contentExtension) {\n        contentExtension = foundContentExtension;\n        continue;\n      }\n      if (contentExtension !== foundContentExtension) {\n        throw new Error(`contentField ${debugName()} has conflicting content extensions`);\n      }\n    }\n    if (!contentExtension) {\n      throw new Error(`contentField ${debugName()} does not point to a content field`);\n    }\n    return contentExtension;\n  }\n  throw new Error(`Path specified in contentField ${debugName()} does not point to a content field`);\n}\n\nfunction getSrcPrefix(publicPath, slug) {\n  return typeof publicPath === 'string' ? `${publicPath.replace(/\\/*$/, '')}/${slug === undefined ? '' : slug + '/'}` : '';\n}\n\nfunction deserializeFiles(nodes, componentBlocks, files, otherFiles, mode, documentFeatures, slug) {\n  return nodes.map(node => {\n    if (node.type === 'component-block') {\n      const componentBlock = componentBlocks[node.component];\n      if (!componentBlock) return node;\n      const schema = object(componentBlock.schema);\n      return {\n        ...node,\n        props: deserializeProps(schema, node.props, files, otherFiles, mode, slug)\n      };\n    }\n    if (node.type === 'image' && typeof node.src === 'string' && mode === 'edit') {\n      var _ref;\n      const prefix = getSrcPrefixForImageBlock(documentFeatures, slug);\n      const filename = node.src.slice(prefix.length);\n      const content = (_ref = typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? otherFiles.get(fixPath(documentFeatures.images.directory)) : files) === null || _ref === void 0 ? void 0 : _ref.get(filename);\n      if (!content) {\n        return {\n          type: 'paragraph',\n          children: [{\n            text: `Missing image ${filename}`\n          }]\n        };\n      }\n      return {\n        type: 'image',\n        src: {\n          filename,\n          content\n        },\n        alt: node.alt,\n        title: node.title,\n        children: [{\n          text: ''\n        }]\n      };\n    }\n    if (typeof node.type === 'string') {\n      const children = deserializeFiles(node.children, componentBlocks, files, otherFiles, mode, documentFeatures, slug);\n      return {\n        ...node,\n        children\n      };\n    }\n    return node;\n  });\n}\nfunction deserializeProps(schema, value, files, otherFiles, mode, slug) {\n  return transformProps(schema, value, {\n    form: (schema, value) => {\n      if (schema.formKind === 'asset') {\n        var _otherFiles$get;\n        if (mode === 'read') {\n          return schema.reader.parse(value);\n        }\n        const filename = schema.filename(value, {\n          slug,\n          suggestedFilenamePrefix: undefined\n        });\n        return schema.parse(value, {\n          asset: filename ? schema.directory ? (_otherFiles$get = otherFiles.get(schema.directory)) === null || _otherFiles$get === void 0 ? void 0 : _otherFiles$get.get(filename) : files.get(filename) : undefined,\n          slug\n        });\n      }\n      if (schema.formKind === 'content' || schema.formKind === 'assets') {\n        throw new Error('Not implemented');\n      }\n      if (mode === 'read') {\n        return schema.reader.parse(value);\n      }\n      return schema.parse(value, undefined);\n    }\n  });\n}\nfunction getSrcPrefixForImageBlock(documentFeatures, slug) {\n  return getSrcPrefix(typeof documentFeatures.images === 'object' ? documentFeatures.images.publicPath : undefined, slug);\n}\n\nasync function sha1(content) {\n  return (0,crypto__WEBPACK_IMPORTED_MODULE_4__.createHash)('sha1').update(content).digest('hex');\n}\n\nconst textEncoder$1 = new TextEncoder();\nconst blobShaCache = new WeakMap();\nasync function blobSha(contents) {\n  const cached = blobShaCache.get(contents);\n  if (cached !== undefined) return cached;\n  const blobPrefix = textEncoder$1.encode('blob ' + contents.length + '\\0');\n  const array = new Uint8Array(blobPrefix.byteLength + contents.byteLength);\n  array.set(blobPrefix, 0);\n  array.set(contents, blobPrefix.byteLength);\n  const digestPromise = sha1(array);\n  blobShaCache.set(contents, digestPromise);\n  digestPromise.then(digest => blobShaCache.set(contents, digest));\n  return digestPromise;\n}\nfunction getTreeNodeAtPath(root, path) {\n  const parts = path.split('/');\n  let node = root.get(parts[0]);\n  for (const part of parts.slice(1)) {\n    if (!node) return undefined;\n    if (!node.children) return undefined;\n    node = node.children.get(part);\n  }\n  return node;\n}\nfunction getNodeAtPath(tree, path) {\n  if (path === '') return tree;\n  let node = tree;\n  for (const part of path.split('/')) {\n    if (!node.has(part)) {\n      node.set(part, new Map());\n    }\n    const innerNode = node.get(part);\n    (0,emery__WEBPACK_IMPORTED_MODULE_1__.assert)(innerNode instanceof Map, 'expected tree');\n    node = innerNode;\n  }\n  return node;\n}\nfunction getFilename(path) {\n  return path.replace(/.*\\//, '');\n}\nfunction getDirname(path) {\n  if (!path.includes('/')) return '';\n  return path.replace(/\\/[^/]+$/, '');\n}\nfunction toTreeChanges(changes) {\n  const changesRoot = new Map();\n  for (const deletion of changes.deletions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(deletion));\n    parentTree.set(getFilename(deletion), 'delete');\n  }\n  for (const addition of changes.additions) {\n    const parentTree = getNodeAtPath(changesRoot, getDirname(addition.path));\n    parentTree.set(getFilename(addition.path), addition.contents);\n  }\n  return changesRoot;\n}\nconst SPACE_CHAR_CODE = 32;\nconst space = new Uint8Array([SPACE_CHAR_CODE]);\nconst nullchar = new Uint8Array([0]);\nconst tree = textEncoder$1.encode('tree ');\n\n// based on https://github.com/isomorphic-git/isomorphic-git/blob/c09dfa20ffe0ab9e6602e0fa172d72ba8994e443/src/models/GitTree.js#L108-L122\nfunction treeSha(children) {\n  const entries = [...children].map(([name, node]) => ({\n    name,\n    sha: node.entry.sha,\n    mode: node.entry.mode\n  }));\n  entries.sort((a, b) => {\n    const aName = a.mode === '040000' ? a.name + '/' : a.name;\n    const bName = b.mode === '040000' ? b.name + '/' : b.name;\n    return aName === bName ? 0 : aName < bName ? -1 : 1;\n  });\n  const treeObject = entries.flatMap(entry => {\n    const mode = textEncoder$1.encode(entry.mode.replace(/^0/, ''));\n    const name = textEncoder$1.encode(entry.name);\n    const sha = hexToBytes(entry.sha);\n    return [mode, space, name, nullchar, sha];\n  });\n  return sha1(concatBytes([tree, textEncoder$1.encode(treeObject.reduce((sum, val) => sum + val.byteLength, 0).toString()), nullchar, ...treeObject]));\n}\nfunction concatBytes(byteArrays) {\n  const totalLength = byteArrays.reduce((sum, arr) => sum + arr.byteLength, 0);\n  const result = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const arr of byteArrays) {\n    result.set(arr, offset);\n    offset += arr.byteLength;\n  }\n  return result;\n}\nfunction hexToBytes(str) {\n  const bytes = new Uint8Array(str.length / 2);\n  for (var i = 0; i < bytes.byteLength; i += 1) {\n    const start = i * 2;\n    bytes[i] = parseInt(str.slice(start, start + 2), 16);\n  }\n  return bytes;\n}\nasync function createTreeNodeEntry(path, children) {\n  const sha = await treeSha(children);\n  return {\n    path,\n    mode: '040000',\n    type: 'tree',\n    sha\n  };\n}\nasync function createBlobNodeEntry(path, contents) {\n  const sha = 'sha' in contents ? contents.sha : await blobSha(contents);\n  return {\n    path,\n    mode: '100644',\n    type: 'blob',\n    sha\n  };\n}\nasync function updateTreeWithChanges(tree, changes) {\n  var _await$updateTree;\n  const newTree = (_await$updateTree = await updateTree(tree, toTreeChanges(changes), [])) !== null && _await$updateTree !== void 0 ? _await$updateTree : new Map();\n  return {\n    entries: treeToEntries(newTree),\n    sha: await treeSha(newTree !== null && newTree !== void 0 ? newTree : new Map())\n  };\n}\nfunction treeToEntries(tree) {\n  return [...tree.values()].flatMap(x => x.children ? [x.entry, ...treeToEntries(x.children)] : [x.entry]);\n}\nasync function updateTree(tree, changedTree, path) {\n  const newTree = new Map(tree);\n  for (const [key, value] of changedTree) {\n    if (value === 'delete') {\n      newTree.delete(key);\n    }\n    if (value instanceof Map) {\n      var _newTree$get$children, _newTree$get;\n      const existingChildren = (_newTree$get$children = (_newTree$get = newTree.get(key)) === null || _newTree$get === void 0 ? void 0 : _newTree$get.children) !== null && _newTree$get$children !== void 0 ? _newTree$get$children : new Map();\n      const children = await updateTree(existingChildren, value, path.concat(key));\n      if (children === undefined) {\n        newTree.delete(key);\n        continue;\n      }\n      const entry = await createTreeNodeEntry(path.concat(key).join('/'), children);\n      newTree.set(key, {\n        entry,\n        children\n      });\n    }\n    if (value instanceof Uint8Array || typeof value === 'object' && 'sha' in value) {\n      const entry = await createBlobNodeEntry(path.concat(key).join('/'), value);\n      newTree.set(key, {\n        entry\n      });\n    }\n  }\n  if (newTree.size === 0) {\n    return undefined;\n  }\n  return newTree;\n}\nfunction treeEntriesToTreeNodes(entries) {\n  const root = new Map();\n  const getChildrenAtPath = parts => {\n    var _node;\n    if (parts.length === 0) {\n      return root;\n    }\n    let node = root.get(parts[0]);\n    for (const part of parts.slice(1)) {\n      if (!node) return undefined;\n      if (!node.children) return undefined;\n      node = node.children.get(part);\n    }\n    return (_node = node) === null || _node === void 0 ? void 0 : _node.children;\n  };\n  for (const entry of entries) {\n    const split = entry.path.split('/');\n    const children = getChildrenAtPath(split.slice(0, -1));\n    if (children) {\n      children.set(split[split.length - 1], {\n        entry,\n        children: entry.type === 'tree' ? new Map() : undefined\n      });\n    }\n  }\n  return root;\n}\n\nfunction collectDirectoriesUsedInSchemaInner(schema, directories, seenSchemas) {\n  if (seenSchemas.has(schema)) {\n    return;\n  }\n  seenSchemas.add(schema);\n  if (schema.kind === 'array') {\n    return collectDirectoriesUsedInSchemaInner(schema.element, directories, seenSchemas);\n  }\n  if (schema.kind === 'child') {\n    return;\n  }\n  if (schema.kind === 'form') {\n    if (schema.formKind === 'asset' && schema.directory !== undefined) {\n      directories.add(fixPath(schema.directory));\n    }\n    if ((schema.formKind === 'content' || schema.formKind === 'assets') && schema.directories !== undefined) {\n      for (const directory of schema.directories) {\n        directories.add(fixPath(directory));\n      }\n    }\n    return;\n  }\n  if (schema.kind === 'object') {\n    for (const field of Object.values(schema.fields)) {\n      collectDirectoriesUsedInSchemaInner(field, directories, seenSchemas);\n    }\n    return;\n  }\n  if (schema.kind === 'conditional') {\n    for (const innerSchema of Object.values(schema.values)) {\n      collectDirectoriesUsedInSchemaInner(innerSchema, directories, seenSchemas);\n    }\n    return;\n  }\n  (0,emery__WEBPACK_IMPORTED_MODULE_1__.assertNever)(schema);\n}\nfunction collectDirectoriesUsedInSchema(schema) {\n  const directories = new Set();\n  collectDirectoriesUsedInSchemaInner(schema, directories, new Set());\n  return directories;\n}\nfunction getDirectoriesForTreeKey(schema, directory, slug, format) {\n  const directories = [fixPath(directory)];\n  if (format.dataLocation === 'outer') {\n    directories.push(fixPath(directory) + getDataFileExtension(format));\n  }\n  const toAdd = slug === undefined ? '' : `/${slug}`;\n  for (const directory of collectDirectoriesUsedInSchema(schema)) {\n    directories.push(directory + toAdd);\n  }\n  return directories;\n}\n\nconst textDecoder$1 = new TextDecoder();\nconst defaultAltField$1 = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.t)({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField$1 = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.b)({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  },\n  label: 'Title'\n});\nfunction normaliseDocumentFeatures(config) {\n  var _config$formatting, _formatting$alignment, _formatting$alignment2, _formatting$blockType, _formatting$inlineMar, _formatting$inlineMar2, _formatting$inlineMar3, _formatting$inlineMar4, _formatting$inlineMar5, _formatting$inlineMar6, _formatting$inlineMar7, _formatting$inlineMar8, _formatting$listTypes, _formatting$listTypes2, _imagesConfig$schema$, _imagesConfig$schema, _imagesConfig$schema$2, _imagesConfig$schema2;\n  const formatting = config.formatting === true ? {\n    // alignment: true, // not supported natively in markdown\n    blockTypes: true,\n    headingLevels: true,\n    inlineMarks: true,\n    listTypes: true,\n    softBreaks: true\n  } : (_config$formatting = config.formatting) !== null && _config$formatting !== void 0 ? _config$formatting : {};\n  const imagesConfig = config.images === true ? {} : config.images;\n  return {\n    formatting: {\n      alignment: formatting.alignment === true ? {\n        center: true,\n        end: true\n      } : {\n        center: !!((_formatting$alignment = formatting.alignment) !== null && _formatting$alignment !== void 0 && _formatting$alignment.center),\n        end: !!((_formatting$alignment2 = formatting.alignment) !== null && _formatting$alignment2 !== void 0 && _formatting$alignment2.end)\n      },\n      blockTypes: (formatting === null || formatting === void 0 ? void 0 : formatting.blockTypes) === true ? {\n        blockquote: true,\n        code: {\n          schema: object({})\n        }\n      } : {\n        blockquote: !!((_formatting$blockType = formatting.blockTypes) !== null && _formatting$blockType !== void 0 && _formatting$blockType.blockquote),\n        code: (_formatting$blockType2 => {\n          if (((_formatting$blockType2 = formatting.blockTypes) === null || _formatting$blockType2 === void 0 ? void 0 : _formatting$blockType2.code) === undefined) {\n            return false;\n          }\n          if (formatting.blockTypes.code === true || !formatting.blockTypes.code.schema) {\n            return {\n              schema: object({})\n            };\n          }\n          for (const key of ['type', 'children', 'language']) {\n            if (key in formatting.blockTypes.code.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for code blocks`);\n            }\n          }\n          return {\n            schema: object(formatting.blockTypes.code.schema)\n          };\n        })()\n      },\n      headings: (_obj$schema => {\n        const opt = formatting === null || formatting === void 0 ? void 0 : formatting.headingLevels;\n        const obj = typeof opt === 'object' && 'levels' in opt ? opt : {\n          levels: opt,\n          schema: undefined\n        };\n        if (obj.schema) {\n          for (const key of ['type', 'children', 'level', 'textAlign']) {\n            if (key in obj.schema) {\n              throw new Error(`\"${key}\" cannot be a key in the schema for headings`);\n            }\n          }\n        }\n        return {\n          levels: [...new Set(obj.levels === true ? [1, 2, 3, 4, 5, 6] : obj.levels)],\n          schema: object((_obj$schema = obj.schema) !== null && _obj$schema !== void 0 ? _obj$schema : {})\n        };\n      })(),\n      inlineMarks: formatting.inlineMarks === true ? {\n        bold: true,\n        code: true,\n        italic: true,\n        keyboard: false,\n        // not supported natively in markdown\n        strikethrough: true,\n        subscript: false,\n        // not supported natively in markdown\n        superscript: false,\n        // not supported natively in markdown\n        underline: false // not supported natively in markdown\n      } : {\n        bold: !!((_formatting$inlineMar = formatting.inlineMarks) !== null && _formatting$inlineMar !== void 0 && _formatting$inlineMar.bold),\n        code: !!((_formatting$inlineMar2 = formatting.inlineMarks) !== null && _formatting$inlineMar2 !== void 0 && _formatting$inlineMar2.code),\n        italic: !!((_formatting$inlineMar3 = formatting.inlineMarks) !== null && _formatting$inlineMar3 !== void 0 && _formatting$inlineMar3.italic),\n        strikethrough: !!((_formatting$inlineMar4 = formatting.inlineMarks) !== null && _formatting$inlineMar4 !== void 0 && _formatting$inlineMar4.strikethrough),\n        underline: !!((_formatting$inlineMar5 = formatting.inlineMarks) !== null && _formatting$inlineMar5 !== void 0 && _formatting$inlineMar5.underline),\n        keyboard: !!((_formatting$inlineMar6 = formatting.inlineMarks) !== null && _formatting$inlineMar6 !== void 0 && _formatting$inlineMar6.keyboard),\n        subscript: !!((_formatting$inlineMar7 = formatting.inlineMarks) !== null && _formatting$inlineMar7 !== void 0 && _formatting$inlineMar7.subscript),\n        superscript: !!((_formatting$inlineMar8 = formatting.inlineMarks) !== null && _formatting$inlineMar8 !== void 0 && _formatting$inlineMar8.superscript)\n      },\n      listTypes: formatting.listTypes === true ? {\n        ordered: true,\n        unordered: true\n      } : {\n        ordered: !!((_formatting$listTypes = formatting.listTypes) !== null && _formatting$listTypes !== void 0 && _formatting$listTypes.ordered),\n        unordered: !!((_formatting$listTypes2 = formatting.listTypes) !== null && _formatting$listTypes2 !== void 0 && _formatting$listTypes2.unordered)\n      },\n      softBreaks: !!formatting.softBreaks\n    },\n    links: !!config.links,\n    layouts: [...new Set((config.layouts || []).map(x => JSON.stringify(x)))].map(x => JSON.parse(x)),\n    dividers: !!config.dividers,\n    images: imagesConfig === undefined ? false : {\n      ...imagesConfig,\n      schema: {\n        alt: (_imagesConfig$schema$ = (_imagesConfig$schema = imagesConfig.schema) === null || _imagesConfig$schema === void 0 ? void 0 : _imagesConfig$schema.alt) !== null && _imagesConfig$schema$ !== void 0 ? _imagesConfig$schema$ : defaultAltField$1,\n        title: (_imagesConfig$schema$2 = (_imagesConfig$schema2 = imagesConfig.schema) === null || _imagesConfig$schema2 === void 0 ? void 0 : _imagesConfig$schema2.title) !== null && _imagesConfig$schema$2 !== void 0 ? _imagesConfig$schema$2 : emptyTitleField$1\n      }\n    },\n    tables: !!config.tables\n  };\n}\n\n/**\n * @deprecated `fields.markdoc` has superseded this field. `fields.mdx` is also available if you prefer MDX.\n */\nfunction document({\n  label,\n  componentBlocks = {},\n  description,\n  ...documentFeaturesConfig\n}) {\n  const documentFeatures = normaliseDocumentFeatures(documentFeaturesConfig);\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return [{\n        type: 'paragraph',\n        children: [{\n          text: ''\n        }]\n      }];\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        componentBlocks: componentBlocks,\n        description: description,\n        label: label,\n        documentFeatures: documentFeatures,\n        ...props\n      });\n    },\n    parse(_, data) {\n      const markdoc = textDecoder$1.decode(data.content);\n      fromMarkdoc((0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(markdoc), componentBlocks);\n      return deserializeFiles((0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.n)(), componentBlocks, data.other, data.external, 'edit', documentFeatures, data.slug);\n    },\n    contentExtension: '.mdoc',\n    validate(value) {\n      return value;\n    },\n    directories: [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(componentBlocks).map(([name, block]) => [name, object(block.schema)])))), ...(typeof documentFeatures.images === 'object' && typeof documentFeatures.images.directory === 'string' ? [fixPath(documentFeatures.images.directory)] : [])],\n    serialize(value, opts) {\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.i)();\n    },\n    reader: {\n      parse(value, data) {\n        const markdoc = textDecoder$1.decode(data.content);\n        const document = fromMarkdoc((0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(markdoc), componentBlocks);\n        return deserializeFiles(document, componentBlocks, new Map(), new Map(), 'read', documentFeatures, undefined);\n      }\n    }\n  };\n}\n\nconst defaultAltField = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.t)({\n  label: 'Alt text',\n  description: 'This text will be used by screen readers and search engines.'\n});\nconst emptyTitleField = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.b)({\n  Input() {\n    return null;\n  },\n  defaultValue() {\n    return '';\n  },\n  parse(value) {\n    if (value === undefined) return '';\n    if (typeof value !== 'string') {\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be string');\n    }\n    return value;\n  },\n  validate(value) {\n    return value;\n  },\n  serialize(value) {\n    return {\n      value\n    };\n  },\n  label: 'Title'\n});\nfunction editorOptionsToConfig(options) {\n  var _options$bold, _options$italic, _options$strikethroug, _options$code, _options$blockquote, _options$orderedList, _options$unorderedLis, _options$table, _options$link, _options$divider;\n  return {\n    bold: (_options$bold = options.bold) !== null && _options$bold !== void 0 ? _options$bold : true,\n    italic: (_options$italic = options.italic) !== null && _options$italic !== void 0 ? _options$italic : true,\n    strikethrough: (_options$strikethroug = options.strikethrough) !== null && _options$strikethroug !== void 0 ? _options$strikethroug : true,\n    code: (_options$code = options.code) !== null && _options$code !== void 0 ? _options$code : true,\n    heading: (() => {\n      let levels = [];\n      let levelsOpt = typeof options.heading === 'object' && !Array.isArray(options.heading) ? options.heading.levels : options.heading;\n      if (levelsOpt === true || levelsOpt === undefined) {\n        levels = [1, 2, 3, 4, 5, 6];\n      }\n      if (Array.isArray(levelsOpt)) {\n        levels = levelsOpt;\n      }\n      return {\n        levels,\n        schema: options.heading && typeof options.heading === 'object' && 'schema' in options.heading ? options.heading.schema : {}\n      };\n    })(),\n    blockquote: (_options$blockquote = options.blockquote) !== null && _options$blockquote !== void 0 ? _options$blockquote : true,\n    orderedList: (_options$orderedList = options.orderedList) !== null && _options$orderedList !== void 0 ? _options$orderedList : true,\n    unorderedList: (_options$unorderedLis = options.unorderedList) !== null && _options$unorderedLis !== void 0 ? _options$unorderedLis : true,\n    table: (_options$table = options.table) !== null && _options$table !== void 0 ? _options$table : true,\n    link: (_options$link = options.link) !== null && _options$link !== void 0 ? _options$link : true,\n    image: options.image !== false ? ((_opts$transformFilena, _opts$schema$alt, _opts$schema, _opts$schema$title, _opts$schema2) => {\n      const opts = options.image === true ? undefined : options.image;\n      return {\n        directory: opts === null || opts === void 0 ? void 0 : opts.directory,\n        publicPath: opts === null || opts === void 0 ? void 0 : opts.publicPath,\n        transformFilename: (_opts$transformFilena = opts === null || opts === void 0 ? void 0 : opts.transformFilename) !== null && _opts$transformFilena !== void 0 ? _opts$transformFilena : x => x,\n        schema: {\n          alt: (_opts$schema$alt = opts === null || opts === void 0 || (_opts$schema = opts.schema) === null || _opts$schema === void 0 ? void 0 : _opts$schema.alt) !== null && _opts$schema$alt !== void 0 ? _opts$schema$alt : defaultAltField,\n          title: (_opts$schema$title = opts === null || opts === void 0 || (_opts$schema2 = opts.schema) === null || _opts$schema2 === void 0 ? void 0 : _opts$schema2.title) !== null && _opts$schema$title !== void 0 ? _opts$schema$title : emptyTitleField\n        }\n      };\n    })() : undefined,\n    divider: (_options$divider = options.divider) !== null && _options$divider !== void 0 ? _options$divider : true,\n    codeBlock: options.codeBlock === false ? undefined : {\n      schema: typeof options.codeBlock === 'object' ? options.codeBlock.schema : {}\n    }\n  };\n}\n\nfunction getTypeForField(field) {\n  if (field.kind === 'object' || field.kind === 'conditional') {\n    return {\n      type: Object,\n      required: true\n    };\n  }\n  if (field.kind === 'array') {\n    return {\n      type: Array,\n      required: true\n    };\n  }\n  if (field.kind === 'child') {\n    return {};\n  }\n  if (field.formKind === undefined) {\n    if (typeof field.defaultValue === 'string' && 'options' in field && Array.isArray(field.options) && field.options.every(val => typeof val === 'object' && val !== null && 'value' in val && typeof val.value === 'string')) {\n      return {\n        type: String,\n        matches: field.options.map(x => x.value),\n        required: true\n      };\n    }\n    if (typeof field.defaultValue === 'string') {\n      let required = false;\n      try {\n        field.parse('');\n      } catch {\n        required = true;\n      }\n      return {\n        type: String,\n        required\n      };\n    }\n    try {\n      field.parse(1);\n      return {\n        type: Number\n      };\n    } catch {}\n    if (typeof field.defaultValue === 'boolean') {\n      return {\n        type: Boolean,\n        required: true\n      };\n    }\n    return {};\n  }\n  if (field.formKind === 'slug') {\n    let required = false;\n    try {\n      field.parse('', undefined);\n    } catch {\n      required = true;\n    }\n    return {\n      type: String,\n      required\n    };\n  }\n  if (field.formKind === 'asset') {\n    let required = false;\n    try {\n      field.validate(null);\n    } catch {\n      required = true;\n    }\n    return {\n      type: String,\n      required\n    };\n  }\n  return {};\n}\nfunction fieldsToMarkdocAttributes(fields) {\n  return Object.fromEntries(Object.entries(fields).map(([name, field]) => {\n    const schema = getTypeForField(field);\n    return [name, schema];\n  }));\n}\nfunction createMarkdocConfig(opts) {\n  const editorConfig = editorOptionsToConfig(opts.options || {});\n  const config = {\n    nodes: {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes\n    },\n    tags: {}\n  };\n  if (editorConfig.heading.levels.length) {\n    config.nodes.heading = {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.heading,\n      attributes: {\n        ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.heading.attributes,\n        ...fieldsToMarkdocAttributes(editorConfig.heading.schema)\n      }\n    };\n  } else {\n    config.nodes.heading = undefined;\n  }\n  if (!editorConfig.blockquote) {\n    config.nodes.blockquote = undefined;\n  }\n  if (editorConfig.codeBlock) {\n    config.nodes.fence = {\n      ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.fence,\n      attributes: {\n        ..._markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.nodes.fence.attributes,\n        ...fieldsToMarkdocAttributes(editorConfig.codeBlock.schema)\n      }\n    };\n  } else {\n    config.nodes.fence = undefined;\n  }\n  if (!editorConfig.orderedList && !editorConfig.unorderedList) {\n    config.nodes.list = undefined;\n  }\n  if (!editorConfig.bold) {\n    config.nodes.strong = undefined;\n  }\n  if (!editorConfig.italic) {\n    config.nodes.em = undefined;\n  }\n  if (!editorConfig.strikethrough) {\n    config.nodes.s = undefined;\n  }\n  if (!editorConfig.link) {\n    config.nodes.link = undefined;\n  }\n  if (!editorConfig.image) {\n    config.nodes.image = undefined;\n  }\n  if (!editorConfig.divider) {\n    config.nodes.hr = undefined;\n  }\n  if (!editorConfig.table) {\n    config.nodes.table = undefined;\n  }\n  for (const [name, component] of Object.entries(opts.components || {})) {\n    var _opts$render;\n    const isEmpty = component.kind === 'block' || component.kind === 'inline';\n    config.tags[name] = {\n      render: (_opts$render = opts.render) === null || _opts$render === void 0 || (_opts$render = _opts$render.tags) === null || _opts$render === void 0 ? void 0 : _opts$render[name],\n      children: isEmpty ? [] : undefined,\n      selfClosing: isEmpty,\n      attributes: fieldsToMarkdocAttributes(component.schema),\n      description: 'description' in component ? component.description : undefined,\n      inline: component.kind === 'inline' || component.kind === 'mark'\n    };\n  }\n  for (const [name, render] of Object.entries(((_opts$render2 = opts.render) === null || _opts$render2 === void 0 ? void 0 : _opts$render2.nodes) || {})) {\n    var _opts$render2;\n    const nodeSchema = config.nodes[name];\n    if (nodeSchema) {\n      nodeSchema.render = render;\n    }\n  }\n  return config;\n}\n\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction getDirectoriesForEditorField(components, config) {\n  return [...collectDirectoriesUsedInSchema(object(Object.fromEntries(Object.entries(components).map(([name, component]) => [name, object(component.schema)])))), ...(typeof config.image === 'object' && typeof config.image.directory === 'string' ? [fixPath(config.image.directory)] : [])];\n}\nfunction markdoc({\n  label,\n  description,\n  options = {},\n  components = {},\n  extension = 'mdoc'\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (_, {\n      content,\n      other,\n      external,\n      slug\n    }) => {\n      const text = textDecoder.decode(content);\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.p)(text, getSchema());\n    },\n    contentExtension: `.${extension}`,\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.k)();\n      return {\n        content: textEncoder.encode(out.content),\n        external: out.external,\n        other: out.other,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: (_, {\n        content\n      }) => {\n        const text = textDecoder.decode(content);\n        return {\n          node: (0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(text)\n        };\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n}\nmarkdoc.createMarkdocConfig = createMarkdocConfig;\nmarkdoc.inline = function inlineMarkdoc({\n  label,\n  description,\n  options = {},\n  components = {}\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'assets',\n    defaultValue() {\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (value, {\n      other,\n      external,\n      slug\n    }) => {\n      if (value === undefined) {\n        value = '';\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n      }\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.p)(value, getSchema());\n    },\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.k)();\n      return {\n        external: out.external,\n        other: out.other,\n        value: out.content\n      };\n    },\n    reader: {\n      parse: value => {\n        if (value === undefined) {\n          value = '';\n        }\n        if (typeof value !== 'string') {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n        }\n        return {\n          node: (0,_markdoc_markdoc_dist_index_mjs__WEBPACK_IMPORTED_MODULE_5__.parse)(value)\n        };\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n};\nfunction mdx({\n  label,\n  description,\n  options = {},\n  components = {},\n  extension = 'mdx'\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'content',\n    defaultValue() {\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (_, {\n      content,\n      other,\n      external,\n      slug\n    }) => {\n      const text = textDecoder.decode(content);\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.o)(text, getSchema());\n    },\n    contentExtension: `.${extension}`,\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.q)();\n      return {\n        content: textEncoder.encode(out.content),\n        external: out.external,\n        other: out.other,\n        value: undefined\n      };\n    },\n    reader: {\n      parse: (_, {\n        content\n      }) => {\n        const text = textDecoder.decode(content);\n        return text;\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n}\nmdx.inline = function mdx({\n  label,\n  description,\n  options = {},\n  components = {}\n}) {\n  let schema;\n  const config = editorOptionsToConfig(options);\n  let getSchema = () => {\n    if (!schema) {\n      schema = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.r)();\n    }\n    return schema;\n  };\n  return {\n    kind: 'form',\n    formKind: 'assets',\n    defaultValue() {\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.j)(getSchema());\n    },\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h, {\n        description: description,\n        label: label,\n        ...props\n      });\n    },\n    parse: (value, {\n      other,\n      external,\n      slug\n    }) => {\n      if (value === undefined) {\n        value = '';\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n      }\n      return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.o)(value, getSchema());\n    },\n    validate(value) {\n      return value;\n    },\n    directories: getDirectoriesForEditorField(components, config),\n    serialize(value, {\n      slug\n    }) {\n      const out = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.q)();\n      return {\n        external: out.external,\n        other: out.other,\n        value: out.content\n      };\n    },\n    reader: {\n      parse: value => {\n        if (value === undefined) {\n          value = '';\n        }\n        if (typeof value !== 'string') {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.F('Must be a string');\n        }\n        return value;\n      }\n    },\n    collaboration: {\n      toYjs(value) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.l)(value.doc);\n      },\n      fromYjs(yjsValue, awareness) {\n        return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.m)(getSchema());\n      }\n    }\n  };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvaW5kZXgtYjJkZTliZTEubm9kZS5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDaEI7QUFDYztBQUM2WDtBQUNsWjtBQUNKOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw2REFBVztBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMsZUFBZTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFVBQVU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxRQUFRLElBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLGtEQUFVO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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azovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9pbmRleC1iMmRlOWJlMS5ub2RlLnJlYWN0LXNlcnZlci5qcz80NDVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlLCBub2RlcyB9IGZyb20gJ0BtYXJrZG9jL21hcmtkb2MvZGlzdC9pbmRleC5tanMnO1xuaW1wb3J0IHsgYXNzZXJ0TmV2ZXIgfSBmcm9tICdlbWVyeS9hc3NlcnRpb25zJztcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0TmV2ZXIgYXMgYXNzZXJ0TmV2ZXIkMSB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCB7IGIgYXMgYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2UsIHQgYXMgdGV4dCwgRiBhcyBGaWVsZERhdGFFcnJvciwgaCBhcyBEb2N1bWVudEZpZWxkSW5wdXQsIG4gYXMgbm9ybWFsaXplRG9jdW1lbnRGaWVsZENoaWxkcmVuLCBpIGFzIHNlcmlhbGl6ZU1hcmtkb2MsIGogYXMgZ2V0RGVmYXVsdFZhbHVlLCBwIGFzIHBhcnNlVG9FZGl0b3JTdGF0ZSwgayBhcyBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGUsIGwgYXMgcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCwgbSBhcyBjcmVhdGVFZGl0b3JTdGF0ZUZyb21ZSlMsIG8gYXMgcGFyc2VUb0VkaXRvclN0YXRlTURYLCBxIGFzIHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZU1EWCwgciBhcyBjcmVhdGVFZGl0b3JTY2hlbWEgfSBmcm9tICcuL2luZGV4LTEwZWE1MGUyLm5vZGUucmVhY3Qtc2VydmVyLmpzJztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5mdW5jdGlvbiBvYmplY3QoZmllbGRzLCBvcHRzKSB7XG4gIHJldHVybiB7XG4gICAgLi4ub3B0cyxcbiAgICBraW5kOiAnb2JqZWN0JyxcbiAgICBmaWVsZHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBpbnB1dFBhdGgpIHtcbiAgY29uc3QgcGF0aCA9IFsuLi5pbnB1dFBhdGhdO1xuICB3aGlsZSAocGF0aC5sZW5ndGgpIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoLnNoaWZ0KCk7XG4gICAgdmFsdWUgPSB2YWx1ZVtrZXldO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybVByb3BzKHNjaGVtYSwgdmFsdWUsIHZpc2l0b3JzLCBwYXRoID0gW10pIHtcbiAgaWYgKHNjaGVtYS5raW5kID09PSAnZm9ybScgfHwgc2NoZW1hLmtpbmQgPT09ICdjaGlsZCcpIHtcbiAgICBpZiAodmlzaXRvcnNbc2NoZW1hLmtpbmRdKSB7XG4gICAgICByZXR1cm4gdmlzaXRvcnNbc2NoZW1hLmtpbmRdKHNjaGVtYSwgdmFsdWUsIHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IHZhbCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWEuZmllbGRzKS5tYXAoKFtrZXksIHZhbF0pID0+IHtcbiAgICAgIHJldHVybiBba2V5LCB0cmFuc2Zvcm1Qcm9wcyh2YWwsIHZhbHVlW2tleV0sIHZpc2l0b3JzLCBbLi4ucGF0aCwga2V5XSldO1xuICAgIH0pKTtcbiAgICBpZiAodmlzaXRvcnMub2JqZWN0KSB7XG4gICAgICByZXR1cm4gdmlzaXRvcnNbc2NoZW1hLmtpbmRdKHNjaGVtYSwgdmFsLCBwYXRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICBjb25zdCB2YWwgPSB2YWx1ZS5tYXAoKHZhbCwgaWR4KSA9PiB0cmFuc2Zvcm1Qcm9wcyhzY2hlbWEuZWxlbWVudCwgdmFsLCB2aXNpdG9ycywgcGF0aC5jb25jYXQoaWR4KSkpO1xuICAgIGlmICh2aXNpdG9ycy5hcnJheSkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgY29uc3QgZGlzY3JpbWluYW50ID0gdHJhbnNmb3JtUHJvcHMoc2NoZW1hLmRpc2NyaW1pbmFudCwgdmFsdWUuZGlzY3JpbWluYW50LCB2aXNpdG9ycywgcGF0aC5jb25jYXQoJ2Rpc2NyaW1pbmFudCcpKTtcbiAgICBjb25zdCBjb25kaXRpb25hbFZhbCA9IHRyYW5zZm9ybVByb3BzKHNjaGVtYS52YWx1ZXNbZGlzY3JpbWluYW50LnRvU3RyaW5nKCldLCB2YWx1ZS52YWx1ZSwgdmlzaXRvcnMsIHBhdGguY29uY2F0KCd2YWx1ZScpKTtcbiAgICBjb25zdCB2YWwgPSB7XG4gICAgICBkaXNjcmltaW5hbnQsXG4gICAgICB2YWx1ZTogY29uZGl0aW9uYWxWYWxcbiAgICB9O1xuICAgIGlmICh2aXNpdG9ycy5jb25kaXRpb25hbCkge1xuICAgICAgcmV0dXJuIHZpc2l0b3JzW3NjaGVtYS5raW5kXShzY2hlbWEsIHZhbCwgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgYXNzZXJ0TmV2ZXIoc2NoZW1hKTtcbn1cblxuLy8gYSB2IGltcG9ydGFudCBub3RlXG4vLyBtYXJrcyBpbiB0aGUgbWFya2Rvd24gYXN0L2h0bWwgYXJlIHJlcHJlc2VudGVkIHF1aXRlIGRpZmZlcmVudGx5IHRvIGhvdyB0aGV5IGFyZSBpbiBzbGF0ZVxuLy8gaWYgeW91IGhhZCB0aGUgbWFya2Rvd24gKipzb21ldGhpbmcgaHR0cHM6Ly9rZXlzdG9uZWpzLmNvbSBzb21ldGhpbmcqKlxuLy8gdGhlIGJvbGQgbm9kZSBpcyB0aGUgcGFyZW50IG9mIHRoZSBsaW5rIG5vZGVcbi8vIGJ1dCBpbiBzbGF0ZSwgbWFya3MgYXJlIG9ubHkgcmVwcmVzZW50ZWQgb24gdGV4dCBub2Rlc1xuXG5jb25zdCBjdXJyZW50bHlBY3RpdmVNYXJrcyA9IG5ldyBTZXQoKTtcbmNvbnN0IGN1cnJlbnRseURpc2FibGVkTWFya3MgPSBuZXcgU2V0KCk7XG5sZXQgY3VycmVudExpbmsgPSBudWxsO1xuZnVuY3Rpb24gYWRkTWFya1RvQ2hpbGRyZW4obWFyaywgY2IpIHtcbiAgY29uc3Qgd2FzUHJldmlvdXNseUFjdGl2ZSA9IGN1cnJlbnRseUFjdGl2ZU1hcmtzLmhhcyhtYXJrKTtcbiAgY3VycmVudGx5QWN0aXZlTWFya3MuYWRkKG1hcmspO1xuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGZpbmFsbHkge1xuICAgIGlmICghd2FzUHJldmlvdXNseUFjdGl2ZSkge1xuICAgICAgY3VycmVudGx5QWN0aXZlTWFya3MuZGVsZXRlKG1hcmspO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0TGlua0ZvckNoaWxkcmVuKGhyZWYsIGNiKSB7XG4gIC8vIHdlJ2xsIG9ubHkgdXNlIHRoZSBvdXRlciBsaW5rXG4gIGlmIChjdXJyZW50TGluayAhPT0gbnVsbCkge1xuICAgIHJldHVybiBjYigpO1xuICB9XG4gIGN1cnJlbnRMaW5rID0gaHJlZjtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2IoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBjdXJyZW50TGluayA9IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgbW9yZSBzdHJpY3QgdGhhbiBgRWxlbWVudCAmIHsgdHlwZTogJ2xpbmsnOyB9YCBiZWNhdXNlIGBjaGlsZHJlbmBcbiAqIGlzIGNvbnN0cmFpbmVkIHRvIG9ubHkgY29udGFpbiBUZXh0IG5vZGVzLiBUaGlzIGNhbid0IGJlIGFzc3VtZWQgZ2VuZXJhbGx5IGFyb3VuZCB0aGUgZWRpdG9yXG4gKiAoYmVjYXVzZSBvZiBwb3RlbnRpYWxseSBmdXR1cmUgaW5saW5lIGNvbXBvbmVudHMgb3IgbmVzdGVkIGxpbmtzKHdoaWNoIGFyZSBub3JtYWxpemVkIGF3YXkgYnV0IHRoZSBlZGl0b3IgbmVlZHMgdG8gbm90IGJyZWFrIGlmIGl0IGhhcHBlbnMpKVxuICogYnV0IHdoZXJlIHRoaXMgdHlwZSBpcyB1c2VkLCB3ZSdyZSBvbmx5IGdvaW5nIHRvIGFsbG93IGxpbmtzIHRvIGNvbnRhaW4gVGV4dCBhbmQgdGhhdCdzIGltcG9ydGFudFxuICogc28gdGhhdCB3ZSBrbm93IGEgYmxvY2sgd2lsbCBuZXZlciBiZSBpbnNpZGUgYW4gaW5saW5lIGJlY2F1c2UgU2xhdGUgZ2V0cyB1bmhhcHB5IHdoZW4gdGhhdCBoYXBwZW5zXG4gKiAocmVhbGx5IHRoZSBsaW5rIGlubGluZSBzaG91bGQgcHJvYmFibHkgYmUgYSBtYXJrIHJhdGhlciB0aGFuIGFuIGlubGluZSxcbiAqIG5vbi12b2lkIGlubGluZXMgYXJlIHByb2JhYmx5IGFsd2F5cyBiYWQgYnV0IHRoYXQgd291bGQgaW1wbHkgY2hhbmdpbmcgdGhlIGRvY3VtZW50XG4gKiBzdHJ1Y3R1cmUgd2hpY2ggd291bGQgYmUgc3VjaCB1bm5lY2Vzc2FyeSBicmVha2FnZSlcbiAqL1xuXG5mdW5jdGlvbiBnZXRJbmxpbmVOb2Rlcyh0ZXh0KSB7XG4gIGNvbnN0IG5vZGUgPSB7XG4gICAgdGV4dFxuICB9O1xuICBmb3IgKGNvbnN0IG1hcmsgb2YgY3VycmVudGx5QWN0aXZlTWFya3MpIHtcbiAgICBpZiAoIWN1cnJlbnRseURpc2FibGVkTWFya3MuaGFzKG1hcmspKSB7XG4gICAgICBub2RlW21hcmtdID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnRMaW5rICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIFt7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH0sIHtcbiAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgIGhyZWY6IGN1cnJlbnRMaW5rLFxuICAgICAgY2hpbGRyZW46IFtub2RlXVxuICAgIH0sIHtcbiAgICAgIHRleHQ6ICcnXG4gICAgfV07XG4gIH1cbiAgcmV0dXJuIFtub2RlXTtcbn1cblxuY2xhc3MgVmFyaWFibGVDaGlsZEZpZWxkcyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ1RoZXJlIGFyZSBhIHZhcmlhYmxlIG51bWJlciBvZiBjaGlsZCBmaWVsZHMnKTtcbiAgfVxufVxuZnVuY3Rpb24gZmluZFNpbmdsZUNoaWxkRmllbGQoc2NoZW1hKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gX2ZpbmRDb25zdGFudENoaWxkRmllbGRzKHNjaGVtYSwgW10sIG5ldyBTZXQoKSk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgfVxuICAgIHJldHVybjtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhcmlhYmxlQ2hpbGRGaWVsZHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5mdW5jdGlvbiBfZmluZENvbnN0YW50Q2hpbGRGaWVsZHMoc2NoZW1hLCBwYXRoLCBzZWVuU2NoZW1hcykge1xuICBpZiAoc2VlblNjaGVtYXMuaGFzKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgc2VlblNjaGVtYXMuYWRkKHNjaGVtYSk7XG4gIHN3aXRjaCAoc2NoZW1hLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiBbXTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gW3tcbiAgICAgICAgcmVsYXRpdmVQYXRoOiBwYXRoLFxuICAgICAgICBvcHRpb25zOiBzY2hlbWEub3B0aW9ucyxcbiAgICAgICAga2luZDogJ2NoaWxkJ1xuICAgICAgfV07XG4gICAgY2FzZSAnY29uZGl0aW9uYWwnOlxuICAgICAge1xuICAgICAgICBpZiAoY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhcmlhYmxlQ2hpbGRGaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAge1xuICAgICAgICBpZiAoc2NoZW1hLmFzQ2hpbGRUYWcpIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IF9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyhzY2hlbWEuZWxlbWVudCwgW10sIHNlZW5TY2hlbWFzKTtcbiAgICAgICAgICBpZiAoY2hpbGQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIGtpbmQ6ICdhcnJheScsXG4gICAgICAgICAgICBhc0NoaWxkVGFnOiBzY2hlbWEuYXNDaGlsZFRhZyxcbiAgICAgICAgICAgIGZpZWxkOiBzY2hlbWEsXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGg6IHBhdGgsXG4gICAgICAgICAgICBjaGlsZDogY2hpbGRbMF1cbiAgICAgICAgICB9XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bGRDb250YWluQ2hpbGRGaWVsZChzY2hlbWEpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhcmlhYmxlQ2hpbGRGaWVsZHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgcGF0aHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2NoZW1hLmZpZWxkcykpIHtcbiAgICAgICAgICBwYXRocy5wdXNoKC4uLl9maW5kQ29uc3RhbnRDaGlsZEZpZWxkcyh2YWx1ZSwgcGF0aC5jb25jYXQoa2V5KSwgc2VlblNjaGVtYXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aHM7XG4gICAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLCBzZWVuID0gbmV3IFNldCgpKSB7XG4gIGlmIChzZWVuLmhhcyhzY2hlbWEpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHNlZW4uYWRkKHNjaGVtYSk7XG4gIHN3aXRjaCAoc2NoZW1hLmtpbmQpIHtcbiAgICBjYXNlICdmb3JtJzpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlICdjaGlsZCc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBjYXNlICdjb25kaXRpb25hbCc6XG4gICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzY2hlbWEudmFsdWVzKS5zb21lKHZhbHVlID0+IGNvdWxkQ29udGFpbkNoaWxkRmllbGQodmFsdWUsIHNlZW4pKTtcbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHNjaGVtYS5maWVsZHMpLnNvbWUoa2V5ID0+IGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLmZpZWxkc1trZXldLCBzZWVuKSk7XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAgcmV0dXJuIGNvdWxkQ29udGFpbkNoaWxkRmllbGQoc2NoZW1hLmVsZW1lbnQsIHNlZW4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlubGluZU5vZGVGcm9tTWFya2RvYyhub2RlKSB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdpbmxpbmUnKSB7XG4gICAgcmV0dXJuIGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbik7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2xpbmsnKSB7XG4gICAgcmV0dXJuIHNldExpbmtGb3JDaGlsZHJlbihub2RlLmF0dHJpYnV0ZXMuaHJlZiwgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgcmV0dXJuIGdldElubGluZU5vZGVzKG5vZGUuYXR0cmlidXRlcy5jb250ZW50KTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnc3Ryb25nJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignYm9sZCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdjb2RlJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignY29kZScsICgpID0+IGdldElubGluZU5vZGVzKG5vZGUuYXR0cmlidXRlcy5jb250ZW50KSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2VtJykge1xuICAgIHJldHVybiBhZGRNYXJrVG9DaGlsZHJlbignaXRhbGljJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3MnKSB7XG4gICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdzdHJpa2V0aHJvdWdoJywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhZycpIHtcbiAgICBpZiAobm9kZS50YWcgPT09ICd1Jykge1xuICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCd1bmRlcmxpbmUnLCAoKSA9PiBpbmxpbmVDaGlsZHJlbkZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pKTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAna2JkJykge1xuICAgICAgcmV0dXJuIGFkZE1hcmtUb0NoaWxkcmVuKCdrZXlib2FyZCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdzdWInKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N1YnNjcmlwdCcsICgpID0+IGlubGluZUNoaWxkcmVuRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbikpO1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdzdXAnKSB7XG4gICAgICByZXR1cm4gYWRkTWFya1RvQ2hpbGRyZW4oJ3N1cGVyc2NyaXB0JywgKCkgPT4gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2RlLmNoaWxkcmVuKSk7XG4gICAgfVxuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdzb2Z0YnJlYWsnKSB7XG4gICAgcmV0dXJuIGdldElubGluZU5vZGVzKCcgJyk7XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hhcmRicmVhaycpIHtcbiAgICByZXR1cm4gZ2V0SW5saW5lTm9kZXMoJ1xcbicpO1xuICB9XG4gIGlmIChub2RlLnRhZyA9PT0gJ2NvbXBvbmVudC1pbmxpbmUtcHJvcCcgJiYgQXJyYXkuaXNBcnJheShub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGgpICYmIG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aC5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgeCA9PT0gJ251bWJlcicpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdjb21wb25lbnQtaW5saW5lLXByb3AnLFxuICAgICAgY2hpbGRyZW46IGlubGluZUZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pLFxuICAgICAgcHJvcFBhdGg6IG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aFxuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGlubGluZSBub2RlIHR5cGU6ICR7bm9kZS50eXBlfWApO1xufVxuZnVuY3Rpb24gaW5saW5lQ2hpbGRyZW5Gcm9tTWFya2RvYyhub2Rlcykge1xuICByZXR1cm4gbm9kZXMuZmxhdE1hcChpbmxpbmVOb2RlRnJvbU1hcmtkb2MpO1xufVxuZnVuY3Rpb24gaW5saW5lRnJvbU1hcmtkb2Mobm9kZXMpIHtcbiAgY29uc3QgdHJhbnNmb3JtZWROb2RlcyA9IG5vZGVzLmZsYXRNYXAoaW5saW5lTm9kZUZyb21NYXJrZG9jKTtcbiAgY29uc3QgbmV4dE5vZGVzID0gW107XG4gIGxldCBsYXN0Tm9kZTtcbiAgZm9yIChjb25zdCBbaWR4LCBub2RlXSBvZiB0cmFuc2Zvcm1lZE5vZGVzLmVudHJpZXMoKSkge1xuICAgIHZhciBfbGFzdE5vZGU7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gdW5kZWZpbmVkICYmIG5vZGUudGV4dCA9PT0gJycgJiYgKChfbGFzdE5vZGUgPSBsYXN0Tm9kZSkgPT09IG51bGwgfHwgX2xhc3ROb2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbGFzdE5vZGUudHlwZSkgPT09IHVuZGVmaW5lZCAmJiBpZHggIT09IHRyYW5zZm9ybWVkTm9kZXMubGVuZ3RoIC0gMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG5leHROb2Rlcy5wdXNoKG5vZGUpO1xuICAgIGxhc3ROb2RlID0gbm9kZTtcbiAgfVxuICBpZiAoIW5leHROb2Rlcy5sZW5ndGgpIHtcbiAgICBuZXh0Tm9kZXMucHVzaCh7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXh0Tm9kZXM7XG59XG5mdW5jdGlvbiBmcm9tTWFya2RvYyhub2RlLCBjb21wb25lbnRCbG9ja3MpIHtcbiAgY29uc3Qgbm9kZXMgPSBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSk7XG4gIGlmIChub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgIHRleHQ6ICcnXG4gICAgICB9XVxuICAgIH1dO1xuICB9XG4gIGlmIChub2Rlc1tub2Rlcy5sZW5ndGggLSAxXS50eXBlICE9PSAncGFyYWdyYXBoJykge1xuICAgIG5vZGVzLnB1c2goe1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuZnVuY3Rpb24gZnJvbU1hcmtkb2NOb2RlKG5vZGUsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAobm9kZS50eXBlID09PSAnYmxvY2txdW90ZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2Jsb2NrcXVvdGUnLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2ZlbmNlJykge1xuICAgIGNvbnN0IHtcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgY29udGVudCxcbiAgICAgIC4uLnJlc3RcbiAgICB9ID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnY29kZScsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogY29udGVudC5yZXBsYWNlKC9cXG4kLywgJycpXG4gICAgICB9XSxcbiAgICAgIC4uLih0eXBlb2YgbGFuZ3VhZ2UgPT09ICdzdHJpbmcnID8ge1xuICAgICAgICBsYW5ndWFnZVxuICAgICAgfSA6IHt9KSxcbiAgICAgIC4uLnJlc3RcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICdoZWFkaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5ub2RlLmF0dHJpYnV0ZXMsXG4gICAgICBsZXZlbDogbm9kZS5hdHRyaWJ1dGVzLmxldmVsLFxuICAgICAgdHlwZTogJ2hlYWRpbmcnLFxuICAgICAgY2hpbGRyZW46IGlubGluZUZyb21NYXJrZG9jKG5vZGUuY2hpbGRyZW4pXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnbGlzdCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogbm9kZS5hdHRyaWJ1dGVzLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAnaXRlbScpIHtcbiAgICB2YXIgX25vZGUkY2hpbGRyZW4kO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW3tcbiAgICAgIHR5cGU6ICdsaXN0LWl0ZW0tY29udGVudCcsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPyBpbmxpbmVGcm9tTWFya2RvYyhbbm9kZS5jaGlsZHJlblswXV0pIDogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfV07XG4gICAgaWYgKCgoX25vZGUkY2hpbGRyZW4kID0gbm9kZS5jaGlsZHJlblsxXSkgPT09IG51bGwgfHwgX25vZGUkY2hpbGRyZW4kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZSRjaGlsZHJlbiQudHlwZSkgPT09ICdsaXN0Jykge1xuICAgICAgY29uc3QgbGlzdCA9IG5vZGUuY2hpbGRyZW5bMV07XG4gICAgICBjaGlsZHJlbi5wdXNoKHtcbiAgICAgICAgdHlwZTogbGlzdC5hdHRyaWJ1dGVzLm9yZGVyZWQgPyAnb3JkZXJlZC1saXN0JyA6ICd1bm9yZGVyZWQtbGlzdCcsXG4gICAgICAgIGNoaWxkcmVuOiBsaXN0LmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2xpc3QtaXRlbScsXG4gICAgICBjaGlsZHJlblxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3BhcmFncmFwaCcpIHtcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgbm9kZS5jaGlsZHJlblswXS50eXBlID09PSAnaW5saW5lJyAmJiBub2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBub2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgIHZhciBfaW1hZ2UkYXR0cmlidXRlcyR0aXQ7XG4gICAgICBjb25zdCBpbWFnZSA9IG5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICBzcmM6IGRlY29kZVVSSShpbWFnZS5hdHRyaWJ1dGVzLnNyYyksXG4gICAgICAgIGFsdDogaW1hZ2UuYXR0cmlidXRlcy5hbHQsXG4gICAgICAgIHRpdGxlOiAoX2ltYWdlJGF0dHJpYnV0ZXMkdGl0ID0gaW1hZ2UuYXR0cmlidXRlcy50aXRsZSkgIT09IG51bGwgJiYgX2ltYWdlJGF0dHJpYnV0ZXMkdGl0ICE9PSB2b2lkIDAgPyBfaW1hZ2UkYXR0cmlidXRlcyR0aXQgOiAnJyxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkcmVuID0gaW5saW5lRnJvbU1hcmtkb2Mobm9kZS5jaGlsZHJlbik7XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJiBjaGlsZHJlblswXS50eXBlID09PSAnY29tcG9uZW50LWlubGluZS1wcm9wJykge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuWzBdO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHRleHRBbGlnbjogbm9kZS5hdHRyaWJ1dGVzLnRleHRBbGlnblxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ2hyJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnZGl2aWRlcicsXG4gICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgdGV4dDogJydcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGFibGUnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZScsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGJvZHknKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1ib2R5JyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0aGVhZCcpIHtcbiAgICBpZiAoIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1oZWFkJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0cicpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLXJvdycsXG4gICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgfTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSAndGQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd0YWJsZS1jZWxsJyxcbiAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmZsYXRNYXAoeCA9PiBmcm9tTWFya2RvY05vZGUoeCwgY29tcG9uZW50QmxvY2tzKSlcbiAgICB9O1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09ICd0aCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3RhYmxlLWNlbGwnLFxuICAgICAgaGVhZGVyOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgIH07XG4gIH1cbiAgaWYgKG5vZGUudHlwZSA9PT0gJ3RhZycpIHtcbiAgICBpZiAobm9kZS50YWcgPT09ICd0YWJsZScpIHtcbiAgICAgIHJldHVybiBmcm9tTWFya2RvY05vZGUobm9kZS5jaGlsZHJlblswXSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnbGF5b3V0Jykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2xheW91dCcsXG4gICAgICAgIGxheW91dDogbm9kZS5hdHRyaWJ1dGVzLmxheW91dCxcbiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnbGF5b3V0LWFyZWEnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGF5b3V0LWFyZWEnLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50YWcgPT09ICdjb21wb25lbnQtYmxvY2snKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcG9uZW50LWJsb2NrJyxcbiAgICAgICAgY29tcG9uZW50OiBub2RlLmF0dHJpYnV0ZXMuY29tcG9uZW50LFxuICAgICAgICBwcm9wczogbm9kZS5hdHRyaWJ1dGVzLnByb3BzLFxuICAgICAgICBjaGlsZHJlbjogbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgPyBbe1xuICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtaW5saW5lLXByb3AnLFxuICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgdGV4dDogJydcbiAgICAgICAgICB9XVxuICAgICAgICB9XSA6IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnID09PSAnY29tcG9uZW50LWJsb2NrLXByb3AnICYmIEFycmF5LmlzQXJyYXkobm9kZS5hdHRyaWJ1dGVzLnByb3BQYXRoKSAmJiBub2RlLmF0dHJpYnV0ZXMucHJvcFBhdGguZXZlcnkoeCA9PiB0eXBlb2YgeCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHggPT09ICdudW1iZXInKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jay1wcm9wJyxcbiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKSxcbiAgICAgICAgcHJvcFBhdGg6IG5vZGUuYXR0cmlidXRlcy5wcm9wUGF0aFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUudGFnKSB7XG4gICAgICBjb25zdCBjb21wb25lbnRCbG9jayA9IGNvbXBvbmVudEJsb2Nrc1tub2RlLnRhZ107XG4gICAgICBpZiAoY29tcG9uZW50QmxvY2spIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ2hpbGRGaWVsZCA9IGZpbmRTaW5nbGVDaGlsZEZpZWxkKHtcbiAgICAgICAgICBraW5kOiAnb2JqZWN0JyxcbiAgICAgICAgICBmaWVsZHM6IGNvbXBvbmVudEJsb2NrLnNjaGVtYVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNpbmdsZUNoaWxkRmllbGQpIHtcbiAgICAgICAgICBjb25zdCBuZXdBdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShub2RlLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyhub2RlLmNoaWxkcmVuLCBjaGlsZHJlbiwgbmV3QXR0cmlidXRlcywgc2luZ2xlQ2hpbGRGaWVsZCwgW10sIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQtYmxvY2snLFxuICAgICAgICAgICAgY29tcG9uZW50OiBub2RlLnRhZyxcbiAgICAgICAgICAgIHByb3BzOiBuZXdBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudC1ibG9jaycsXG4gICAgICAgICAgY29tcG9uZW50OiBub2RlLnRhZyxcbiAgICAgICAgICBwcm9wczogbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCA/IFt7XG4gICAgICAgICAgICB0eXBlOiAnY29tcG9uZW50LWlubGluZS1wcm9wJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XSA6IG5vZGUuY2hpbGRyZW4uZmxhdE1hcCh4ID0+IGZyb21NYXJrZG9jTm9kZSh4LCBjb21wb25lbnRCbG9ja3MpKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdGFnOiAke25vZGUudGFnfWApO1xuICB9XG4gIHJldHVybiBpbmxpbmVOb2RlRnJvbU1hcmtkb2Mobm9kZSk7XG59XG5mdW5jdGlvbiB0b0NoaWxkcmVuQW5kUHJvcHMoZnJvbU1hcmtkb2MsIHJlc3VsdGluZ0NoaWxkcmVuLCB2YWx1ZSwgc2luZ2xlQ2hpbGRGaWVsZCwgcGFyZW50UHJvcFBhdGgsIGNvbXBvbmVudEJsb2Nrcykge1xuICBpZiAoc2luZ2xlQ2hpbGRGaWVsZC5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmcm9tTWFya2RvYy5mbGF0TWFwKHggPT4gZnJvbU1hcmtkb2NOb2RlKHgsIGNvbXBvbmVudEJsb2NrcykpO1xuICAgIHJlc3VsdGluZ0NoaWxkcmVuLnB1c2goe1xuICAgICAgdHlwZTogYGNvbXBvbmVudC0ke3NpbmdsZUNoaWxkRmllbGQub3B0aW9ucy5raW5kfS1wcm9wYCxcbiAgICAgIHByb3BQYXRoOiBbLi4ucGFyZW50UHJvcFBhdGgsIC4uLnNpbmdsZUNoaWxkRmllbGQucmVsYXRpdmVQYXRoXSxcbiAgICAgIGNoaWxkcmVuXG4gICAgfSk7XG4gIH1cbiAgaWYgKHNpbmdsZUNoaWxkRmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IFtpZHgsIGNoaWxkXSBvZiBmcm9tTWFya2RvYy5lbnRyaWVzKCkpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSAncGFyYWdyYXBoJykge1xuICAgICAgICBjaGlsZCA9IGNoaWxkLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnR5cGUgIT09ICd0YWcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdHlwZTogJHtjaGlsZC50eXBlfWApO1xuICAgICAgfVxuICAgICAgaWYgKGNoaWxkLnRhZyAhPT0gc2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgdGFnICR7c2luZ2xlQ2hpbGRGaWVsZC5hc0NoaWxkVGFnfSwgZm91bmQgdGFnOiAke2NoaWxkLnRhZ31gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNoaWxkLmF0dHJpYnV0ZXMpKTtcbiAgICAgIGlmIChzaW5nbGVDaGlsZEZpZWxkLmNoaWxkKSB7XG4gICAgICAgIHRvQ2hpbGRyZW5BbmRQcm9wcyhjaGlsZC5jaGlsZHJlbiwgcmVzdWx0aW5nQ2hpbGRyZW4sIGF0dHJpYnV0ZXMsIHNpbmdsZUNoaWxkRmllbGQuY2hpbGQsIFsuLi5wYXJlbnRQcm9wUGF0aCwgLi4uc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgsIGlkeF0sIGNvbXBvbmVudEJsb2Nrcyk7XG4gICAgICB9XG4gICAgICBhcnIucHVzaChhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGhbc2luZ2xlQ2hpbGRGaWVsZC5yZWxhdGl2ZVBhdGgubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgcGFyZW50ID0gZ2V0VmFsdWVBdFByb3BQYXRoKHZhbHVlLCBzaW5nbGVDaGlsZEZpZWxkLnJlbGF0aXZlUGF0aC5zbGljZSgwLCAtMSkpO1xuICAgIHBhcmVudFtrZXldID0gYXJyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpeFBhdGgocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eXFwuP1xcLysvLCAnJykucmVwbGFjZSgvXFwvKiQvLCAnJyk7XG59XG5jb25zdCBjb2xsZWN0aW9uUGF0aCA9IC9cXC9cXCpcXCo/KD86JHxcXC8pLztcbmZ1bmN0aW9uIGdldENvbmZpZ3VyZWRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgdmFyIF9jb2xsZWN0aW9uQ29uZmlnJHBhdDtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgY29uc3QgcGF0aCA9IChfY29sbGVjdGlvbkNvbmZpZyRwYXQgPSBjb2xsZWN0aW9uQ29uZmlnLnBhdGgpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uQ29uZmlnJHBhdCAhPT0gdm9pZCAwID8gX2NvbGxlY3Rpb25Db25maWckcGF0IDogYCR7Y29sbGVjdGlvbn0vKi9gO1xuICBpZiAoIWNvbGxlY3Rpb25QYXRoLnRlc3QocGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbGxlY3Rpb24gcGF0aCBtdXN0IGVuZCB3aXRoIC8qIG9yIC8qKiBvciBpbmNsdWRlIC8qLyBvciAvKiovIGJ1dCAke2NvbGxlY3Rpb259IGhhcyAke3BhdGh9YCk7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29uZmlndXJlZFBhdGggPSBnZXRDb25maWd1cmVkQ29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3QgcGF0aCA9IGZpeFBhdGgoY29uZmlndXJlZFBhdGgucmVwbGFjZSgvXFwqXFwqPy4qJC8sICcnKSk7XG4gIHJldHVybiBwYXRoO1xufVxuZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbkZvcm1hdChjb25maWcsIGNvbGxlY3Rpb24pIHtcbiAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IGNvbmZpZy5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXTtcbiAgcmV0dXJuIGdldEZvcm1hdEluZm8oY29sbGVjdGlvbkNvbmZpZykoZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbikpO1xufVxuZnVuY3Rpb24gZ2V0U2luZ2xldG9uRm9ybWF0KGNvbmZpZywgc2luZ2xldG9uKSB7XG4gIHZhciBfc2luZ2xldG9uQ29uZmlnJHBhdGg7XG4gIGNvbnN0IHNpbmdsZXRvbkNvbmZpZyA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl07XG4gIHJldHVybiBnZXRGb3JtYXRJbmZvKHNpbmdsZXRvbkNvbmZpZykoKF9zaW5nbGV0b25Db25maWckcGF0aCA9IHNpbmdsZXRvbkNvbmZpZy5wYXRoKSAhPT0gbnVsbCAmJiBfc2luZ2xldG9uQ29uZmlnJHBhdGggIT09IHZvaWQgMCA/IF9zaW5nbGV0b25Db25maWckcGF0aCA6IGAke3NpbmdsZXRvbn0vYCk7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVBhdGgoY29uZmlnLCBjb2xsZWN0aW9uLCBzbHVnKSB7XG4gIGNvbnN0IGJhc2VQYXRoID0gZ2V0Q29sbGVjdGlvblBhdGgoY29uZmlnLCBjb2xsZWN0aW9uKTtcbiAgY29uc3Qgc3VmZml4ID0gZ2V0Q29sbGVjdGlvbkl0ZW1TbHVnU3VmZml4KGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBgJHtiYXNlUGF0aH0vJHtzbHVnfSR7c3VmZml4fWA7XG59XG5mdW5jdGlvbiBnZXRFbnRyeURhdGFGaWxlcGF0aChkaXIsIGZvcm1hdEluZm8pIHtcbiAgcmV0dXJuIGAke2Rpcn0ke2Zvcm1hdEluZm8uZGF0YUxvY2F0aW9uID09PSAnaW5kZXgnID8gJy9pbmRleCcgOiAnJ30ke2dldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdEluZm8pfWA7XG59XG5mdW5jdGlvbiBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24oY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb25QYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIHJldHVybiBjb2xsZWN0aW9uUGF0aC5pbmNsdWRlcygnKionKSA/ICcqKicgOiAnKic7XG59XG5mdW5jdGlvbiBnZXRDb2xsZWN0aW9uSXRlbVNsdWdTdWZmaXgoY29uZmlnLCBjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IGNvbmZpZ3VyZWRQYXRoID0gZ2V0Q29uZmlndXJlZENvbGxlY3Rpb25QYXRoKGNvbmZpZywgY29sbGVjdGlvbik7XG4gIGNvbnN0IHBhdGggPSBmaXhQYXRoKGNvbmZpZ3VyZWRQYXRoLnJlcGxhY2UoL15bXipdK1xcKlxcKj8vLCAnJykpO1xuICByZXR1cm4gcGF0aCA/IGAvJHtwYXRofWAgOiAnJztcbn1cbmZ1bmN0aW9uIGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pIHtcbiAgdmFyIF9zaW5nbGV0b24kcGF0aCwgX3NpbmdsZXRvbiRwYXRoMjtcbiAgaWYgKChfc2luZ2xldG9uJHBhdGggPSBjb25maWcuc2luZ2xldG9uc1tzaW5nbGV0b25dLnBhdGgpICE9PSBudWxsICYmIF9zaW5nbGV0b24kcGF0aCAhPT0gdm9pZCAwICYmIF9zaW5nbGV0b24kcGF0aC5pbmNsdWRlcygnKicpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTaW5nbGV0b24gcGF0aHMgY2Fubm90IGluY2x1ZGUgKiBidXQgJHtzaW5nbGV0b259IGhhcyAke2NvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aH1gKTtcbiAgfVxuICByZXR1cm4gZml4UGF0aCgoX3NpbmdsZXRvbiRwYXRoMiA9IGNvbmZpZy5zaW5nbGV0b25zW3NpbmdsZXRvbl0ucGF0aCkgIT09IG51bGwgJiYgX3NpbmdsZXRvbiRwYXRoMiAhPT0gdm9pZCAwID8gX3NpbmdsZXRvbiRwYXRoMiA6IHNpbmdsZXRvbik7XG59XG5mdW5jdGlvbiBnZXREYXRhRmlsZUV4dGVuc2lvbihmb3JtYXRJbmZvKSB7XG4gIHJldHVybiBmb3JtYXRJbmZvLmNvbnRlbnRGaWVsZCA/IGZvcm1hdEluZm8uY29udGVudEZpZWxkLmNvbnRlbnRFeHRlbnNpb24gOiAnLicgKyBmb3JtYXRJbmZvLmRhdGE7XG59XG5mdW5jdGlvbiB3ZWFrTWVtb2l6ZShmdW5jKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbiAgcmV0dXJuIGFyZyA9PiB7XG4gICAgaWYgKGNhY2hlLmhhcyhhcmcpKSB7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KGFyZyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmMoYXJnKTtcbiAgICBjYWNoZS5zZXQoYXJnLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5mdW5jdGlvbiBtZW1vaXplKGZ1bmMpIHtcbiAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gIHJldHVybiBhcmcgPT4ge1xuICAgIGlmIChjYWNoZS5oYXMoYXJnKSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmdldChhcmcpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBmdW5jKGFyZyk7XG4gICAgY2FjaGUuc2V0KGFyZywgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuY29uc3QgZ2V0Rm9ybWF0SW5mbyA9IHdlYWtNZW1vaXplKGNvbGxlY3Rpb25PclNpbmdsZXRvbiA9PiB7XG4gIHJldHVybiBtZW1vaXplKHBhdGggPT4gX2dldEZvcm1hdEluZm8oY29sbGVjdGlvbk9yU2luZ2xldG9uLCBwYXRoKSk7XG59KTtcbmZ1bmN0aW9uIF9nZXRGb3JtYXRJbmZvKGNvbGxlY3Rpb25PclNpbmdsZXRvbiwgcGF0aCkge1xuICB2YXIgX2Zvcm1hdCRkYXRhO1xuICBjb25zdCBkYXRhTG9jYXRpb24gPSBwYXRoLmVuZHNXaXRoKCcvJykgPyAnaW5kZXgnIDogJ291dGVyJztcbiAgY29uc3Qge1xuICAgIHNjaGVtYSxcbiAgICBmb3JtYXQgPSAneWFtbCdcbiAgfSA9IGNvbGxlY3Rpb25PclNpbmdsZXRvbjtcbiAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFMb2NhdGlvbixcbiAgICAgIGNvbnRlbnRGaWVsZDogdW5kZWZpbmVkLFxuICAgICAgZGF0YTogZm9ybWF0XG4gICAgfTtcbiAgfVxuICBsZXQgY29udGVudEZpZWxkO1xuICBpZiAoZm9ybWF0LmNvbnRlbnRGaWVsZCkge1xuICAgIGxldCBmaWVsZCA9IHtcbiAgICAgIGtpbmQ6ICdvYmplY3QnLFxuICAgICAgZmllbGRzOiBzY2hlbWFcbiAgICB9O1xuICAgIGxldCBwYXRoID0gQXJyYXkuaXNBcnJheShmb3JtYXQuY29udGVudEZpZWxkKSA/IGZvcm1hdC5jb250ZW50RmllbGQgOiBbZm9ybWF0LmNvbnRlbnRGaWVsZF07XG4gICAgY29udGVudEZpZWxkID0ge1xuICAgICAgcGF0aCxcbiAgICAgIGNvbnRlbnRFeHRlbnNpb246IGdldENvbnRlbnRFeHRlbnNpb24ocGF0aCwgZmllbGQsICgpID0+IHBhdGgubGVuZ3RoID09PSAxID8gcGF0aFswXSA6IEpTT04uc3RyaW5naWZ5KHBhdGgpKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBkYXRhOiAoX2Zvcm1hdCRkYXRhID0gZm9ybWF0LmRhdGEpICE9PSBudWxsICYmIF9mb3JtYXQkZGF0YSAhPT0gdm9pZCAwID8gX2Zvcm1hdCRkYXRhIDogJ3lhbWwnLFxuICAgIGNvbnRlbnRGaWVsZCxcbiAgICBkYXRhTG9jYXRpb25cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldENvbnRlbnRFeHRlbnNpb24ocGF0aCwgc2NoZW1hLCBkZWJ1Z05hbWUpIHtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKHNjaGVtYS5raW5kICE9PSAnZm9ybScgfHwgc2NoZW1hLmZvcm1LaW5kICE9PSAnY29udGVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udGVudCBmaWVsZCBmb3IgJHtkZWJ1Z05hbWUoKX0gaXMgbm90IGEgY29udGVudCBmaWVsZGApO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hLmNvbnRlbnRFeHRlbnNpb247XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBnZXRDb250ZW50RXh0ZW5zaW9uKHBhdGguc2xpY2UoMSksIHNjaGVtYS5maWVsZHNbcGF0aFswXV0sIGRlYnVnTmFtZSk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgaWYgKHBhdGhbMF0gIT09ICd2YWx1ZScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZGl0aW9uYWwgZmllbGRzIHJlZmVyZW5jZWQgaW4gYSBjb250ZW50RmllbGQgcGF0aCBtdXN0IG9ubHkgcmVmZXJlbmNlIHRoZSB2YWx1ZSBmaWVsZCAoJHtkZWJ1Z05hbWUoKX0pYCk7XG4gICAgfVxuICAgIGxldCBjb250ZW50RXh0ZW5zaW9uO1xuICAgIGNvbnN0IGlubmVyUGF0aCA9IHBhdGguc2xpY2UoMSk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiBPYmplY3QudmFsdWVzKHNjaGVtYS52YWx1ZXMpKSB7XG4gICAgICBjb25zdCBmb3VuZENvbnRlbnRFeHRlbnNpb24gPSBnZXRDb250ZW50RXh0ZW5zaW9uKGlubmVyUGF0aCwgdmFsdWUsIGRlYnVnTmFtZSk7XG4gICAgICBpZiAoIWNvbnRlbnRFeHRlbnNpb24pIHtcbiAgICAgICAgY29udGVudEV4dGVuc2lvbiA9IGZvdW5kQ29udGVudEV4dGVuc2lvbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoY29udGVudEV4dGVuc2lvbiAhPT0gZm91bmRDb250ZW50RXh0ZW5zaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY29udGVudEZpZWxkICR7ZGVidWdOYW1lKCl9IGhhcyBjb25mbGljdGluZyBjb250ZW50IGV4dGVuc2lvbnNgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFjb250ZW50RXh0ZW5zaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNvbnRlbnRGaWVsZCAke2RlYnVnTmFtZSgpfSBkb2VzIG5vdCBwb2ludCB0byBhIGNvbnRlbnQgZmllbGRgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnRFeHRlbnNpb247XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBQYXRoIHNwZWNpZmllZCBpbiBjb250ZW50RmllbGQgJHtkZWJ1Z05hbWUoKX0gZG9lcyBub3QgcG9pbnQgdG8gYSBjb250ZW50IGZpZWxkYCk7XG59XG5cbmZ1bmN0aW9uIGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBzbHVnKSB7XG4gIHJldHVybiB0eXBlb2YgcHVibGljUGF0aCA9PT0gJ3N0cmluZycgPyBgJHtwdWJsaWNQYXRoLnJlcGxhY2UoL1xcLyokLywgJycpfS8ke3NsdWcgPT09IHVuZGVmaW5lZCA/ICcnIDogc2x1ZyArICcvJ31gIDogJyc7XG59XG5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRmlsZXMobm9kZXMsIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpIHtcbiAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICBpZiAobm9kZS50eXBlID09PSAnY29tcG9uZW50LWJsb2NrJykge1xuICAgICAgY29uc3QgY29tcG9uZW50QmxvY2sgPSBjb21wb25lbnRCbG9ja3Nbbm9kZS5jb21wb25lbnRdO1xuICAgICAgaWYgKCFjb21wb25lbnRCbG9jaykgcmV0dXJuIG5vZGU7XG4gICAgICBjb25zdCBzY2hlbWEgPSBvYmplY3QoY29tcG9uZW50QmxvY2suc2NoZW1hKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm5vZGUsXG4gICAgICAgIHByb3BzOiBkZXNlcmlhbGl6ZVByb3BzKHNjaGVtYSwgbm9kZS5wcm9wcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobm9kZS50eXBlID09PSAnaW1hZ2UnICYmIHR5cGVvZiBub2RlLnNyYyA9PT0gJ3N0cmluZycgJiYgbW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICB2YXIgX3JlZjtcbiAgICAgIGNvbnN0IHByZWZpeCA9IGdldFNyY1ByZWZpeEZvckltYWdlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgc2x1Zyk7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IG5vZGUuc3JjLnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgICAgY29uc3QgY29udGVudCA9IChfcmVmID0gdHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IG90aGVyRmlsZXMuZ2V0KGZpeFBhdGgoZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5KSkgOiBmaWxlcykgPT09IG51bGwgfHwgX3JlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlZi5nZXQoZmlsZW5hbWUpO1xuICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICB0ZXh0OiBgTWlzc2luZyBpbWFnZSAke2ZpbGVuYW1lfWBcbiAgICAgICAgICB9XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgc3JjOiB7XG4gICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgICAgY29udGVudFxuICAgICAgICB9LFxuICAgICAgICBhbHQ6IG5vZGUuYWx0LFxuICAgICAgICB0aXRsZTogbm9kZS50aXRsZSxcbiAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgdGV4dDogJydcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygbm9kZS50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBkZXNlcmlhbGl6ZUZpbGVzKG5vZGUuY2hpbGRyZW4sIGNvbXBvbmVudEJsb2NrcywgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIGRvY3VtZW50RmVhdHVyZXMsIHNsdWcpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgY2hpbGRyZW5cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvcHMoc2NoZW1hLCB2YWx1ZSwgZmlsZXMsIG90aGVyRmlsZXMsIG1vZGUsIHNsdWcpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybVByb3BzKHNjaGVtYSwgdmFsdWUsIHtcbiAgICBmb3JtOiAoc2NoZW1hLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0Jykge1xuICAgICAgICB2YXIgX290aGVyRmlsZXMkZ2V0O1xuICAgICAgICBpZiAobW9kZSA9PT0gJ3JlYWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHNjaGVtYS5yZWFkZXIucGFyc2UodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2NoZW1hLmZpbGVuYW1lKHZhbHVlLCB7XG4gICAgICAgICAgc2x1ZyxcbiAgICAgICAgICBzdWdnZXN0ZWRGaWxlbmFtZVByZWZpeDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2NoZW1hLnBhcnNlKHZhbHVlLCB7XG4gICAgICAgICAgYXNzZXQ6IGZpbGVuYW1lID8gc2NoZW1hLmRpcmVjdG9yeSA/IChfb3RoZXJGaWxlcyRnZXQgPSBvdGhlckZpbGVzLmdldChzY2hlbWEuZGlyZWN0b3J5KSkgPT09IG51bGwgfHwgX290aGVyRmlsZXMkZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3RoZXJGaWxlcyRnZXQuZ2V0KGZpbGVuYW1lKSA6IGZpbGVzLmdldChmaWxlbmFtZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgc2x1Z1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50JyB8fCBzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldHMnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAobW9kZSA9PT0gJ3JlYWQnKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEucmVhZGVyLnBhcnNlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzY2hlbWEucGFyc2UodmFsdWUsIHVuZGVmaW5lZCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFNyY1ByZWZpeEZvckltYWdlQmxvY2soZG9jdW1lbnRGZWF0dXJlcywgc2x1Zykge1xuICByZXR1cm4gZ2V0U3JjUHJlZml4KHR5cGVvZiBkb2N1bWVudEZlYXR1cmVzLmltYWdlcyA9PT0gJ29iamVjdCcgPyBkb2N1bWVudEZlYXR1cmVzLmltYWdlcy5wdWJsaWNQYXRoIDogdW5kZWZpbmVkLCBzbHVnKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2hhMShjb250ZW50KSB7XG4gIHJldHVybiBjcmVhdGVIYXNoKCdzaGExJykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG59XG5cbmNvbnN0IHRleHRFbmNvZGVyJDEgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmNvbnN0IGJsb2JTaGFDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5hc3luYyBmdW5jdGlvbiBibG9iU2hhKGNvbnRlbnRzKSB7XG4gIGNvbnN0IGNhY2hlZCA9IGJsb2JTaGFDYWNoZS5nZXQoY29udGVudHMpO1xuICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHJldHVybiBjYWNoZWQ7XG4gIGNvbnN0IGJsb2JQcmVmaXggPSB0ZXh0RW5jb2RlciQxLmVuY29kZSgnYmxvYiAnICsgY29udGVudHMubGVuZ3RoICsgJ1xcMCcpO1xuICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJsb2JQcmVmaXguYnl0ZUxlbmd0aCArIGNvbnRlbnRzLmJ5dGVMZW5ndGgpO1xuICBhcnJheS5zZXQoYmxvYlByZWZpeCwgMCk7XG4gIGFycmF5LnNldChjb250ZW50cywgYmxvYlByZWZpeC5ieXRlTGVuZ3RoKTtcbiAgY29uc3QgZGlnZXN0UHJvbWlzZSA9IHNoYTEoYXJyYXkpO1xuICBibG9iU2hhQ2FjaGUuc2V0KGNvbnRlbnRzLCBkaWdlc3RQcm9taXNlKTtcbiAgZGlnZXN0UHJvbWlzZS50aGVuKGRpZ2VzdCA9PiBibG9iU2hhQ2FjaGUuc2V0KGNvbnRlbnRzLCBkaWdlc3QpKTtcbiAgcmV0dXJuIGRpZ2VzdFByb21pc2U7XG59XG5mdW5jdGlvbiBnZXRUcmVlTm9kZUF0UGF0aChyb290LCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuICBsZXQgbm9kZSA9IHJvb3QuZ2V0KHBhcnRzWzBdKTtcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzLnNsaWNlKDEpKSB7XG4gICAgaWYgKCFub2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICghbm9kZS5jaGlsZHJlbikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBub2RlID0gbm9kZS5jaGlsZHJlbi5nZXQocGFydCk7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5mdW5jdGlvbiBnZXROb2RlQXRQYXRoKHRyZWUsIHBhdGgpIHtcbiAgaWYgKHBhdGggPT09ICcnKSByZXR1cm4gdHJlZTtcbiAgbGV0IG5vZGUgPSB0cmVlO1xuICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aC5zcGxpdCgnLycpKSB7XG4gICAgaWYgKCFub2RlLmhhcyhwYXJ0KSkge1xuICAgICAgbm9kZS5zZXQocGFydCwgbmV3IE1hcCgpKTtcbiAgICB9XG4gICAgY29uc3QgaW5uZXJOb2RlID0gbm9kZS5nZXQocGFydCk7XG4gICAgYXNzZXJ0KGlubmVyTm9kZSBpbnN0YW5jZW9mIE1hcCwgJ2V4cGVjdGVkIHRyZWUnKTtcbiAgICBub2RlID0gaW5uZXJOb2RlO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gZ2V0RmlsZW5hbWUocGF0aCkge1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC8uKlxcLy8sICcnKTtcbn1cbmZ1bmN0aW9uIGdldERpcm5hbWUocGF0aCkge1xuICBpZiAoIXBhdGguaW5jbHVkZXMoJy8nKSkgcmV0dXJuICcnO1xuICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC9bXi9dKyQvLCAnJyk7XG59XG5mdW5jdGlvbiB0b1RyZWVDaGFuZ2VzKGNoYW5nZXMpIHtcbiAgY29uc3QgY2hhbmdlc1Jvb3QgPSBuZXcgTWFwKCk7XG4gIGZvciAoY29uc3QgZGVsZXRpb24gb2YgY2hhbmdlcy5kZWxldGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShkZWxldGlvbikpO1xuICAgIHBhcmVudFRyZWUuc2V0KGdldEZpbGVuYW1lKGRlbGV0aW9uKSwgJ2RlbGV0ZScpO1xuICB9XG4gIGZvciAoY29uc3QgYWRkaXRpb24gb2YgY2hhbmdlcy5hZGRpdGlvbnMpIHtcbiAgICBjb25zdCBwYXJlbnRUcmVlID0gZ2V0Tm9kZUF0UGF0aChjaGFuZ2VzUm9vdCwgZ2V0RGlybmFtZShhZGRpdGlvbi5wYXRoKSk7XG4gICAgcGFyZW50VHJlZS5zZXQoZ2V0RmlsZW5hbWUoYWRkaXRpb24ucGF0aCksIGFkZGl0aW9uLmNvbnRlbnRzKTtcbiAgfVxuICByZXR1cm4gY2hhbmdlc1Jvb3Q7XG59XG5jb25zdCBTUEFDRV9DSEFSX0NPREUgPSAzMjtcbmNvbnN0IHNwYWNlID0gbmV3IFVpbnQ4QXJyYXkoW1NQQUNFX0NIQVJfQ09ERV0pO1xuY29uc3QgbnVsbGNoYXIgPSBuZXcgVWludDhBcnJheShbMF0pO1xuY29uc3QgdHJlZSA9IHRleHRFbmNvZGVyJDEuZW5jb2RlKCd0cmVlICcpO1xuXG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vaXNvbW9ycGhpYy1naXQvaXNvbW9ycGhpYy1naXQvYmxvYi9jMDlkZmEyMGZmZTBhYjllNjYwMmUwZmExNzJkNzJiYTg5OTRlNDQzL3NyYy9tb2RlbHMvR2l0VHJlZS5qcyNMMTA4LUwxMjJcbmZ1bmN0aW9uIHRyZWVTaGEoY2hpbGRyZW4pIHtcbiAgY29uc3QgZW50cmllcyA9IFsuLi5jaGlsZHJlbl0ubWFwKChbbmFtZSwgbm9kZV0pID0+ICh7XG4gICAgbmFtZSxcbiAgICBzaGE6IG5vZGUuZW50cnkuc2hhLFxuICAgIG1vZGU6IG5vZGUuZW50cnkubW9kZVxuICB9KSk7XG4gIGVudHJpZXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFOYW1lID0gYS5tb2RlID09PSAnMDQwMDAwJyA/IGEubmFtZSArICcvJyA6IGEubmFtZTtcbiAgICBjb25zdCBiTmFtZSA9IGIubW9kZSA9PT0gJzA0MDAwMCcgPyBiLm5hbWUgKyAnLycgOiBiLm5hbWU7XG4gICAgcmV0dXJuIGFOYW1lID09PSBiTmFtZSA/IDAgOiBhTmFtZSA8IGJOYW1lID8gLTEgOiAxO1xuICB9KTtcbiAgY29uc3QgdHJlZU9iamVjdCA9IGVudHJpZXMuZmxhdE1hcChlbnRyeSA9PiB7XG4gICAgY29uc3QgbW9kZSA9IHRleHRFbmNvZGVyJDEuZW5jb2RlKGVudHJ5Lm1vZGUucmVwbGFjZSgvXjAvLCAnJykpO1xuICAgIGNvbnN0IG5hbWUgPSB0ZXh0RW5jb2RlciQxLmVuY29kZShlbnRyeS5uYW1lKTtcbiAgICBjb25zdCBzaGEgPSBoZXhUb0J5dGVzKGVudHJ5LnNoYSk7XG4gICAgcmV0dXJuIFttb2RlLCBzcGFjZSwgbmFtZSwgbnVsbGNoYXIsIHNoYV07XG4gIH0pO1xuICByZXR1cm4gc2hhMShjb25jYXRCeXRlcyhbdHJlZSwgdGV4dEVuY29kZXIkMS5lbmNvZGUodHJlZU9iamVjdC5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwuYnl0ZUxlbmd0aCwgMCkudG9TdHJpbmcoKSksIG51bGxjaGFyLCAuLi50cmVlT2JqZWN0XSkpO1xufVxuZnVuY3Rpb24gY29uY2F0Qnl0ZXMoYnl0ZUFycmF5cykge1xuICBjb25zdCB0b3RhbExlbmd0aCA9IGJ5dGVBcnJheXMucmVkdWNlKChzdW0sIGFycikgPT4gc3VtICsgYXJyLmJ5dGVMZW5ndGgsIDApO1xuICBjb25zdCByZXN1bHQgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBmb3IgKGNvbnN0IGFyciBvZiBieXRlQXJyYXlzKSB7XG4gICAgcmVzdWx0LnNldChhcnIsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IGFyci5ieXRlTGVuZ3RoO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBoZXhUb0J5dGVzKHN0cikge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KHN0ci5sZW5ndGggLyAyKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5ieXRlTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBzdGFydCA9IGkgKiAyO1xuICAgIGJ5dGVzW2ldID0gcGFyc2VJbnQoc3RyLnNsaWNlKHN0YXJ0LCBzdGFydCArIDIpLCAxNik7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHJlZU5vZGVFbnRyeShwYXRoLCBjaGlsZHJlbikge1xuICBjb25zdCBzaGEgPSBhd2FpdCB0cmVlU2hhKGNoaWxkcmVuKTtcbiAgcmV0dXJuIHtcbiAgICBwYXRoLFxuICAgIG1vZGU6ICcwNDAwMDAnLFxuICAgIHR5cGU6ICd0cmVlJyxcbiAgICBzaGFcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJsb2JOb2RlRW50cnkocGF0aCwgY29udGVudHMpIHtcbiAgY29uc3Qgc2hhID0gJ3NoYScgaW4gY29udGVudHMgPyBjb250ZW50cy5zaGEgOiBhd2FpdCBibG9iU2hhKGNvbnRlbnRzKTtcbiAgcmV0dXJuIHtcbiAgICBwYXRoLFxuICAgIG1vZGU6ICcxMDA2NDQnLFxuICAgIHR5cGU6ICdibG9iJyxcbiAgICBzaGFcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyh0cmVlLCBjaGFuZ2VzKSB7XG4gIHZhciBfYXdhaXQkdXBkYXRlVHJlZTtcbiAgY29uc3QgbmV3VHJlZSA9IChfYXdhaXQkdXBkYXRlVHJlZSA9IGF3YWl0IHVwZGF0ZVRyZWUodHJlZSwgdG9UcmVlQ2hhbmdlcyhjaGFuZ2VzKSwgW10pKSAhPT0gbnVsbCAmJiBfYXdhaXQkdXBkYXRlVHJlZSAhPT0gdm9pZCAwID8gX2F3YWl0JHVwZGF0ZVRyZWUgOiBuZXcgTWFwKCk7XG4gIHJldHVybiB7XG4gICAgZW50cmllczogdHJlZVRvRW50cmllcyhuZXdUcmVlKSxcbiAgICBzaGE6IGF3YWl0IHRyZWVTaGEobmV3VHJlZSAhPT0gbnVsbCAmJiBuZXdUcmVlICE9PSB2b2lkIDAgPyBuZXdUcmVlIDogbmV3IE1hcCgpKVxuICB9O1xufVxuZnVuY3Rpb24gdHJlZVRvRW50cmllcyh0cmVlKSB7XG4gIHJldHVybiBbLi4udHJlZS52YWx1ZXMoKV0uZmxhdE1hcCh4ID0+IHguY2hpbGRyZW4gPyBbeC5lbnRyeSwgLi4udHJlZVRvRW50cmllcyh4LmNoaWxkcmVuKV0gOiBbeC5lbnRyeV0pO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVHJlZSh0cmVlLCBjaGFuZ2VkVHJlZSwgcGF0aCkge1xuICBjb25zdCBuZXdUcmVlID0gbmV3IE1hcCh0cmVlKTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgY2hhbmdlZFRyZWUpIHtcbiAgICBpZiAodmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgIHZhciBfbmV3VHJlZSRnZXQkY2hpbGRyZW4sIF9uZXdUcmVlJGdldDtcbiAgICAgIGNvbnN0IGV4aXN0aW5nQ2hpbGRyZW4gPSAoX25ld1RyZWUkZ2V0JGNoaWxkcmVuID0gKF9uZXdUcmVlJGdldCA9IG5ld1RyZWUuZ2V0KGtleSkpID09PSBudWxsIHx8IF9uZXdUcmVlJGdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25ld1RyZWUkZ2V0LmNoaWxkcmVuKSAhPT0gbnVsbCAmJiBfbmV3VHJlZSRnZXQkY2hpbGRyZW4gIT09IHZvaWQgMCA/IF9uZXdUcmVlJGdldCRjaGlsZHJlbiA6IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gYXdhaXQgdXBkYXRlVHJlZShleGlzdGluZ0NoaWxkcmVuLCB2YWx1ZSwgcGF0aC5jb25jYXQoa2V5KSk7XG4gICAgICBpZiAoY2hpbGRyZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdUcmVlLmRlbGV0ZShrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgY3JlYXRlVHJlZU5vZGVFbnRyeShwYXRoLmNvbmNhdChrZXkpLmpvaW4oJy8nKSwgY2hpbGRyZW4pO1xuICAgICAgbmV3VHJlZS5zZXQoa2V5LCB7XG4gICAgICAgIGVudHJ5LFxuICAgICAgICBjaGlsZHJlblxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAnc2hhJyBpbiB2YWx1ZSkge1xuICAgICAgY29uc3QgZW50cnkgPSBhd2FpdCBjcmVhdGVCbG9iTm9kZUVudHJ5KHBhdGguY29uY2F0KGtleSkuam9pbignLycpLCB2YWx1ZSk7XG4gICAgICBuZXdUcmVlLnNldChrZXksIHtcbiAgICAgICAgZW50cnlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAobmV3VHJlZS5zaXplID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gbmV3VHJlZTtcbn1cbmZ1bmN0aW9uIHRyZWVFbnRyaWVzVG9UcmVlTm9kZXMoZW50cmllcykge1xuICBjb25zdCByb290ID0gbmV3IE1hcCgpO1xuICBjb25zdCBnZXRDaGlsZHJlbkF0UGF0aCA9IHBhcnRzID0+IHtcbiAgICB2YXIgX25vZGU7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICAgIGxldCBub2RlID0gcm9vdC5nZXQocGFydHNbMF0pO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5zbGljZSgxKSkge1xuICAgICAgaWYgKCFub2RlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKCFub2RlLmNoaWxkcmVuKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW4uZ2V0KHBhcnQpO1xuICAgIH1cbiAgICByZXR1cm4gKF9ub2RlID0gbm9kZSkgPT09IG51bGwgfHwgX25vZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlLmNoaWxkcmVuO1xuICB9O1xuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBzcGxpdCA9IGVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdldENoaWxkcmVuQXRQYXRoKHNwbGl0LnNsaWNlKDAsIC0xKSk7XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBjaGlsZHJlbi5zZXQoc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0sIHtcbiAgICAgICAgZW50cnksXG4gICAgICAgIGNoaWxkcmVuOiBlbnRyeS50eXBlID09PSAndHJlZScgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpIHtcbiAgaWYgKHNlZW5TY2hlbWFzLmhhcyhzY2hlbWEpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlZW5TY2hlbWFzLmFkZChzY2hlbWEpO1xuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdhcnJheScpIHtcbiAgICByZXR1cm4gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLmVsZW1lbnQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnY2hpbGQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChzY2hlbWEua2luZCA9PT0gJ2Zvcm0nKSB7XG4gICAgaWYgKHNjaGVtYS5mb3JtS2luZCA9PT0gJ2Fzc2V0JyAmJiBzY2hlbWEuZGlyZWN0b3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKHNjaGVtYS5kaXJlY3RvcnkpKTtcbiAgICB9XG4gICAgaWYgKChzY2hlbWEuZm9ybUtpbmQgPT09ICdjb250ZW50JyB8fCBzY2hlbWEuZm9ybUtpbmQgPT09ICdhc3NldHMnKSAmJiBzY2hlbWEuZGlyZWN0b3JpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBkaXJlY3Rvcnkgb2Ygc2NoZW1hLmRpcmVjdG9yaWVzKSB7XG4gICAgICAgIGRpcmVjdG9yaWVzLmFkZChmaXhQYXRoKGRpcmVjdG9yeSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNjaGVtYS5raW5kID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgT2JqZWN0LnZhbHVlcyhzY2hlbWEuZmllbGRzKSkge1xuICAgICAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoZmllbGQsIGRpcmVjdG9yaWVzLCBzZWVuU2NoZW1hcyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2NoZW1hLmtpbmQgPT09ICdjb25kaXRpb25hbCcpIHtcbiAgICBmb3IgKGNvbnN0IGlubmVyU2NoZW1hIG9mIE9iamVjdC52YWx1ZXMoc2NoZW1hLnZhbHVlcykpIHtcbiAgICAgIGNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYUlubmVyKGlubmVyU2NoZW1hLCBkaXJlY3Rvcmllcywgc2VlblNjaGVtYXMpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgYXNzZXJ0TmV2ZXIkMShzY2hlbWEpO1xufVxuZnVuY3Rpb24gY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKHNjaGVtYSkge1xuICBjb25zdCBkaXJlY3RvcmllcyA9IG5ldyBTZXQoKTtcbiAgY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hSW5uZXIoc2NoZW1hLCBkaXJlY3RvcmllcywgbmV3IFNldCgpKTtcbiAgcmV0dXJuIGRpcmVjdG9yaWVzO1xufVxuZnVuY3Rpb24gZ2V0RGlyZWN0b3JpZXNGb3JUcmVlS2V5KHNjaGVtYSwgZGlyZWN0b3J5LCBzbHVnLCBmb3JtYXQpIHtcbiAgY29uc3QgZGlyZWN0b3JpZXMgPSBbZml4UGF0aChkaXJlY3RvcnkpXTtcbiAgaWYgKGZvcm1hdC5kYXRhTG9jYXRpb24gPT09ICdvdXRlcicpIHtcbiAgICBkaXJlY3Rvcmllcy5wdXNoKGZpeFBhdGgoZGlyZWN0b3J5KSArIGdldERhdGFGaWxlRXh0ZW5zaW9uKGZvcm1hdCkpO1xuICB9XG4gIGNvbnN0IHRvQWRkID0gc2x1ZyA9PT0gdW5kZWZpbmVkID8gJycgOiBgLyR7c2x1Z31gO1xuICBmb3IgKGNvbnN0IGRpcmVjdG9yeSBvZiBjb2xsZWN0RGlyZWN0b3JpZXNVc2VkSW5TY2hlbWEoc2NoZW1hKSkge1xuICAgIGRpcmVjdG9yaWVzLnB1c2goZGlyZWN0b3J5ICsgdG9BZGQpO1xuICB9XG4gIHJldHVybiBkaXJlY3Rvcmllcztcbn1cblxuY29uc3QgdGV4dERlY29kZXIkMSA9IG5ldyBUZXh0RGVjb2RlcigpO1xuY29uc3QgZGVmYXVsdEFsdEZpZWxkJDEgPSB0ZXh0KHtcbiAgbGFiZWw6ICdBbHQgdGV4dCcsXG4gIGRlc2NyaXB0aW9uOiAnVGhpcyB0ZXh0IHdpbGwgYmUgdXNlZCBieSBzY3JlZW4gcmVhZGVycyBhbmQgc2VhcmNoIGVuZ2luZXMuJ1xufSk7XG5jb25zdCBlbXB0eVRpdGxlRmllbGQkMSA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgSW5wdXQoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0sXG4gIHBhcnNlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWVcbiAgICB9O1xuICB9LFxuICBsYWJlbDogJ1RpdGxlJ1xufSk7XG5mdW5jdGlvbiBub3JtYWxpc2VEb2N1bWVudEZlYXR1cmVzKGNvbmZpZykge1xuICB2YXIgX2NvbmZpZyRmb3JtYXR0aW5nLCBfZm9ybWF0dGluZyRhbGlnbm1lbnQsIF9mb3JtYXR0aW5nJGFsaWdubWVudDIsIF9mb3JtYXR0aW5nJGJsb2NrVHlwZSwgX2Zvcm1hdHRpbmckaW5saW5lTWFyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLCBfZm9ybWF0dGluZyRpbmxpbmVNYXIzLCBfZm9ybWF0dGluZyRpbmxpbmVNYXI0LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LCBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LCBfZm9ybWF0dGluZyRsaXN0VHlwZXMsIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIsIF9pbWFnZXNDb25maWckc2NoZW1hJCwgX2ltYWdlc0NvbmZpZyRzY2hlbWEsIF9pbWFnZXNDb25maWckc2NoZW1hJDIsIF9pbWFnZXNDb25maWckc2NoZW1hMjtcbiAgY29uc3QgZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nID09PSB0cnVlID8ge1xuICAgIC8vIGFsaWdubWVudDogdHJ1ZSwgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgIGJsb2NrVHlwZXM6IHRydWUsXG4gICAgaGVhZGluZ0xldmVsczogdHJ1ZSxcbiAgICBpbmxpbmVNYXJrczogdHJ1ZSxcbiAgICBsaXN0VHlwZXM6IHRydWUsXG4gICAgc29mdEJyZWFrczogdHJ1ZVxuICB9IDogKF9jb25maWckZm9ybWF0dGluZyA9IGNvbmZpZy5mb3JtYXR0aW5nKSAhPT0gbnVsbCAmJiBfY29uZmlnJGZvcm1hdHRpbmcgIT09IHZvaWQgMCA/IF9jb25maWckZm9ybWF0dGluZyA6IHt9O1xuICBjb25zdCBpbWFnZXNDb25maWcgPSBjb25maWcuaW1hZ2VzID09PSB0cnVlID8ge30gOiBjb25maWcuaW1hZ2VzO1xuICByZXR1cm4ge1xuICAgIGZvcm1hdHRpbmc6IHtcbiAgICAgIGFsaWdubWVudDogZm9ybWF0dGluZy5hbGlnbm1lbnQgPT09IHRydWUgPyB7XG4gICAgICAgIGNlbnRlcjogdHJ1ZSxcbiAgICAgICAgZW5kOiB0cnVlXG4gICAgICB9IDoge1xuICAgICAgICBjZW50ZXI6ICEhKChfZm9ybWF0dGluZyRhbGlnbm1lbnQgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50LmNlbnRlciksXG4gICAgICAgIGVuZDogISEoKF9mb3JtYXR0aW5nJGFsaWdubWVudDIgPSBmb3JtYXR0aW5nLmFsaWdubWVudCkgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYWxpZ25tZW50MiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGFsaWdubWVudDIuZW5kKVxuICAgICAgfSxcbiAgICAgIGJsb2NrVHlwZXM6IChmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IHRydWUgPyB7XG4gICAgICAgIGJsb2NrcXVvdGU6IHRydWUsXG4gICAgICAgIGNvZGU6IHtcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgfVxuICAgICAgfSA6IHtcbiAgICAgICAgYmxvY2txdW90ZTogISEoKF9mb3JtYXR0aW5nJGJsb2NrVHlwZSA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckYmxvY2tUeXBlLmJsb2NrcXVvdGUpLFxuICAgICAgICBjb2RlOiAoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PiB7XG4gICAgICAgICAgaWYgKCgoX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9IGZvcm1hdHRpbmcuYmxvY2tUeXBlcykgPT09IG51bGwgfHwgX2Zvcm1hdHRpbmckYmxvY2tUeXBlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Zvcm1hdHRpbmckYmxvY2tUeXBlMi5jb2RlKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZSA9PT0gdHJ1ZSB8fCAhZm9ybWF0dGluZy5ibG9ja1R5cGVzLmNvZGUuc2NoZW1hKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzY2hlbWE6IG9iamVjdCh7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFsndHlwZScsICdjaGlsZHJlbicsICdsYW5ndWFnZSddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIGZvcm1hdHRpbmcuYmxvY2tUeXBlcy5jb2RlLnNjaGVtYSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHtrZXl9XCIgY2Fubm90IGJlIGEga2V5IGluIHRoZSBzY2hlbWEgZm9yIGNvZGUgYmxvY2tzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IG9iamVjdChmb3JtYXR0aW5nLmJsb2NrVHlwZXMuY29kZS5zY2hlbWEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoKVxuICAgICAgfSxcbiAgICAgIGhlYWRpbmdzOiAoX29iaiRzY2hlbWEgPT4ge1xuICAgICAgICBjb25zdCBvcHQgPSBmb3JtYXR0aW5nID09PSBudWxsIHx8IGZvcm1hdHRpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm1hdHRpbmcuaGVhZGluZ0xldmVscztcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIG9wdCA9PT0gJ29iamVjdCcgJiYgJ2xldmVscycgaW4gb3B0ID8gb3B0IDoge1xuICAgICAgICAgIGxldmVsczogb3B0LFxuICAgICAgICAgIHNjaGVtYTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvYmouc2NoZW1hKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgWyd0eXBlJywgJ2NoaWxkcmVuJywgJ2xldmVsJywgJ3RleHRBbGlnbiddKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIG9iai5zY2hlbWEpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7a2V5fVwiIGNhbm5vdCBiZSBhIGtleSBpbiB0aGUgc2NoZW1hIGZvciBoZWFkaW5nc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxldmVsczogWy4uLm5ldyBTZXQob2JqLmxldmVscyA9PT0gdHJ1ZSA/IFsxLCAyLCAzLCA0LCA1LCA2XSA6IG9iai5sZXZlbHMpXSxcbiAgICAgICAgICBzY2hlbWE6IG9iamVjdCgoX29iaiRzY2hlbWEgPSBvYmouc2NoZW1hKSAhPT0gbnVsbCAmJiBfb2JqJHNjaGVtYSAhPT0gdm9pZCAwID8gX29iaiRzY2hlbWEgOiB7fSlcbiAgICAgICAgfTtcbiAgICAgIH0pKCksXG4gICAgICBpbmxpbmVNYXJrczogZm9ybWF0dGluZy5pbmxpbmVNYXJrcyA9PT0gdHJ1ZSA/IHtcbiAgICAgICAgYm9sZDogdHJ1ZSxcbiAgICAgICAgY29kZTogdHJ1ZSxcbiAgICAgICAgaXRhbGljOiB0cnVlLFxuICAgICAgICBrZXlib2FyZDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgc3RyaWtldGhyb3VnaDogdHJ1ZSxcbiAgICAgICAgc3Vic2NyaXB0OiBmYWxzZSxcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBuYXRpdmVseSBpbiBtYXJrZG93blxuICAgICAgICBzdXBlcnNjcmlwdDogZmFsc2UsXG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHkgaW4gbWFya2Rvd25cbiAgICAgICAgdW5kZXJsaW5lOiBmYWxzZSAvLyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5IGluIG1hcmtkb3duXG4gICAgICB9IDoge1xuICAgICAgICBib2xkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyLmJvbGQpLFxuICAgICAgICBjb2RlOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyMiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjIgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXIyLmNvZGUpLFxuICAgICAgICBpdGFsaWM6ICEhKChfZm9ybWF0dGluZyRpbmxpbmVNYXIzID0gZm9ybWF0dGluZy5pbmxpbmVNYXJrcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyMyAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjMuaXRhbGljKSxcbiAgICAgICAgc3RyaWtldGhyb3VnaDogISEoKF9mb3JtYXR0aW5nJGlubGluZU1hcjQgPSBmb3JtYXR0aW5nLmlubGluZU1hcmtzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI0ICE9PSB2b2lkIDAgJiYgX2Zvcm1hdHRpbmckaW5saW5lTWFyNC5zdHJpa2V0aHJvdWdoKSxcbiAgICAgICAgdW5kZXJsaW5lOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNSA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjUgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI1LnVuZGVybGluZSksXG4gICAgICAgIGtleWJvYXJkOiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNiA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjYgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI2LmtleWJvYXJkKSxcbiAgICAgICAgc3Vic2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyNyA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjcgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI3LnN1YnNjcmlwdCksXG4gICAgICAgIHN1cGVyc2NyaXB0OiAhISgoX2Zvcm1hdHRpbmckaW5saW5lTWFyOCA9IGZvcm1hdHRpbmcuaW5saW5lTWFya3MpICE9PSBudWxsICYmIF9mb3JtYXR0aW5nJGlubGluZU1hcjggIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRpbmxpbmVNYXI4LnN1cGVyc2NyaXB0KVxuICAgICAgfSxcbiAgICAgIGxpc3RUeXBlczogZm9ybWF0dGluZy5saXN0VHlwZXMgPT09IHRydWUgPyB7XG4gICAgICAgIG9yZGVyZWQ6IHRydWUsXG4gICAgICAgIHVub3JkZXJlZDogdHJ1ZVxuICAgICAgfSA6IHtcbiAgICAgICAgb3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlcyA9IGZvcm1hdHRpbmcubGlzdFR5cGVzKSAhPT0gbnVsbCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMgIT09IHZvaWQgMCAmJiBfZm9ybWF0dGluZyRsaXN0VHlwZXMub3JkZXJlZCksXG4gICAgICAgIHVub3JkZXJlZDogISEoKF9mb3JtYXR0aW5nJGxpc3RUeXBlczIgPSBmb3JtYXR0aW5nLmxpc3RUeXBlcykgIT09IG51bGwgJiYgX2Zvcm1hdHRpbmckbGlzdFR5cGVzMiAhPT0gdm9pZCAwICYmIF9mb3JtYXR0aW5nJGxpc3RUeXBlczIudW5vcmRlcmVkKVxuICAgICAgfSxcbiAgICAgIHNvZnRCcmVha3M6ICEhZm9ybWF0dGluZy5zb2Z0QnJlYWtzXG4gICAgfSxcbiAgICBsaW5rczogISFjb25maWcubGlua3MsXG4gICAgbGF5b3V0czogWy4uLm5ldyBTZXQoKGNvbmZpZy5sYXlvdXRzIHx8IFtdKS5tYXAoeCA9PiBKU09OLnN0cmluZ2lmeSh4KSkpXS5tYXAoeCA9PiBKU09OLnBhcnNlKHgpKSxcbiAgICBkaXZpZGVyczogISFjb25maWcuZGl2aWRlcnMsXG4gICAgaW1hZ2VzOiBpbWFnZXNDb25maWcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDoge1xuICAgICAgLi4uaW1hZ2VzQ29uZmlnLFxuICAgICAgc2NoZW1hOiB7XG4gICAgICAgIGFsdDogKF9pbWFnZXNDb25maWckc2NoZW1hJCA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYSA9IGltYWdlc0NvbmZpZy5zY2hlbWEpID09PSBudWxsIHx8IF9pbWFnZXNDb25maWckc2NoZW1hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW1hZ2VzQ29uZmlnJHNjaGVtYS5hbHQpICE9PSBudWxsICYmIF9pbWFnZXNDb25maWckc2NoZW1hJCAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkIDogZGVmYXVsdEFsdEZpZWxkJDEsXG4gICAgICAgIHRpdGxlOiAoX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA9IChfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPSBpbWFnZXNDb25maWcuc2NoZW1hKSA9PT0gbnVsbCB8fCBfaW1hZ2VzQ29uZmlnJHNjaGVtYTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbWFnZXNDb25maWckc2NoZW1hMi50aXRsZSkgIT09IG51bGwgJiYgX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiAhPT0gdm9pZCAwID8gX2ltYWdlc0NvbmZpZyRzY2hlbWEkMiA6IGVtcHR5VGl0bGVGaWVsZCQxXG4gICAgICB9XG4gICAgfSxcbiAgICB0YWJsZXM6ICEhY29uZmlnLnRhYmxlc1xuICB9O1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkIGBmaWVsZHMubWFya2RvY2AgaGFzIHN1cGVyc2VkZWQgdGhpcyBmaWVsZC4gYGZpZWxkcy5tZHhgIGlzIGFsc28gYXZhaWxhYmxlIGlmIHlvdSBwcmVmZXIgTURYLlxuICovXG5mdW5jdGlvbiBkb2N1bWVudCh7XG4gIGxhYmVsLFxuICBjb21wb25lbnRCbG9ja3MgPSB7fSxcbiAgZGVzY3JpcHRpb24sXG4gIC4uLmRvY3VtZW50RmVhdHVyZXNDb25maWdcbn0pIHtcbiAgY29uc3QgZG9jdW1lbnRGZWF0dXJlcyA9IG5vcm1hbGlzZURvY3VtZW50RmVhdHVyZXMoZG9jdW1lbnRGZWF0dXJlc0NvbmZpZyk7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgIHR5cGU6ICdwYXJhZ3JhcGgnLFxuICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9XVxuICAgICAgfV07XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGNvbXBvbmVudEJsb2NrczogY29tcG9uZW50QmxvY2tzLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZG9jdW1lbnRGZWF0dXJlczogZG9jdW1lbnRGZWF0dXJlcyxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcGFyc2UoXywgZGF0YSkge1xuICAgICAgY29uc3QgbWFya2RvYyA9IHRleHREZWNvZGVyJDEuZGVjb2RlKGRhdGEuY29udGVudCk7XG4gICAgICBmcm9tTWFya2RvYyhwYXJzZShtYXJrZG9jKSwgY29tcG9uZW50QmxvY2tzKTtcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZUZpbGVzKG5vcm1hbGl6ZURvY3VtZW50RmllbGRDaGlsZHJlbigpLCBjb21wb25lbnRCbG9ja3MsIGRhdGEub3RoZXIsIGRhdGEuZXh0ZXJuYWwsICdlZGl0JywgZG9jdW1lbnRGZWF0dXJlcywgZGF0YS5zbHVnKTtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246ICcubWRvYycsXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGRpcmVjdG9yaWVzOiBbLi4uY29sbGVjdERpcmVjdG9yaWVzVXNlZEluU2NoZW1hKG9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY29tcG9uZW50QmxvY2tzKS5tYXAoKFtuYW1lLCBibG9ja10pID0+IFtuYW1lLCBvYmplY3QoYmxvY2suc2NoZW1hKV0pKSkpLCAuLi4odHlwZW9mIGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZG9jdW1lbnRGZWF0dXJlcy5pbWFnZXMuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IFtmaXhQYXRoKGRvY3VtZW50RmVhdHVyZXMuaW1hZ2VzLmRpcmVjdG9yeSldIDogW10pXSxcbiAgICBzZXJpYWxpemUodmFsdWUsIG9wdHMpIHtcbiAgICAgIHJldHVybiBzZXJpYWxpemVNYXJrZG9jKCk7XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKHZhbHVlLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IG1hcmtkb2MgPSB0ZXh0RGVjb2RlciQxLmRlY29kZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICBjb25zdCBkb2N1bWVudCA9IGZyb21NYXJrZG9jKHBhcnNlKG1hcmtkb2MpLCBjb21wb25lbnRCbG9ja3MpO1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVGaWxlcyhkb2N1bWVudCwgY29tcG9uZW50QmxvY2tzLCBuZXcgTWFwKCksIG5ldyBNYXAoKSwgJ3JlYWQnLCBkb2N1bWVudEZlYXR1cmVzLCB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuY29uc3QgZGVmYXVsdEFsdEZpZWxkID0gdGV4dCh7XG4gIGxhYmVsOiAnQWx0IHRleHQnLFxuICBkZXNjcmlwdGlvbjogJ1RoaXMgdGV4dCB3aWxsIGJlIHVzZWQgYnkgc2NyZWVuIHJlYWRlcnMgYW5kIHNlYXJjaCBlbmdpbmVzLidcbn0pO1xuY29uc3QgZW1wdHlUaXRsZUZpZWxkID0gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICBJbnB1dCgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgZGVmYXVsdFZhbHVlKCkge1xuICAgIHJldHVybiAnJztcbiAgfSxcbiAgcGFyc2UodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH0sXG4gIGxhYmVsOiAnVGl0bGUnXG59KTtcbmZ1bmN0aW9uIGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRib2xkLCBfb3B0aW9ucyRpdGFsaWMsIF9vcHRpb25zJHN0cmlrZXRocm91ZywgX29wdGlvbnMkY29kZSwgX29wdGlvbnMkYmxvY2txdW90ZSwgX29wdGlvbnMkb3JkZXJlZExpc3QsIF9vcHRpb25zJHVub3JkZXJlZExpcywgX29wdGlvbnMkdGFibGUsIF9vcHRpb25zJGxpbmssIF9vcHRpb25zJGRpdmlkZXI7XG4gIHJldHVybiB7XG4gICAgYm9sZDogKF9vcHRpb25zJGJvbGQgPSBvcHRpb25zLmJvbGQpICE9PSBudWxsICYmIF9vcHRpb25zJGJvbGQgIT09IHZvaWQgMCA/IF9vcHRpb25zJGJvbGQgOiB0cnVlLFxuICAgIGl0YWxpYzogKF9vcHRpb25zJGl0YWxpYyA9IG9wdGlvbnMuaXRhbGljKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRpdGFsaWMgIT09IHZvaWQgMCA/IF9vcHRpb25zJGl0YWxpYyA6IHRydWUsXG4gICAgc3RyaWtldGhyb3VnaDogKF9vcHRpb25zJHN0cmlrZXRocm91ZyA9IG9wdGlvbnMuc3RyaWtldGhyb3VnaCkgIT09IG51bGwgJiYgX29wdGlvbnMkc3RyaWtldGhyb3VnICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRzdHJpa2V0aHJvdWcgOiB0cnVlLFxuICAgIGNvZGU6IChfb3B0aW9ucyRjb2RlID0gb3B0aW9ucy5jb2RlKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRjb2RlICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRjb2RlIDogdHJ1ZSxcbiAgICBoZWFkaW5nOiAoKCkgPT4ge1xuICAgICAgbGV0IGxldmVscyA9IFtdO1xuICAgICAgbGV0IGxldmVsc09wdCA9IHR5cGVvZiBvcHRpb25zLmhlYWRpbmcgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMuaGVhZGluZykgPyBvcHRpb25zLmhlYWRpbmcubGV2ZWxzIDogb3B0aW9ucy5oZWFkaW5nO1xuICAgICAgaWYgKGxldmVsc09wdCA9PT0gdHJ1ZSB8fCBsZXZlbHNPcHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXZlbHMgPSBbMSwgMiwgMywgNCwgNSwgNl07XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsZXZlbHNPcHQpKSB7XG4gICAgICAgIGxldmVscyA9IGxldmVsc09wdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxldmVscyxcbiAgICAgICAgc2NoZW1hOiBvcHRpb25zLmhlYWRpbmcgJiYgdHlwZW9mIG9wdGlvbnMuaGVhZGluZyA9PT0gJ29iamVjdCcgJiYgJ3NjaGVtYScgaW4gb3B0aW9ucy5oZWFkaW5nID8gb3B0aW9ucy5oZWFkaW5nLnNjaGVtYSA6IHt9XG4gICAgICB9O1xuICAgIH0pKCksXG4gICAgYmxvY2txdW90ZTogKF9vcHRpb25zJGJsb2NrcXVvdGUgPSBvcHRpb25zLmJsb2NrcXVvdGUpICE9PSBudWxsICYmIF9vcHRpb25zJGJsb2NrcXVvdGUgIT09IHZvaWQgMCA/IF9vcHRpb25zJGJsb2NrcXVvdGUgOiB0cnVlLFxuICAgIG9yZGVyZWRMaXN0OiAoX29wdGlvbnMkb3JkZXJlZExpc3QgPSBvcHRpb25zLm9yZGVyZWRMaXN0KSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRvcmRlcmVkTGlzdCAhPT0gdm9pZCAwID8gX29wdGlvbnMkb3JkZXJlZExpc3QgOiB0cnVlLFxuICAgIHVub3JkZXJlZExpc3Q6IChfb3B0aW9ucyR1bm9yZGVyZWRMaXMgPSBvcHRpb25zLnVub3JkZXJlZExpc3QpICE9PSBudWxsICYmIF9vcHRpb25zJHVub3JkZXJlZExpcyAhPT0gdm9pZCAwID8gX29wdGlvbnMkdW5vcmRlcmVkTGlzIDogdHJ1ZSxcbiAgICB0YWJsZTogKF9vcHRpb25zJHRhYmxlID0gb3B0aW9ucy50YWJsZSkgIT09IG51bGwgJiYgX29wdGlvbnMkdGFibGUgIT09IHZvaWQgMCA/IF9vcHRpb25zJHRhYmxlIDogdHJ1ZSxcbiAgICBsaW5rOiAoX29wdGlvbnMkbGluayA9IG9wdGlvbnMubGluaykgIT09IG51bGwgJiYgX29wdGlvbnMkbGluayAhPT0gdm9pZCAwID8gX29wdGlvbnMkbGluayA6IHRydWUsXG4gICAgaW1hZ2U6IG9wdGlvbnMuaW1hZ2UgIT09IGZhbHNlID8gKChfb3B0cyR0cmFuc2Zvcm1GaWxlbmEsIF9vcHRzJHNjaGVtYSRhbHQsIF9vcHRzJHNjaGVtYSwgX29wdHMkc2NoZW1hJHRpdGxlLCBfb3B0cyRzY2hlbWEyKSA9PiB7XG4gICAgICBjb25zdCBvcHRzID0gb3B0aW9ucy5pbWFnZSA9PT0gdHJ1ZSA/IHVuZGVmaW5lZCA6IG9wdGlvbnMuaW1hZ2U7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXJlY3Rvcnk6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5kaXJlY3RvcnksXG4gICAgICAgIHB1YmxpY1BhdGg6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5wdWJsaWNQYXRoLFxuICAgICAgICB0cmFuc2Zvcm1GaWxlbmFtZTogKF9vcHRzJHRyYW5zZm9ybUZpbGVuYSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy50cmFuc2Zvcm1GaWxlbmFtZSkgIT09IG51bGwgJiYgX29wdHMkdHJhbnNmb3JtRmlsZW5hICE9PSB2b2lkIDAgPyBfb3B0cyR0cmFuc2Zvcm1GaWxlbmEgOiB4ID0+IHgsXG4gICAgICAgIHNjaGVtYToge1xuICAgICAgICAgIGFsdDogKF9vcHRzJHNjaGVtYSRhbHQgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCB8fCAoX29wdHMkc2NoZW1hID0gb3B0cy5zY2hlbWEpID09PSBudWxsIHx8IF9vcHRzJHNjaGVtYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdHMkc2NoZW1hLmFsdCkgIT09IG51bGwgJiYgX29wdHMkc2NoZW1hJGFsdCAhPT0gdm9pZCAwID8gX29wdHMkc2NoZW1hJGFsdCA6IGRlZmF1bHRBbHRGaWVsZCxcbiAgICAgICAgICB0aXRsZTogKF9vcHRzJHNjaGVtYSR0aXRsZSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwIHx8IChfb3B0cyRzY2hlbWEyID0gb3B0cy5zY2hlbWEpID09PSBudWxsIHx8IF9vcHRzJHNjaGVtYTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzJHNjaGVtYTIudGl0bGUpICE9PSBudWxsICYmIF9vcHRzJHNjaGVtYSR0aXRsZSAhPT0gdm9pZCAwID8gX29wdHMkc2NoZW1hJHRpdGxlIDogZW1wdHlUaXRsZUZpZWxkXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkoKSA6IHVuZGVmaW5lZCxcbiAgICBkaXZpZGVyOiAoX29wdGlvbnMkZGl2aWRlciA9IG9wdGlvbnMuZGl2aWRlcikgIT09IG51bGwgJiYgX29wdGlvbnMkZGl2aWRlciAhPT0gdm9pZCAwID8gX29wdGlvbnMkZGl2aWRlciA6IHRydWUsXG4gICAgY29kZUJsb2NrOiBvcHRpb25zLmNvZGVCbG9jayA9PT0gZmFsc2UgPyB1bmRlZmluZWQgOiB7XG4gICAgICBzY2hlbWE6IHR5cGVvZiBvcHRpb25zLmNvZGVCbG9jayA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmNvZGVCbG9jay5zY2hlbWEgOiB7fVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0VHlwZUZvckZpZWxkKGZpZWxkKSB7XG4gIGlmIChmaWVsZC5raW5kID09PSAnb2JqZWN0JyB8fCBmaWVsZC5raW5kID09PSAnY29uZGl0aW9uYWwnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IE9iamVjdCxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQua2luZCA9PT0gJ2FycmF5Jykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQua2luZCA9PT0gJ2NoaWxkJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSAnc3RyaW5nJyAmJiAnb3B0aW9ucycgaW4gZmllbGQgJiYgQXJyYXkuaXNBcnJheShmaWVsZC5vcHRpb25zKSAmJiBmaWVsZC5vcHRpb25zLmV2ZXJ5KHZhbCA9PiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwgIT09IG51bGwgJiYgJ3ZhbHVlJyBpbiB2YWwgJiYgdHlwZW9mIHZhbC52YWx1ZSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIG1hdGNoZXM6IGZpZWxkLm9wdGlvbnMubWFwKHggPT4geC52YWx1ZSksXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCByZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmllbGQucGFyc2UoJycpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWRcbiAgICAgIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBmaWVsZC5wYXJzZSgxKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IE51bWJlclxuICAgICAgfTtcbiAgICB9IGNhdGNoIHt9XG4gICAgaWYgKHR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09ICdzbHVnJykge1xuICAgIGxldCByZXF1aXJlZCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBmaWVsZC5wYXJzZSgnJywgdW5kZWZpbmVkKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkXG4gICAgfTtcbiAgfVxuICBpZiAoZmllbGQuZm9ybUtpbmQgPT09ICdhc3NldCcpIHtcbiAgICBsZXQgcmVxdWlyZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZmllbGQudmFsaWRhdGUobnVsbCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHt9O1xufVxuZnVuY3Rpb24gZmllbGRzVG9NYXJrZG9jQXR0cmlidXRlcyhmaWVsZHMpIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhmaWVsZHMpLm1hcCgoW25hbWUsIGZpZWxkXSkgPT4ge1xuICAgIGNvbnN0IHNjaGVtYSA9IGdldFR5cGVGb3JGaWVsZChmaWVsZCk7XG4gICAgcmV0dXJuIFtuYW1lLCBzY2hlbWFdO1xuICB9KSk7XG59XG5mdW5jdGlvbiBjcmVhdGVNYXJrZG9jQ29uZmlnKG9wdHMpIHtcbiAgY29uc3QgZWRpdG9yQ29uZmlnID0gZWRpdG9yT3B0aW9uc1RvQ29uZmlnKG9wdHMub3B0aW9ucyB8fCB7fSk7XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBub2Rlczoge1xuICAgICAgLi4ubm9kZXNcbiAgICB9LFxuICAgIHRhZ3M6IHt9XG4gIH07XG4gIGlmIChlZGl0b3JDb25maWcuaGVhZGluZy5sZXZlbHMubGVuZ3RoKSB7XG4gICAgY29uZmlnLm5vZGVzLmhlYWRpbmcgPSB7XG4gICAgICAuLi5ub2Rlcy5oZWFkaW5nLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAuLi5ub2Rlcy5oZWFkaW5nLmF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLmZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoZWRpdG9yQ29uZmlnLmhlYWRpbmcuc2NoZW1hKVxuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLm5vZGVzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuYmxvY2txdW90ZSkge1xuICAgIGNvbmZpZy5ub2Rlcy5ibG9ja3F1b3RlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChlZGl0b3JDb25maWcuY29kZUJsb2NrKSB7XG4gICAgY29uZmlnLm5vZGVzLmZlbmNlID0ge1xuICAgICAgLi4ubm9kZXMuZmVuY2UsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIC4uLm5vZGVzLmZlbmNlLmF0dHJpYnV0ZXMsXG4gICAgICAgIC4uLmZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoZWRpdG9yQ29uZmlnLmNvZGVCbG9jay5zY2hlbWEpXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcubm9kZXMuZmVuY2UgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcub3JkZXJlZExpc3QgJiYgIWVkaXRvckNvbmZpZy51bm9yZGVyZWRMaXN0KSB7XG4gICAgY29uZmlnLm5vZGVzLmxpc3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuYm9sZCkge1xuICAgIGNvbmZpZy5ub2Rlcy5zdHJvbmcgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuaXRhbGljKSB7XG4gICAgY29uZmlnLm5vZGVzLmVtID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghZWRpdG9yQ29uZmlnLnN0cmlrZXRocm91Z2gpIHtcbiAgICBjb25maWcubm9kZXMucyA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWVkaXRvckNvbmZpZy5saW5rKSB7XG4gICAgY29uZmlnLm5vZGVzLmxpbmsgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuaW1hZ2UpIHtcbiAgICBjb25maWcubm9kZXMuaW1hZ2UgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCFlZGl0b3JDb25maWcuZGl2aWRlcikge1xuICAgIGNvbmZpZy5ub2Rlcy5ociA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWVkaXRvckNvbmZpZy50YWJsZSkge1xuICAgIGNvbmZpZy5ub2Rlcy50YWJsZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBmb3IgKGNvbnN0IFtuYW1lLCBjb21wb25lbnRdIG9mIE9iamVjdC5lbnRyaWVzKG9wdHMuY29tcG9uZW50cyB8fCB7fSkpIHtcbiAgICB2YXIgX29wdHMkcmVuZGVyO1xuICAgIGNvbnN0IGlzRW1wdHkgPSBjb21wb25lbnQua2luZCA9PT0gJ2Jsb2NrJyB8fCBjb21wb25lbnQua2luZCA9PT0gJ2lubGluZSc7XG4gICAgY29uZmlnLnRhZ3NbbmFtZV0gPSB7XG4gICAgICByZW5kZXI6IChfb3B0cyRyZW5kZXIgPSBvcHRzLnJlbmRlcikgPT09IG51bGwgfHwgX29wdHMkcmVuZGVyID09PSB2b2lkIDAgfHwgKF9vcHRzJHJlbmRlciA9IF9vcHRzJHJlbmRlci50YWdzKSA9PT0gbnVsbCB8fCBfb3B0cyRyZW5kZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRzJHJlbmRlcltuYW1lXSxcbiAgICAgIGNoaWxkcmVuOiBpc0VtcHR5ID8gW10gOiB1bmRlZmluZWQsXG4gICAgICBzZWxmQ2xvc2luZzogaXNFbXB0eSxcbiAgICAgIGF0dHJpYnV0ZXM6IGZpZWxkc1RvTWFya2RvY0F0dHJpYnV0ZXMoY29tcG9uZW50LnNjaGVtYSksXG4gICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyBpbiBjb21wb25lbnQgPyBjb21wb25lbnQuZGVzY3JpcHRpb24gOiB1bmRlZmluZWQsXG4gICAgICBpbmxpbmU6IGNvbXBvbmVudC5raW5kID09PSAnaW5saW5lJyB8fCBjb21wb25lbnQua2luZCA9PT0gJ21hcmsnXG4gICAgfTtcbiAgfVxuICBmb3IgKGNvbnN0IFtuYW1lLCByZW5kZXJdIG9mIE9iamVjdC5lbnRyaWVzKCgoX29wdHMkcmVuZGVyMiA9IG9wdHMucmVuZGVyKSA9PT0gbnVsbCB8fCBfb3B0cyRyZW5kZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0cyRyZW5kZXIyLm5vZGVzKSB8fCB7fSkpIHtcbiAgICB2YXIgX29wdHMkcmVuZGVyMjtcbiAgICBjb25zdCBub2RlU2NoZW1hID0gY29uZmlnLm5vZGVzW25hbWVdO1xuICAgIGlmIChub2RlU2NoZW1hKSB7XG4gICAgICBub2RlU2NoZW1hLnJlbmRlciA9IHJlbmRlcjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5mdW5jdGlvbiBnZXREaXJlY3Rvcmllc0ZvckVkaXRvckZpZWxkKGNvbXBvbmVudHMsIGNvbmZpZykge1xuICByZXR1cm4gWy4uLmNvbGxlY3REaXJlY3Rvcmllc1VzZWRJblNjaGVtYShvYmplY3QoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNvbXBvbmVudHMpLm1hcCgoW25hbWUsIGNvbXBvbmVudF0pID0+IFtuYW1lLCBvYmplY3QoY29tcG9uZW50LnNjaGVtYSldKSkpKSwgLi4uKHR5cGVvZiBjb25maWcuaW1hZ2UgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjb25maWcuaW1hZ2UuZGlyZWN0b3J5ID09PSAnc3RyaW5nJyA/IFtmaXhQYXRoKGNvbmZpZy5pbWFnZS5kaXJlY3RvcnkpXSA6IFtdKV07XG59XG5mdW5jdGlvbiBtYXJrZG9jKHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fSxcbiAgZXh0ZW5zaW9uID0gJ21kb2MnXG59KSB7XG4gIGxldCBzY2hlbWE7XG4gIGNvbnN0IGNvbmZpZyA9IGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKTtcbiAgbGV0IGdldFNjaGVtYSA9ICgpID0+IHtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgc2NoZW1hID0gY3JlYXRlRWRpdG9yU2NoZW1hKCk7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG4gIH07XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRWYWx1ZShnZXRTY2hlbWEoKSk7XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJzZTogKF8sIHtcbiAgICAgIGNvbnRlbnQsXG4gICAgICBvdGhlcixcbiAgICAgIGV4dGVybmFsLFxuICAgICAgc2x1Z1xuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IHRleHQgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY29udGVudCk7XG4gICAgICByZXR1cm4gcGFyc2VUb0VkaXRvclN0YXRlKHRleHQsIGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246IGAuJHtleHRlbnNpb259YCxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgZGlyZWN0b3JpZXM6IGdldERpcmVjdG9yaWVzRm9yRWRpdG9yRmllbGQoY29tcG9uZW50cywgY29uZmlnKSxcbiAgICBzZXJpYWxpemUodmFsdWUsIHtcbiAgICAgIHNsdWdcbiAgICB9KSB7XG4gICAgICBjb25zdCBvdXQgPSBzZXJpYWxpemVGcm9tRWRpdG9yU3RhdGUoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnQ6IHRleHRFbmNvZGVyLmVuY29kZShvdXQuY29udGVudCksXG4gICAgICAgIGV4dGVybmFsOiBvdXQuZXh0ZXJuYWwsXG4gICAgICAgIG90aGVyOiBvdXQub3RoZXIsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlOiAoXywge1xuICAgICAgICBjb250ZW50XG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY29udGVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogcGFyc2UodGV4dClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbGxhYm9yYXRpb246IHtcbiAgICAgIHRvWWpzKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBwcm9zZW1pcnJvclRvWVhtbEZyYWdtZW50KHZhbHVlLmRvYyk7XG4gICAgICB9LFxuICAgICAgZnJvbVlqcyh5anNWYWx1ZSwgYXdhcmVuZXNzKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFZGl0b3JTdGF0ZUZyb21ZSlMoZ2V0U2NoZW1hKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbm1hcmtkb2MuY3JlYXRlTWFya2RvY0NvbmZpZyA9IGNyZWF0ZU1hcmtkb2NDb25maWc7XG5tYXJrZG9jLmlubGluZSA9IGZ1bmN0aW9uIGlubGluZU1hcmtkb2Moe1xuICBsYWJlbCxcbiAgZGVzY3JpcHRpb24sXG4gIG9wdGlvbnMgPSB7fSxcbiAgY29tcG9uZW50cyA9IHt9XG59KSB7XG4gIGxldCBzY2hlbWE7XG4gIGNvbnN0IGNvbmZpZyA9IGVkaXRvck9wdGlvbnNUb0NvbmZpZyhvcHRpb25zKTtcbiAgbGV0IGdldFNjaGVtYSA9ICgpID0+IHtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgc2NoZW1hID0gY3JlYXRlRWRpdG9yU2NoZW1hKCk7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG4gIH07XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnYXNzZXRzJyxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFZhbHVlKGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEb2N1bWVudEZpZWxkSW5wdXQsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhcnNlOiAodmFsdWUsIHtcbiAgICAgIG90aGVyLFxuICAgICAgZXh0ZXJuYWwsXG4gICAgICBzbHVnXG4gICAgfSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlVG9FZGl0b3JTdGF0ZSh2YWx1ZSwgZ2V0U2NoZW1hKCkpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGRpcmVjdG9yaWVzOiBnZXREaXJlY3Rvcmllc0ZvckVkaXRvckZpZWxkKGNvbXBvbmVudHMsIGNvbmZpZyksXG4gICAgc2VyaWFsaXplKHZhbHVlLCB7XG4gICAgICBzbHVnXG4gICAgfSkge1xuICAgICAgY29uc3Qgb3V0ID0gc2VyaWFsaXplRnJvbUVkaXRvclN0YXRlKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBleHRlcm5hbDogb3V0LmV4dGVybmFsLFxuICAgICAgICBvdGhlcjogb3V0Lm90aGVyLFxuICAgICAgICB2YWx1ZTogb3V0LmNvbnRlbnRcbiAgICAgIH07XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlOiB2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbm9kZTogcGFyc2UodmFsdWUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuZnVuY3Rpb24gbWR4KHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fSxcbiAgZXh0ZW5zaW9uID0gJ21keCdcbn0pIHtcbiAgbGV0IHNjaGVtYTtcbiAgY29uc3QgY29uZmlnID0gZWRpdG9yT3B0aW9uc1RvQ29uZmlnKG9wdGlvbnMpO1xuICBsZXQgZ2V0U2NoZW1hID0gKCkgPT4ge1xuICAgIGlmICghc2NoZW1hKSB7XG4gICAgICBzY2hlbWEgPSBjcmVhdGVFZGl0b3JTY2hlbWEoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdjb250ZW50JyxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdFZhbHVlKGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChEb2N1bWVudEZpZWxkSW5wdXQsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBhcnNlOiAoXywge1xuICAgICAgY29udGVudCxcbiAgICAgIG90aGVyLFxuICAgICAgZXh0ZXJuYWwsXG4gICAgICBzbHVnXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9IHRleHREZWNvZGVyLmRlY29kZShjb250ZW50KTtcbiAgICAgIHJldHVybiBwYXJzZVRvRWRpdG9yU3RhdGVNRFgodGV4dCwgZ2V0U2NoZW1hKCkpO1xuICAgIH0sXG4gICAgY29udGVudEV4dGVuc2lvbjogYC4ke2V4dGVuc2lvbn1gLFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBkaXJlY3RvcmllczogZ2V0RGlyZWN0b3JpZXNGb3JFZGl0b3JGaWVsZChjb21wb25lbnRzLCBjb25maWcpLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgc2x1Z1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IG91dCA9IHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZU1EWCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudDogdGV4dEVuY29kZXIuZW5jb2RlKG91dC5jb250ZW50KSxcbiAgICAgICAgZXh0ZXJuYWw6IG91dC5leHRlcm5hbCxcbiAgICAgICAgb3RoZXI6IG91dC5vdGhlcixcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9LFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2U6IChfLCB7XG4gICAgICAgIGNvbnRlbnRcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRleHREZWNvZGVyLmRlY29kZShjb250ZW50KTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5tZHguaW5saW5lID0gZnVuY3Rpb24gbWR4KHtcbiAgbGFiZWwsXG4gIGRlc2NyaXB0aW9uLFxuICBvcHRpb25zID0ge30sXG4gIGNvbXBvbmVudHMgPSB7fVxufSkge1xuICBsZXQgc2NoZW1hO1xuICBjb25zdCBjb25maWcgPSBlZGl0b3JPcHRpb25zVG9Db25maWcob3B0aW9ucyk7XG4gIGxldCBnZXRTY2hlbWEgPSAoKSA9PiB7XG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgIHNjaGVtYSA9IGNyZWF0ZUVkaXRvclNjaGVtYSgpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ2Fzc2V0cycsXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGdldERlZmF1bHRWYWx1ZShnZXRTY2hlbWEoKSk7XG4gICAgfSxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goRG9jdW1lbnRGaWVsZElucHV0LCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBwYXJzZTogKHZhbHVlLCB7XG4gICAgICBvdGhlcixcbiAgICAgIGV4dGVybmFsLFxuICAgICAgc2x1Z1xuICAgIH0pID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZVRvRWRpdG9yU3RhdGVNRFgodmFsdWUsIGdldFNjaGVtYSgpKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBkaXJlY3RvcmllczogZ2V0RGlyZWN0b3JpZXNGb3JFZGl0b3JGaWVsZChjb21wb25lbnRzLCBjb25maWcpLFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwge1xuICAgICAgc2x1Z1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IG91dCA9IHNlcmlhbGl6ZUZyb21FZGl0b3JTdGF0ZU1EWCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXh0ZXJuYWw6IG91dC5leHRlcm5hbCxcbiAgICAgICAgb3RoZXI6IG91dC5vdGhlcixcbiAgICAgICAgdmFsdWU6IG91dC5jb250ZW50XG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZTogdmFsdWUgPT4ge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb2xsYWJvcmF0aW9uOiB7XG4gICAgICB0b1lqcyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcHJvc2VtaXJyb3JUb1lYbWxGcmFnbWVudCh2YWx1ZS5kb2MpO1xuICAgICAgfSxcbiAgICAgIGZyb21ZanMoeWpzVmFsdWUsIGF3YXJlbmVzcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWRpdG9yU3RhdGVGcm9tWUpTKGdldFNjaGVtYSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgeyBtYXJrZG9jIGFzIGEsIGdldERpcmVjdG9yaWVzRm9yVHJlZUtleSBhcyBiLCBnZXRDb2xsZWN0aW9uUGF0aCBhcyBjLCBkb2N1bWVudCBhcyBkLCBnZXRTaW5nbGV0b25Gb3JtYXQgYXMgZSwgZml4UGF0aCBhcyBmLCBnZXRTcmNQcmVmaXggYXMgZywgZ2V0U2luZ2xldG9uUGF0aCBhcyBoLCBibG9iU2hhIGFzIGksIGdldEVudHJ5RGF0YUZpbGVwYXRoIGFzIGosIGdldFZhbHVlQXRQcm9wUGF0aCBhcyBrLCBnZXRDb2xsZWN0aW9uRm9ybWF0IGFzIGwsIG1keCBhcyBtLCBnZXRTbHVnR2xvYkZvckNvbGxlY3Rpb24gYXMgbiwgb2JqZWN0IGFzIG8sIGdldERhdGFGaWxlRXh0ZW5zaW9uIGFzIHAsIGdldENvbGxlY3Rpb25JdGVtUGF0aCBhcyBxLCBnZXRUcmVlTm9kZUF0UGF0aCBhcyByLCB0cmVlRW50cmllc1RvVHJlZU5vZGVzIGFzIHQsIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcyBhcyB1IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/keystatic-core-api-generic.node.react-server.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/keystatic-core-api-generic.node.react-server.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeGenericAPIRouteHandler: () => (/* binding */ makeGenericAPIRouteHandler)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/cookie/dist/index.js\");\n/* harmony import */ var superstruct__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! superstruct */ \"(rsc)/./node_modules/superstruct/dist/index.mjs\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var _read_local_c89358f4_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./read-local-c89358f4.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/read-local-c89358f4.node.react-server.js\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ignore */ \"(rsc)/./node_modules/ignore/index.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction redirect(to, initialHeaders) {\n  return {\n    body: null,\n    status: 307,\n    headers: [...(initialHeaders !== null && initialHeaders !== void 0 ? initialHeaders : []), ['Location', to]]\n  };\n}\n\nfunction base64UrlDecode(base64) {\n  const binString = atob(base64.replace(/-/g, '+').replace(/_/g, '/'));\n  return Uint8Array.from(binString, m => m.codePointAt(0));\n}\nfunction base64UrlEncode(bytes) {\n  return base64Encode(bytes).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\nfunction base64Encode(bytes) {\n  const binString = Array.from(bytes, byte => String.fromCodePoint(byte)).join('');\n  return btoa(binString);\n}\n\nconst ghAppSchema = superstruct__WEBPACK_IMPORTED_MODULE_15__.type({\n  slug: superstruct__WEBPACK_IMPORTED_MODULE_15__.string(),\n  client_id: superstruct__WEBPACK_IMPORTED_MODULE_15__.string(),\n  client_secret: superstruct__WEBPACK_IMPORTED_MODULE_15__.string()\n});\nconst wait = ms => new Promise(resolve => setTimeout(resolve, ms));\nasync function handleGitHubAppCreation(req, slugEnvVarName) {\n  const searchParams = new URL(req.url, 'https://localhost').searchParams;\n  const code = searchParams.get('code');\n  if (typeof code !== 'string' || !/^[a-zA-Z0-9]+$/.test(code)) {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const ghAppRes = await fetch(`https://api.github.com/app-manifests/${code}/conversions`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!ghAppRes.ok) {\n    console.log(ghAppRes);\n    return {\n      status: 500,\n      body: 'An error occurred while creating the GitHub App'\n    };\n  }\n  const ghAppDataRaw = await ghAppRes.json();\n  let ghAppDataResult;\n  try {\n    ghAppDataResult = superstruct__WEBPACK_IMPORTED_MODULE_15__.create(ghAppDataRaw, ghAppSchema);\n  } catch {\n    console.log(ghAppDataRaw);\n    return {\n      status: 500,\n      body: 'An unexpected response was received from GitHub'\n    };\n  }\n  const toAddToEnv = `# Keystatic\nKEYSTATIC_GITHUB_CLIENT_ID=${ghAppDataResult.client_id}\nKEYSTATIC_GITHUB_CLIENT_SECRET=${ghAppDataResult.client_secret}\nKEYSTATIC_SECRET=${(0,node_crypto__WEBPACK_IMPORTED_MODULE_5__.randomBytes)(40).toString('hex')}\n${slugEnvVarName ? `${slugEnvVarName}=${ghAppDataResult.slug}\\n` : ''}`;\n  let prevEnv;\n  try {\n    prevEnv = await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.readFile('.env', 'utf-8');\n  } catch (err) {\n    if (err.code !== 'ENOENT') throw err;\n  }\n  const newEnv = prevEnv ? `${prevEnv}\\n\\n${toAddToEnv}` : toAddToEnv;\n  await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile('.env', newEnv);\n  await wait(200);\n  return redirect('/keystatic/created-github-app?slug=' + ghAppDataResult.slug);\n}\nfunction localModeApiHandler(config, localBaseDirectory) {\n  const baseDirectory = node_path__WEBPACK_IMPORTED_MODULE_1__.resolve(localBaseDirectory !== null && localBaseDirectory !== void 0 ? localBaseDirectory : process.cwd());\n  return async (req, params) => {\n    const joined = params.join('/');\n    if (req.method === 'GET' && joined === 'tree') {\n      return tree(req, config, baseDirectory);\n    }\n    if (req.method === 'GET' && params[0] === 'blob') {\n      return blob(req, config, params, baseDirectory);\n    }\n    if (req.method === 'POST' && joined === 'update') {\n      return update(req, config, baseDirectory);\n    }\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  };\n}\nasync function tree(req, config, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  return {\n    status: 200,\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(await (0,_read_local_c89358f4_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.r)(baseDirectory))\n  };\n}\nfunction getIsPathValid(config) {\n  const allowedDirectories = (0,_read_local_c89358f4_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(config);\n  return filepath => !filepath.includes('\\\\') && filepath.split('/').every(x => x !== '.' && x !== '..') && allowedDirectories.some(x => filepath.startsWith(x));\n}\nasync function blob(req, config, params, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const expectedSha = params[1];\n  const filepath = params.slice(2).join('/');\n  const isFilepathValid = getIsPathValid(config);\n  if (!isFilepathValid(filepath)) {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  let contents;\n  try {\n    contents = await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.readFile(node_path__WEBPACK_IMPORTED_MODULE_1__.join(baseDirectory, filepath));\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    }\n    throw err;\n  }\n  const sha = await (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__.i)(contents);\n  if (sha !== expectedSha) {\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  }\n  return {\n    status: 200,\n    body: contents\n  };\n}\nconst base64Schema = superstruct__WEBPACK_IMPORTED_MODULE_15__.coerce(superstruct__WEBPACK_IMPORTED_MODULE_15__.instance(Uint8Array), superstruct__WEBPACK_IMPORTED_MODULE_15__.string(), val => base64UrlDecode(val));\nasync function update(req, config, baseDirectory) {\n  if (req.headers.get('no-cors') !== '1' || req.headers.get('content-type') !== 'application/json') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const isFilepathValid = getIsPathValid(config);\n  const filepath = superstruct__WEBPACK_IMPORTED_MODULE_15__.refine(superstruct__WEBPACK_IMPORTED_MODULE_15__.string(), 'filepath', isFilepathValid);\n  let updates;\n  try {\n    updates = superstruct__WEBPACK_IMPORTED_MODULE_15__.create(await req.json(), superstruct__WEBPACK_IMPORTED_MODULE_15__.object({\n      additions: superstruct__WEBPACK_IMPORTED_MODULE_15__.array(superstruct__WEBPACK_IMPORTED_MODULE_15__.object({\n        path: filepath,\n        contents: base64Schema\n      })),\n      deletions: superstruct__WEBPACK_IMPORTED_MODULE_15__.array(superstruct__WEBPACK_IMPORTED_MODULE_15__.object({\n        path: filepath\n      }))\n    }));\n  } catch {\n    return {\n      status: 400,\n      body: 'Bad data'\n    };\n  }\n  for (const addition of updates.additions) {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.mkdir(node_path__WEBPACK_IMPORTED_MODULE_1__.dirname(node_path__WEBPACK_IMPORTED_MODULE_1__.join(baseDirectory, addition.path)), {\n      recursive: true\n    });\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.writeFile(node_path__WEBPACK_IMPORTED_MODULE_1__.join(baseDirectory, addition.path), addition.contents);\n  }\n  for (const deletion of updates.deletions) {\n    await node_fs_promises__WEBPACK_IMPORTED_MODULE_2__.rm(node_path__WEBPACK_IMPORTED_MODULE_1__.join(baseDirectory, deletion.path), {\n      force: true\n    });\n  }\n  return {\n    status: 200,\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify(await (0,_read_local_c89358f4_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.r)(baseDirectory))\n  };\n}\n\nfunction bytesToHex(bytes) {\n  let str = '';\n  for (const byte of bytes) {\n    str += byte.toString(16).padStart(2, '0');\n  }\n  return str;\n}\n\nconst encoder = new TextEncoder();\nconst decoder = new TextDecoder();\nasync function deriveKey(secret, salt) {\n  if (secret.length < 32) {\n    throw new Error('KEYSTATIC_SECRET must be at least 32 characters long');\n  }\n  const encoded = encoder.encode(secret);\n  const key = await node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.subtle.importKey('raw', encoded, 'HKDF', false, ['deriveKey']);\n  return node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.subtle.deriveKey({\n    name: 'HKDF',\n    salt,\n    hash: 'SHA-256',\n    info: new Uint8Array(0)\n  }, key, {\n    name: 'AES-GCM',\n    length: 256\n  }, false, ['encrypt', 'decrypt']);\n}\nconst SALT_LENGTH = 16;\nconst IV_LENGTH = 12;\nasync function encryptValue(value, secret) {\n  const salt = node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.getRandomValues(new Uint8Array(SALT_LENGTH));\n  const iv = node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.getRandomValues(new Uint8Array(IV_LENGTH));\n  const key = await deriveKey(secret, salt);\n  const encoded = encoder.encode(value);\n  const encrypted = await node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.subtle.encrypt({\n    name: 'AES-GCM',\n    iv\n  }, key, encoded);\n  const full = new Uint8Array(SALT_LENGTH + IV_LENGTH + encrypted.byteLength);\n  full.set(salt);\n  full.set(iv, SALT_LENGTH);\n  full.set(new Uint8Array(encrypted), SALT_LENGTH + IV_LENGTH);\n  return base64UrlEncode(full);\n}\nasync function decryptValue(encrypted, secret) {\n  const decoded = base64UrlDecode(encrypted);\n  const salt = decoded.slice(0, SALT_LENGTH);\n  const key = await deriveKey(secret, salt);\n  const iv = decoded.slice(SALT_LENGTH, SALT_LENGTH + IV_LENGTH);\n  const value = decoded.slice(SALT_LENGTH + IV_LENGTH);\n  const decrypted = await node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.subtle.decrypt({\n    name: 'AES-GCM',\n    iv\n  }, key, value);\n  return decoder.decode(decrypted);\n}\n\nconst keystaticRouteRegex = /^branch\\/[^]+(\\/collection\\/[^/]+(|\\/(create|item\\/[^/]+))|\\/singleton\\/[^/]+)?$/;\nconst keyToEnvVar = {\n  clientId: 'KEYSTATIC_GITHUB_CLIENT_ID',\n  clientSecret: 'KEYSTATIC_GITHUB_CLIENT_SECRET',\n  secret: 'KEYSTATIC_SECRET'\n};\nfunction tryOrUndefined(fn) {\n  try {\n    return fn();\n  } catch {\n    return undefined;\n  }\n}\nfunction makeGenericAPIRouteHandler(_config, options) {\n  var _config$clientId, _config$clientSecret, _config$secret;\n  const _config2 = {\n    clientId: (_config$clientId = _config.clientId) !== null && _config$clientId !== void 0 ? _config$clientId : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_ID),\n    clientSecret: (_config$clientSecret = _config.clientSecret) !== null && _config$clientSecret !== void 0 ? _config$clientSecret : tryOrUndefined(() => process.env.KEYSTATIC_GITHUB_CLIENT_SECRET),\n    secret: (_config$secret = _config.secret) !== null && _config$secret !== void 0 ? _config$secret : tryOrUndefined(() => process.env.KEYSTATIC_SECRET),\n    config: _config.config\n  };\n  const getParams = req => {\n    let url;\n    try {\n      url = new URL(req.url);\n    } catch (err) {\n      throw new Error(`Found incomplete URL in Keystatic API route URL handler${(options === null || options === void 0 ? void 0 : options.slugEnvName) === 'NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG' ? \". Make sure you're using the latest version of @keystatic/next\" : ''}`);\n    }\n    return url.pathname.replace(/^\\/api\\/keystatic\\/?/, '').split('/').map(x => decodeURIComponent(x)).filter(Boolean);\n  };\n  if (_config2.config.storage.kind === 'local') {\n    const handler = localModeApiHandler(_config2.config, _config.localBaseDirectory);\n    return req => {\n      const params = getParams(req);\n      return handler(req, params);\n    };\n  }\n  if (_config2.config.storage.kind === 'cloud') {\n    return async function keystaticAPIRoute() {\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  if (!_config2.clientId || !_config2.clientSecret || !_config2.secret) {\n    if (false) {}\n    return async function keystaticAPIRoute(req) {\n      const params = getParams(req);\n      const joined = params.join('/');\n      if (joined === 'github/created-app') {\n        return createdGithubApp(req, options === null || options === void 0 ? void 0 : options.slugEnvName);\n      }\n      if (joined === 'github/login' || joined === 'github/repo-not-found' || joined === 'github/logout') {\n        return redirect('/keystatic/setup');\n      }\n      return {\n        status: 404,\n        body: 'Not Found'\n      };\n    };\n  }\n  const config = {\n    clientId: _config2.clientId,\n    clientSecret: _config2.clientSecret,\n    secret: _config2.secret,\n    config: _config2.config\n  };\n  return async function keystaticAPIRoute(req) {\n    const params = getParams(req);\n    const joined = params.join('/');\n    if (joined === 'github/oauth/callback') {\n      return githubOauthCallback(req, config);\n    }\n    if (joined === 'github/login') {\n      return githubLogin(req, config);\n    }\n    if (joined === 'github/refresh-token') {\n      return githubRefreshToken(req, config);\n    }\n    if (joined === 'github/repo-not-found') {\n      return githubRepoNotFound(req, config);\n    }\n    if (joined === 'github/logout') {\n      var _req$headers$get;\n      const cookies = cookie__WEBPACK_IMPORTED_MODULE_0__.parse((_req$headers$get = req.headers.get('cookie')) !== null && _req$headers$get !== void 0 ? _req$headers$get : '');\n      const access_token = cookies['keystatic-gh-access-token'];\n      if (access_token) {\n        await fetch(`https://api.github.com/applications/${config.clientId}/token`, {\n          method: 'DELETE',\n          headers: {\n            Authorization: `Basic ${btoa(config.clientId + ':' + config.clientSecret)}`\n          },\n          body: JSON.stringify({\n            access_token\n          })\n        });\n      }\n      return redirect('/keystatic', [['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-access-token')], ['Set-Cookie', immediatelyExpiringCookie('keystatic-gh-refresh-token')]]);\n    }\n    return {\n      status: 404,\n      body: 'Not Found'\n    };\n  };\n}\nconst tokenDataResultType = superstruct__WEBPACK_IMPORTED_MODULE_15__.type({\n  access_token: superstruct__WEBPACK_IMPORTED_MODULE_15__.string(),\n  expires_in: superstruct__WEBPACK_IMPORTED_MODULE_15__.number(),\n  refresh_token: superstruct__WEBPACK_IMPORTED_MODULE_15__.string(),\n  refresh_token_expires_in: superstruct__WEBPACK_IMPORTED_MODULE_15__.number(),\n  scope: superstruct__WEBPACK_IMPORTED_MODULE_15__.string(),\n  token_type: superstruct__WEBPACK_IMPORTED_MODULE_15__.literal('bearer')\n});\nasync function githubOauthCallback(req, config) {\n  var _req$headers$get2;\n  const searchParams = new URL(req.url, 'http://localhost').searchParams;\n  const error = searchParams.get('error');\n  const errorDescription = searchParams.get('error_description');\n  if (typeof errorDescription === 'string') {\n    return {\n      status: 400,\n      body: `An error occurred when trying to authenticate with GitHub:\\n${errorDescription}${error === 'redirect_uri_mismatch' ? `\\n\\nIf you were trying to sign in locally and recently upgraded Keystatic from @keystatic/core@0.0.69 or below, you need to add \\`http://127.0.0.1/api/keystatic/github/oauth/callback\\` as a callback URL in your GitHub app.` : ''}`\n    };\n  }\n  const code = searchParams.get('code');\n  const state = searchParams.get('state');\n  if (typeof code !== 'string') {\n    return {\n      status: 400,\n      body: 'Bad Request'\n    };\n  }\n  const cookies = cookie__WEBPACK_IMPORTED_MODULE_0__.parse((_req$headers$get2 = req.headers.get('cookie')) !== null && _req$headers$get2 !== void 0 ? _req$headers$get2 : '');\n  const fromCookie = state ? cookies['ks-' + state] : undefined;\n  const from = typeof fromCookie === 'string' && keystaticRouteRegex.test(fromCookie) ? fromCookie : undefined;\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('code', code);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const _tokenData = await tokenRes.json();\n  let tokenData;\n  try {\n    tokenData = tokenDataResultType.create(_tokenData);\n  } catch {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  const headers = await getTokenCookies(tokenData, config);\n  if (state === 'close') {\n    return {\n      headers: [...headers, ['Content-Type', 'text/html']],\n      body: \"<script>localStorage.setItem('ks-refetch-installations', 'true');window.close();</script>\",\n      status: 200\n    };\n  }\n  return redirect(`/keystatic${from ? `/${from}` : ''}`, headers);\n}\nasync function getTokenCookies(tokenData, config) {\n  const headers = [['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('keystatic-gh-access-token', tokenData.access_token, {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    maxAge: tokenData.expires_in,\n    expires: new Date(Date.now() + tokenData.expires_in * 1000),\n    path: '/'\n  })], ['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('keystatic-gh-refresh-token', await encryptValue(tokenData.refresh_token, config.secret), {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    httpOnly: true,\n    maxAge: tokenData.refresh_token_expires_in,\n    expires: new Date(Date.now() + tokenData.refresh_token_expires_in * 100),\n    path: '/'\n  })]];\n  return headers;\n}\nasync function getRefreshToken(req, config) {\n  const cookies = cookie__WEBPACK_IMPORTED_MODULE_0__.parse(req.headers.get('cookie') || '');\n  const refreshTokenCookie = cookies['keystatic-gh-refresh-token'];\n  if (!refreshTokenCookie) return;\n  let refreshToken;\n  try {\n    refreshToken = await decryptValue(refreshTokenCookie, config.secret);\n  } catch {\n    return;\n  }\n  return refreshToken;\n}\nasync function githubRefreshToken(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (!headers) {\n    return {\n      status: 401,\n      body: 'Authorization failed'\n    };\n  }\n  return {\n    status: 200,\n    headers,\n    body: ''\n  };\n}\nasync function refreshGitHubAuth(req, config) {\n  const refreshToken = await getRefreshToken(req, config);\n  if (!refreshToken) {\n    return;\n  }\n  const url = new URL('https://github.com/login/oauth/access_token');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('client_secret', config.clientSecret);\n  url.searchParams.set('grant_type', 'refresh_token');\n  url.searchParams.set('refresh_token', refreshToken);\n  const tokenRes = await fetch(url, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json'\n    }\n  });\n  if (!tokenRes.ok) {\n    return;\n  }\n  const _tokenData = await tokenRes.json();\n  let tokenData;\n  try {\n    tokenData = tokenDataResultType.create(_tokenData);\n  } catch {\n    return;\n  }\n  return getTokenCookies(tokenData, config);\n}\nasync function githubRepoNotFound(req, config) {\n  const headers = await refreshGitHubAuth(req, config);\n  if (headers) {\n    return redirect('/keystatic/repo-not-found', headers);\n  }\n  return githubLogin(req, config);\n}\nasync function githubLogin(req, config) {\n  const reqUrl = new URL(req.url);\n  const rawFrom = reqUrl.searchParams.get('from');\n  const from = typeof rawFrom === 'string' && keystaticRouteRegex.test(rawFrom) ? rawFrom : '/';\n  const state = bytesToHex(node_crypto__WEBPACK_IMPORTED_MODULE_5__.webcrypto.getRandomValues(new Uint8Array(10)));\n  const url = new URL('https://github.com/login/oauth/authorize');\n  url.searchParams.set('client_id', config.clientId);\n  url.searchParams.set('redirect_uri', `${reqUrl.origin}/api/keystatic/github/oauth/callback`);\n  if (from === '/') {\n    return redirect(url.toString());\n  }\n  url.searchParams.set('state', state);\n  return redirect(url.toString(), [['Set-Cookie', cookie__WEBPACK_IMPORTED_MODULE_0__.serialize('ks-' + state, from, {\n    sameSite: 'lax',\n    secure: \"development\" === 'production',\n    // 1 day\n    maxAge: 60 * 60 * 24,\n    expires: new Date(Date.now() + 60 * 60 * 24 * 1000),\n    path: '/',\n    httpOnly: true\n  })]]);\n}\nasync function createdGithubApp(req, slugEnvVarName) {\n  if (false) {}\n  return handleGitHubAppCreation(req, slugEnvVarName);\n}\nfunction immediatelyExpiringCookie(name) {\n  return cookie__WEBPACK_IMPORTED_MODULE_0__.serialize(name, '', {\n    secure: \"development\" === 'production',\n    sameSite: 'lax',\n    path: '/',\n    maxAge: 0,\n    expires: new Date()\n  });\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUtYXBpLWdlbmVyaWMubm9kZS5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDQTtBQUNKO0FBQ0s7QUFDNkU7QUFDMUM7QUFDaEI7QUFDaEM7QUFDUDtBQUNhO0FBQ1o7QUFDa0I7QUFDakI7QUFDeUI7QUFDZjtBQUNxQjtBQUMvQjs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsOENBQU07QUFDMUIsUUFBUSxnREFBUTtBQUNoQixhQUFhLGdEQUFRO0FBQ3JCLGlCQUFpQixnREFBUTtBQUN6QixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsS0FBSztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBUTtBQUM5QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsaUNBQWlDO0FBQ2pDLG1CQUFtQix3REFBVztBQUM5QixFQUFFLG9CQUFvQixlQUFlLEdBQUcscUJBQXFCLFNBQVM7QUFDdEU7QUFDQTtBQUNBLG9CQUFvQixzREFBVztBQUMvQixJQUFJO0FBQ0o7QUFDQTtBQUNBLDhCQUE4QixRQUFRLE1BQU0sV0FBVztBQUN2RCxRQUFRLHVEQUFZO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhDQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrREFBUztBQUNwQztBQUNBO0FBQ0EsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsNkNBQWdCO0FBQ2xFO0FBQ0EsWUFBWSxhQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxNQUFNLEtBQXNDLEVBQUUsRUFLM0M7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFnQjtBQUN6QixZQUFZLGFBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVzQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9rZXlzdGF0aWMtY29yZS1hcGktZ2VuZXJpYy5ub2RlLnJlYWN0LXNlcnZlci5qcz8yMmNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNvb2tpZSBmcm9tICdjb29raWUnO1xuaW1wb3J0ICogYXMgcyBmcm9tICdzdXBlcnN0cnVjdCc7XG5pbXBvcnQgcGF0aCBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IGZzIGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHsgciBhcyByZWFkVG9EaXJFbnRyaWVzLCBnIGFzIGdldEFsbG93ZWREaXJlY3RvcmllcyB9IGZyb20gJy4vcmVhZC1sb2NhbC1jODkzNThmNC5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgeyBpIGFzIGJsb2JTaGEgfSBmcm9tICcuL2luZGV4LWIyZGU5YmUxLm5vZGUucmVhY3Qtc2VydmVyLmpzJztcbmltcG9ydCB7IHJhbmRvbUJ5dGVzLCB3ZWJjcnlwdG8gfSBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQgJ2ZzL3Byb21pc2VzJztcbmltcG9ydCAncGF0aCc7XG5pbXBvcnQgJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCAnZW1lcnknO1xuaW1wb3J0ICdAYnJhaW50cmVlL3Nhbml0aXplLXVybCc7XG5pbXBvcnQgJ2lnbm9yZSc7XG5pbXBvcnQgJ0BtYXJrZG9jL21hcmtkb2MvZGlzdC9pbmRleC5tanMnO1xuaW1wb3J0ICdlbWVyeS9hc3NlcnRpb25zJztcbmltcG9ydCAnLi9pbmRleC0xMGVhNTBlMi5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgJ2NyeXB0byc7XG5cbmZ1bmN0aW9uIHJlZGlyZWN0KHRvLCBpbml0aWFsSGVhZGVycykge1xuICByZXR1cm4ge1xuICAgIGJvZHk6IG51bGwsXG4gICAgc3RhdHVzOiAzMDcsXG4gICAgaGVhZGVyczogWy4uLihpbml0aWFsSGVhZGVycyAhPT0gbnVsbCAmJiBpbml0aWFsSGVhZGVycyAhPT0gdm9pZCAwID8gaW5pdGlhbEhlYWRlcnMgOiBbXSksIFsnTG9jYXRpb24nLCB0b11dXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFVybERlY29kZShiYXNlNjQpIHtcbiAgY29uc3QgYmluU3RyaW5nID0gYXRvYihiYXNlNjQucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKSk7XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20oYmluU3RyaW5nLCBtID0+IG0uY29kZVBvaW50QXQoMCkpO1xufVxuZnVuY3Rpb24gYmFzZTY0VXJsRW5jb2RlKGJ5dGVzKSB7XG4gIHJldHVybiBiYXNlNjRFbmNvZGUoYnl0ZXMpLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpLnJlcGxhY2UoLz0vZywgJycpO1xufVxuZnVuY3Rpb24gYmFzZTY0RW5jb2RlKGJ5dGVzKSB7XG4gIGNvbnN0IGJpblN0cmluZyA9IEFycmF5LmZyb20oYnl0ZXMsIGJ5dGUgPT4gU3RyaW5nLmZyb21Db2RlUG9pbnQoYnl0ZSkpLmpvaW4oJycpO1xuICByZXR1cm4gYnRvYShiaW5TdHJpbmcpO1xufVxuXG5jb25zdCBnaEFwcFNjaGVtYSA9IHMudHlwZSh7XG4gIHNsdWc6IHMuc3RyaW5nKCksXG4gIGNsaWVudF9pZDogcy5zdHJpbmcoKSxcbiAgY2xpZW50X3NlY3JldDogcy5zdHJpbmcoKVxufSk7XG5jb25zdCB3YWl0ID0gbXMgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVHaXRIdWJBcHBDcmVhdGlvbihyZXEsIHNsdWdFbnZWYXJOYW1lKSB7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkwocmVxLnVybCwgJ2h0dHBzOi8vbG9jYWxob3N0Jykuc2VhcmNoUGFyYW1zO1xuICBjb25zdCBjb2RlID0gc2VhcmNoUGFyYW1zLmdldCgnY29kZScpO1xuICBpZiAodHlwZW9mIGNvZGUgIT09ICdzdHJpbmcnIHx8ICEvXlthLXpBLVowLTldKyQvLnRlc3QoY29kZSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICBib2R5OiAnQmFkIFJlcXVlc3QnXG4gICAgfTtcbiAgfVxuICBjb25zdCBnaEFwcFJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5naXRodWIuY29tL2FwcC1tYW5pZmVzdHMvJHtjb2RlfS9jb252ZXJzaW9uc2AsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbiAgfSk7XG4gIGlmICghZ2hBcHBSZXMub2spIHtcbiAgICBjb25zb2xlLmxvZyhnaEFwcFJlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgYm9keTogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNyZWF0aW5nIHRoZSBHaXRIdWIgQXBwJ1xuICAgIH07XG4gIH1cbiAgY29uc3QgZ2hBcHBEYXRhUmF3ID0gYXdhaXQgZ2hBcHBSZXMuanNvbigpO1xuICBsZXQgZ2hBcHBEYXRhUmVzdWx0O1xuICB0cnkge1xuICAgIGdoQXBwRGF0YVJlc3VsdCA9IHMuY3JlYXRlKGdoQXBwRGF0YVJhdywgZ2hBcHBTY2hlbWEpO1xuICB9IGNhdGNoIHtcbiAgICBjb25zb2xlLmxvZyhnaEFwcERhdGFSYXcpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGJvZHk6ICdBbiB1bmV4cGVjdGVkIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIEdpdEh1YidcbiAgICB9O1xuICB9XG4gIGNvbnN0IHRvQWRkVG9FbnYgPSBgIyBLZXlzdGF0aWNcbktFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX0lEPSR7Z2hBcHBEYXRhUmVzdWx0LmNsaWVudF9pZH1cbktFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX1NFQ1JFVD0ke2doQXBwRGF0YVJlc3VsdC5jbGllbnRfc2VjcmV0fVxuS0VZU1RBVElDX1NFQ1JFVD0ke3JhbmRvbUJ5dGVzKDQwKS50b1N0cmluZygnaGV4Jyl9XG4ke3NsdWdFbnZWYXJOYW1lID8gYCR7c2x1Z0VudlZhck5hbWV9PSR7Z2hBcHBEYXRhUmVzdWx0LnNsdWd9XFxuYCA6ICcnfWA7XG4gIGxldCBwcmV2RW52O1xuICB0cnkge1xuICAgIHByZXZFbnYgPSBhd2FpdCBmcy5yZWFkRmlsZSgnLmVudicsICd1dGYtOCcpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLmNvZGUgIT09ICdFTk9FTlQnKSB0aHJvdyBlcnI7XG4gIH1cbiAgY29uc3QgbmV3RW52ID0gcHJldkVudiA/IGAke3ByZXZFbnZ9XFxuXFxuJHt0b0FkZFRvRW52fWAgOiB0b0FkZFRvRW52O1xuICBhd2FpdCBmcy53cml0ZUZpbGUoJy5lbnYnLCBuZXdFbnYpO1xuICBhd2FpdCB3YWl0KDIwMCk7XG4gIHJldHVybiByZWRpcmVjdCgnL2tleXN0YXRpYy9jcmVhdGVkLWdpdGh1Yi1hcHA/c2x1Zz0nICsgZ2hBcHBEYXRhUmVzdWx0LnNsdWcpO1xufVxuZnVuY3Rpb24gbG9jYWxNb2RlQXBpSGFuZGxlcihjb25maWcsIGxvY2FsQmFzZURpcmVjdG9yeSkge1xuICBjb25zdCBiYXNlRGlyZWN0b3J5ID0gcGF0aC5yZXNvbHZlKGxvY2FsQmFzZURpcmVjdG9yeSAhPT0gbnVsbCAmJiBsb2NhbEJhc2VEaXJlY3RvcnkgIT09IHZvaWQgMCA/IGxvY2FsQmFzZURpcmVjdG9yeSA6IHByb2Nlc3MuY3dkKCkpO1xuICByZXR1cm4gYXN5bmMgKHJlcSwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3Qgam9pbmVkID0gcGFyYW1zLmpvaW4oJy8nKTtcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcgJiYgam9pbmVkID09PSAndHJlZScpIHtcbiAgICAgIHJldHVybiB0cmVlKHJlcSwgY29uZmlnLCBiYXNlRGlyZWN0b3J5KTtcbiAgICB9XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnICYmIHBhcmFtc1swXSA9PT0gJ2Jsb2InKSB7XG4gICAgICByZXR1cm4gYmxvYihyZXEsIGNvbmZpZywgcGFyYW1zLCBiYXNlRGlyZWN0b3J5KTtcbiAgICB9XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJyAmJiBqb2luZWQgPT09ICd1cGRhdGUnKSB7XG4gICAgICByZXR1cm4gdXBkYXRlKHJlcSwgY29uZmlnLCBiYXNlRGlyZWN0b3J5KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDA0LFxuICAgICAgYm9keTogJ05vdCBGb3VuZCdcbiAgICB9O1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gdHJlZShyZXEsIGNvbmZpZywgYmFzZURpcmVjdG9yeSkge1xuICBpZiAocmVxLmhlYWRlcnMuZ2V0KCduby1jb3JzJykgIT09ICcxJykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdCYWQgUmVxdWVzdCdcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXdhaXQgcmVhZFRvRGlyRW50cmllcyhiYXNlRGlyZWN0b3J5KSlcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldElzUGF0aFZhbGlkKGNvbmZpZykge1xuICBjb25zdCBhbGxvd2VkRGlyZWN0b3JpZXMgPSBnZXRBbGxvd2VkRGlyZWN0b3JpZXMoY29uZmlnKTtcbiAgcmV0dXJuIGZpbGVwYXRoID0+ICFmaWxlcGF0aC5pbmNsdWRlcygnXFxcXCcpICYmIGZpbGVwYXRoLnNwbGl0KCcvJykuZXZlcnkoeCA9PiB4ICE9PSAnLicgJiYgeCAhPT0gJy4uJykgJiYgYWxsb3dlZERpcmVjdG9yaWVzLnNvbWUoeCA9PiBmaWxlcGF0aC5zdGFydHNXaXRoKHgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGJsb2IocmVxLCBjb25maWcsIHBhcmFtcywgYmFzZURpcmVjdG9yeSkge1xuICBpZiAocmVxLmhlYWRlcnMuZ2V0KCduby1jb3JzJykgIT09ICcxJykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdCYWQgUmVxdWVzdCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IGV4cGVjdGVkU2hhID0gcGFyYW1zWzFdO1xuICBjb25zdCBmaWxlcGF0aCA9IHBhcmFtcy5zbGljZSgyKS5qb2luKCcvJyk7XG4gIGNvbnN0IGlzRmlsZXBhdGhWYWxpZCA9IGdldElzUGF0aFZhbGlkKGNvbmZpZyk7XG4gIGlmICghaXNGaWxlcGF0aFZhbGlkKGZpbGVwYXRoKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMCxcbiAgICAgIGJvZHk6ICdCYWQgUmVxdWVzdCdcbiAgICB9O1xuICB9XG4gIGxldCBjb250ZW50cztcbiAgdHJ5IHtcbiAgICBjb250ZW50cyA9IGF3YWl0IGZzLnJlYWRGaWxlKHBhdGguam9pbihiYXNlRGlyZWN0b3J5LCBmaWxlcGF0aCkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgYm9keTogJ05vdCBGb3VuZCdcbiAgICAgIH07XG4gICAgfVxuICAgIHRocm93IGVycjtcbiAgfVxuICBjb25zdCBzaGEgPSBhd2FpdCBibG9iU2hhKGNvbnRlbnRzKTtcbiAgaWYgKHNoYSAhPT0gZXhwZWN0ZWRTaGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICBib2R5OiAnTm90IEZvdW5kJ1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBib2R5OiBjb250ZW50c1xuICB9O1xufVxuY29uc3QgYmFzZTY0U2NoZW1hID0gcy5jb2VyY2Uocy5pbnN0YW5jZShVaW50OEFycmF5KSwgcy5zdHJpbmcoKSwgdmFsID0+IGJhc2U2NFVybERlY29kZSh2YWwpKTtcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZShyZXEsIGNvbmZpZywgYmFzZURpcmVjdG9yeSkge1xuICBpZiAocmVxLmhlYWRlcnMuZ2V0KCduby1jb3JzJykgIT09ICcxJyB8fCByZXEuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpICE9PSAnYXBwbGljYXRpb24vanNvbicpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICBib2R5OiAnQmFkIFJlcXVlc3QnXG4gICAgfTtcbiAgfVxuICBjb25zdCBpc0ZpbGVwYXRoVmFsaWQgPSBnZXRJc1BhdGhWYWxpZChjb25maWcpO1xuICBjb25zdCBmaWxlcGF0aCA9IHMucmVmaW5lKHMuc3RyaW5nKCksICdmaWxlcGF0aCcsIGlzRmlsZXBhdGhWYWxpZCk7XG4gIGxldCB1cGRhdGVzO1xuICB0cnkge1xuICAgIHVwZGF0ZXMgPSBzLmNyZWF0ZShhd2FpdCByZXEuanNvbigpLCBzLm9iamVjdCh7XG4gICAgICBhZGRpdGlvbnM6IHMuYXJyYXkocy5vYmplY3Qoe1xuICAgICAgICBwYXRoOiBmaWxlcGF0aCxcbiAgICAgICAgY29udGVudHM6IGJhc2U2NFNjaGVtYVxuICAgICAgfSkpLFxuICAgICAgZGVsZXRpb25zOiBzLmFycmF5KHMub2JqZWN0KHtcbiAgICAgICAgcGF0aDogZmlsZXBhdGhcbiAgICAgIH0pKVxuICAgIH0pKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0JhZCBkYXRhJ1xuICAgIH07XG4gIH1cbiAgZm9yIChjb25zdCBhZGRpdGlvbiBvZiB1cGRhdGVzLmFkZGl0aW9ucykge1xuICAgIGF3YWl0IGZzLm1rZGlyKHBhdGguZGlybmFtZShwYXRoLmpvaW4oYmFzZURpcmVjdG9yeSwgYWRkaXRpb24ucGF0aCkpLCB7XG4gICAgICByZWN1cnNpdmU6IHRydWVcbiAgICB9KTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGJhc2VEaXJlY3RvcnksIGFkZGl0aW9uLnBhdGgpLCBhZGRpdGlvbi5jb250ZW50cyk7XG4gIH1cbiAgZm9yIChjb25zdCBkZWxldGlvbiBvZiB1cGRhdGVzLmRlbGV0aW9ucykge1xuICAgIGF3YWl0IGZzLnJtKHBhdGguam9pbihiYXNlRGlyZWN0b3J5LCBkZWxldGlvbi5wYXRoKSwge1xuICAgICAgZm9yY2U6IHRydWVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHN0YXR1czogMjAwLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF3YWl0IHJlYWRUb0RpckVudHJpZXMoYmFzZURpcmVjdG9yeSkpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJ5dGVzVG9IZXgoYnl0ZXMpIHtcbiAgbGV0IHN0ciA9ICcnO1xuICBmb3IgKGNvbnN0IGJ5dGUgb2YgYnl0ZXMpIHtcbiAgICBzdHIgKz0gYnl0ZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKTtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuXG5jb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5jb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5hc3luYyBmdW5jdGlvbiBkZXJpdmVLZXkoc2VjcmV0LCBzYWx0KSB7XG4gIGlmIChzZWNyZXQubGVuZ3RoIDwgMzIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0tFWVNUQVRJQ19TRUNSRVQgbXVzdCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcnKTtcbiAgfVxuICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoc2VjcmV0KTtcbiAgY29uc3Qga2V5ID0gYXdhaXQgd2ViY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3JhdycsIGVuY29kZWQsICdIS0RGJywgZmFsc2UsIFsnZGVyaXZlS2V5J10pO1xuICByZXR1cm4gd2ViY3J5cHRvLnN1YnRsZS5kZXJpdmVLZXkoe1xuICAgIG5hbWU6ICdIS0RGJyxcbiAgICBzYWx0LFxuICAgIGhhc2g6ICdTSEEtMjU2JyxcbiAgICBpbmZvOiBuZXcgVWludDhBcnJheSgwKVxuICB9LCBrZXksIHtcbiAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgbGVuZ3RoOiAyNTZcbiAgfSwgZmFsc2UsIFsnZW5jcnlwdCcsICdkZWNyeXB0J10pO1xufVxuY29uc3QgU0FMVF9MRU5HVEggPSAxNjtcbmNvbnN0IElWX0xFTkdUSCA9IDEyO1xuYXN5bmMgZnVuY3Rpb24gZW5jcnlwdFZhbHVlKHZhbHVlLCBzZWNyZXQpIHtcbiAgY29uc3Qgc2FsdCA9IHdlYmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoU0FMVF9MRU5HVEgpKTtcbiAgY29uc3QgaXYgPSB3ZWJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KElWX0xFTkdUSCkpO1xuICBjb25zdCBrZXkgPSBhd2FpdCBkZXJpdmVLZXkoc2VjcmV0LCBzYWx0KTtcbiAgY29uc3QgZW5jb2RlZCA9IGVuY29kZXIuZW5jb2RlKHZhbHVlKTtcbiAgY29uc3QgZW5jcnlwdGVkID0gYXdhaXQgd2ViY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHtcbiAgICBuYW1lOiAnQUVTLUdDTScsXG4gICAgaXZcbiAgfSwga2V5LCBlbmNvZGVkKTtcbiAgY29uc3QgZnVsbCA9IG5ldyBVaW50OEFycmF5KFNBTFRfTEVOR1RIICsgSVZfTEVOR1RIICsgZW5jcnlwdGVkLmJ5dGVMZW5ndGgpO1xuICBmdWxsLnNldChzYWx0KTtcbiAgZnVsbC5zZXQoaXYsIFNBTFRfTEVOR1RIKTtcbiAgZnVsbC5zZXQobmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSwgU0FMVF9MRU5HVEggKyBJVl9MRU5HVEgpO1xuICByZXR1cm4gYmFzZTY0VXJsRW5jb2RlKGZ1bGwpO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVjcnlwdFZhbHVlKGVuY3J5cHRlZCwgc2VjcmV0KSB7XG4gIGNvbnN0IGRlY29kZWQgPSBiYXNlNjRVcmxEZWNvZGUoZW5jcnlwdGVkKTtcbiAgY29uc3Qgc2FsdCA9IGRlY29kZWQuc2xpY2UoMCwgU0FMVF9MRU5HVEgpO1xuICBjb25zdCBrZXkgPSBhd2FpdCBkZXJpdmVLZXkoc2VjcmV0LCBzYWx0KTtcbiAgY29uc3QgaXYgPSBkZWNvZGVkLnNsaWNlKFNBTFRfTEVOR1RILCBTQUxUX0xFTkdUSCArIElWX0xFTkdUSCk7XG4gIGNvbnN0IHZhbHVlID0gZGVjb2RlZC5zbGljZShTQUxUX0xFTkdUSCArIElWX0xFTkdUSCk7XG4gIGNvbnN0IGRlY3J5cHRlZCA9IGF3YWl0IHdlYmNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7XG4gICAgbmFtZTogJ0FFUy1HQ00nLFxuICAgIGl2XG4gIH0sIGtleSwgdmFsdWUpO1xuICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoZGVjcnlwdGVkKTtcbn1cblxuY29uc3Qga2V5c3RhdGljUm91dGVSZWdleCA9IC9eYnJhbmNoXFwvW15dKyhcXC9jb2xsZWN0aW9uXFwvW14vXSsofFxcLyhjcmVhdGV8aXRlbVxcL1teL10rKSl8XFwvc2luZ2xldG9uXFwvW14vXSspPyQvO1xuY29uc3Qga2V5VG9FbnZWYXIgPSB7XG4gIGNsaWVudElkOiAnS0VZU1RBVElDX0dJVEhVQl9DTElFTlRfSUQnLFxuICBjbGllbnRTZWNyZXQ6ICdLRVlTVEFUSUNfR0lUSFVCX0NMSUVOVF9TRUNSRVQnLFxuICBzZWNyZXQ6ICdLRVlTVEFUSUNfU0VDUkVUJ1xufTtcbmZ1bmN0aW9uIHRyeU9yVW5kZWZpbmVkKGZuKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cbmZ1bmN0aW9uIG1ha2VHZW5lcmljQVBJUm91dGVIYW5kbGVyKF9jb25maWcsIG9wdGlvbnMpIHtcbiAgdmFyIF9jb25maWckY2xpZW50SWQsIF9jb25maWckY2xpZW50U2VjcmV0LCBfY29uZmlnJHNlY3JldDtcbiAgY29uc3QgX2NvbmZpZzIgPSB7XG4gICAgY2xpZW50SWQ6IChfY29uZmlnJGNsaWVudElkID0gX2NvbmZpZy5jbGllbnRJZCkgIT09IG51bGwgJiYgX2NvbmZpZyRjbGllbnRJZCAhPT0gdm9pZCAwID8gX2NvbmZpZyRjbGllbnRJZCA6IHRyeU9yVW5kZWZpbmVkKCgpID0+IHByb2Nlc3MuZW52LktFWVNUQVRJQ19HSVRIVUJfQ0xJRU5UX0lEKSxcbiAgICBjbGllbnRTZWNyZXQ6IChfY29uZmlnJGNsaWVudFNlY3JldCA9IF9jb25maWcuY2xpZW50U2VjcmV0KSAhPT0gbnVsbCAmJiBfY29uZmlnJGNsaWVudFNlY3JldCAhPT0gdm9pZCAwID8gX2NvbmZpZyRjbGllbnRTZWNyZXQgOiB0cnlPclVuZGVmaW5lZCgoKSA9PiBwcm9jZXNzLmVudi5LRVlTVEFUSUNfR0lUSFVCX0NMSUVOVF9TRUNSRVQpLFxuICAgIHNlY3JldDogKF9jb25maWckc2VjcmV0ID0gX2NvbmZpZy5zZWNyZXQpICE9PSBudWxsICYmIF9jb25maWckc2VjcmV0ICE9PSB2b2lkIDAgPyBfY29uZmlnJHNlY3JldCA6IHRyeU9yVW5kZWZpbmVkKCgpID0+IHByb2Nlc3MuZW52LktFWVNUQVRJQ19TRUNSRVQpLFxuICAgIGNvbmZpZzogX2NvbmZpZy5jb25maWdcbiAgfTtcbiAgY29uc3QgZ2V0UGFyYW1zID0gcmVxID0+IHtcbiAgICBsZXQgdXJsO1xuICAgIHRyeSB7XG4gICAgICB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBpbmNvbXBsZXRlIFVSTCBpbiBLZXlzdGF0aWMgQVBJIHJvdXRlIFVSTCBoYW5kbGVyJHsob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNsdWdFbnZOYW1lKSA9PT0gJ05FWFRfUFVCTElDX0tFWVNUQVRJQ19HSVRIVUJfQVBQX1NMVUcnID8gXCIuIE1ha2Ugc3VyZSB5b3UncmUgdXNpbmcgdGhlIGxhdGVzdCB2ZXJzaW9uIG9mIEBrZXlzdGF0aWMvbmV4dFwiIDogJyd9YCk7XG4gICAgfVxuICAgIHJldHVybiB1cmwucGF0aG5hbWUucmVwbGFjZSgvXlxcL2FwaVxcL2tleXN0YXRpY1xcLz8vLCAnJykuc3BsaXQoJy8nKS5tYXAoeCA9PiBkZWNvZGVVUklDb21wb25lbnQoeCkpLmZpbHRlcihCb29sZWFuKTtcbiAgfTtcbiAgaWYgKF9jb25maWcyLmNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdsb2NhbCcpIHtcbiAgICBjb25zdCBoYW5kbGVyID0gbG9jYWxNb2RlQXBpSGFuZGxlcihfY29uZmlnMi5jb25maWcsIF9jb25maWcubG9jYWxCYXNlRGlyZWN0b3J5KTtcbiAgICByZXR1cm4gcmVxID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IGdldFBhcmFtcyhyZXEpO1xuICAgICAgcmV0dXJuIGhhbmRsZXIocmVxLCBwYXJhbXMpO1xuICAgIH07XG4gIH1cbiAgaWYgKF9jb25maWcyLmNvbmZpZy5zdG9yYWdlLmtpbmQgPT09ICdjbG91ZCcpIHtcbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24ga2V5c3RhdGljQVBJUm91dGUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgYm9keTogJ05vdCBGb3VuZCdcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuICBpZiAoIV9jb25maWcyLmNsaWVudElkIHx8ICFfY29uZmlnMi5jbGllbnRTZWNyZXQgfHwgIV9jb25maWcyLnNlY3JldCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc3QgbWlzc2luZ0tleXMgPSBbJ2NsaWVudElkJywgJ2NsaWVudFNlY3JldCcsICdzZWNyZXQnXS5maWx0ZXIoeCA9PiAhX2NvbmZpZzJbeF0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGNvbmZpZyBpbiBLZXlzdGF0aWMgQVBJIHNldHVwIHdoZW4gdXNpbmcgdGhlICdnaXRodWInIHN0b3JhZ2UgbW9kZTpcXG4ke21pc3NpbmdLZXlzLm1hcChrZXkgPT4gYC0gJHtrZXl9IChjYW4gYmUgcHJvdmlkZWQgdmlhICR7a2V5VG9FbnZWYXJba2V5XX0gZW52IHZhcilgKS5qb2luKCdcXG4nKX1cXG5cXG5JZiB5b3UndmUgY3JlYXRlZCB5b3VyIEdpdEh1YiBhcHAgbG9jYWxseSwgbWFrZSBzdXJlIHRvIGNvcHkgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHlvdXIgbG9jYWwgZW52IGZpbGUgdG8geW91ciBkZXBsb3llZCBlbnZpcm9ubWVudGApO1xuICAgIH1cbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24ga2V5c3RhdGljQVBJUm91dGUocmVxKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBnZXRQYXJhbXMocmVxKTtcbiAgICAgIGNvbnN0IGpvaW5lZCA9IHBhcmFtcy5qb2luKCcvJyk7XG4gICAgICBpZiAoam9pbmVkID09PSAnZ2l0aHViL2NyZWF0ZWQtYXBwJykge1xuICAgICAgICByZXR1cm4gY3JlYXRlZEdpdGh1YkFwcChyZXEsIG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zbHVnRW52TmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoam9pbmVkID09PSAnZ2l0aHViL2xvZ2luJyB8fCBqb2luZWQgPT09ICdnaXRodWIvcmVwby1ub3QtZm91bmQnIHx8IGpvaW5lZCA9PT0gJ2dpdGh1Yi9sb2dvdXQnKSB7XG4gICAgICAgIHJldHVybiByZWRpcmVjdCgnL2tleXN0YXRpYy9zZXR1cCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgIGJvZHk6ICdOb3QgRm91bmQnXG4gICAgICB9O1xuICAgIH07XG4gIH1cbiAgY29uc3QgY29uZmlnID0ge1xuICAgIGNsaWVudElkOiBfY29uZmlnMi5jbGllbnRJZCxcbiAgICBjbGllbnRTZWNyZXQ6IF9jb25maWcyLmNsaWVudFNlY3JldCxcbiAgICBzZWNyZXQ6IF9jb25maWcyLnNlY3JldCxcbiAgICBjb25maWc6IF9jb25maWcyLmNvbmZpZ1xuICB9O1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24ga2V5c3RhdGljQVBJUm91dGUocmVxKSB7XG4gICAgY29uc3QgcGFyYW1zID0gZ2V0UGFyYW1zKHJlcSk7XG4gICAgY29uc3Qgam9pbmVkID0gcGFyYW1zLmpvaW4oJy8nKTtcbiAgICBpZiAoam9pbmVkID09PSAnZ2l0aHViL29hdXRoL2NhbGxiYWNrJykge1xuICAgICAgcmV0dXJuIGdpdGh1Yk9hdXRoQ2FsbGJhY2socmVxLCBjb25maWcpO1xuICAgIH1cbiAgICBpZiAoam9pbmVkID09PSAnZ2l0aHViL2xvZ2luJykge1xuICAgICAgcmV0dXJuIGdpdGh1YkxvZ2luKHJlcSwgY29uZmlnKTtcbiAgICB9XG4gICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9yZWZyZXNoLXRva2VuJykge1xuICAgICAgcmV0dXJuIGdpdGh1YlJlZnJlc2hUb2tlbihyZXEsIGNvbmZpZyk7XG4gICAgfVxuICAgIGlmIChqb2luZWQgPT09ICdnaXRodWIvcmVwby1ub3QtZm91bmQnKSB7XG4gICAgICByZXR1cm4gZ2l0aHViUmVwb05vdEZvdW5kKHJlcSwgY29uZmlnKTtcbiAgICB9XG4gICAgaWYgKGpvaW5lZCA9PT0gJ2dpdGh1Yi9sb2dvdXQnKSB7XG4gICAgICB2YXIgX3JlcSRoZWFkZXJzJGdldDtcbiAgICAgIGNvbnN0IGNvb2tpZXMgPSBjb29raWUucGFyc2UoKF9yZXEkaGVhZGVycyRnZXQgPSByZXEuaGVhZGVycy5nZXQoJ2Nvb2tpZScpKSAhPT0gbnVsbCAmJiBfcmVxJGhlYWRlcnMkZ2V0ICE9PSB2b2lkIDAgPyBfcmVxJGhlYWRlcnMkZ2V0IDogJycpO1xuICAgICAgY29uc3QgYWNjZXNzX3Rva2VuID0gY29va2llc1sna2V5c3RhdGljLWdoLWFjY2Vzcy10b2tlbiddO1xuICAgICAgaWYgKGFjY2Vzc190b2tlbikge1xuICAgICAgICBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9hcHBsaWNhdGlvbnMvJHtjb25maWcuY2xpZW50SWR9L3Rva2VuYCwge1xuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YnRvYShjb25maWcuY2xpZW50SWQgKyAnOicgKyBjb25maWcuY2xpZW50U2VjcmV0KX1gXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW5cbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWRpcmVjdCgnL2tleXN0YXRpYycsIFtbJ1NldC1Db29raWUnLCBpbW1lZGlhdGVseUV4cGlyaW5nQ29va2llKCdrZXlzdGF0aWMtZ2gtYWNjZXNzLXRva2VuJyldLCBbJ1NldC1Db29raWUnLCBpbW1lZGlhdGVseUV4cGlyaW5nQ29va2llKCdrZXlzdGF0aWMtZ2gtcmVmcmVzaC10b2tlbicpXV0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICBib2R5OiAnTm90IEZvdW5kJ1xuICAgIH07XG4gIH07XG59XG5jb25zdCB0b2tlbkRhdGFSZXN1bHRUeXBlID0gcy50eXBlKHtcbiAgYWNjZXNzX3Rva2VuOiBzLnN0cmluZygpLFxuICBleHBpcmVzX2luOiBzLm51bWJlcigpLFxuICByZWZyZXNoX3Rva2VuOiBzLnN0cmluZygpLFxuICByZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW46IHMubnVtYmVyKCksXG4gIHNjb3BlOiBzLnN0cmluZygpLFxuICB0b2tlbl90eXBlOiBzLmxpdGVyYWwoJ2JlYXJlcicpXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGdpdGh1Yk9hdXRoQ2FsbGJhY2socmVxLCBjb25maWcpIHtcbiAgdmFyIF9yZXEkaGVhZGVycyRnZXQyO1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMKHJlcS51cmwsICdodHRwOi8vbG9jYWxob3N0Jykuc2VhcmNoUGFyYW1zO1xuICBjb25zdCBlcnJvciA9IHNlYXJjaFBhcmFtcy5nZXQoJ2Vycm9yJyk7XG4gIGNvbnN0IGVycm9yRGVzY3JpcHRpb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdlcnJvcl9kZXNjcmlwdGlvbicpO1xuICBpZiAodHlwZW9mIGVycm9yRGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogYEFuIGVycm9yIG9jY3VycmVkIHdoZW4gdHJ5aW5nIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIEdpdEh1YjpcXG4ke2Vycm9yRGVzY3JpcHRpb259JHtlcnJvciA9PT0gJ3JlZGlyZWN0X3VyaV9taXNtYXRjaCcgPyBgXFxuXFxuSWYgeW91IHdlcmUgdHJ5aW5nIHRvIHNpZ24gaW4gbG9jYWxseSBhbmQgcmVjZW50bHkgdXBncmFkZWQgS2V5c3RhdGljIGZyb20gQGtleXN0YXRpYy9jb3JlQDAuMC42OSBvciBiZWxvdywgeW91IG5lZWQgdG8gYWRkIFxcYGh0dHA6Ly8xMjcuMC4wLjEvYXBpL2tleXN0YXRpYy9naXRodWIvb2F1dGgvY2FsbGJhY2tcXGAgYXMgYSBjYWxsYmFjayBVUkwgaW4geW91ciBHaXRIdWIgYXBwLmAgOiAnJ31gXG4gICAgfTtcbiAgfVxuICBjb25zdCBjb2RlID0gc2VhcmNoUGFyYW1zLmdldCgnY29kZScpO1xuICBjb25zdCBzdGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXRlJyk7XG4gIGlmICh0eXBlb2YgY29kZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICBib2R5OiAnQmFkIFJlcXVlc3QnXG4gICAgfTtcbiAgfVxuICBjb25zdCBjb29raWVzID0gY29va2llLnBhcnNlKChfcmVxJGhlYWRlcnMkZ2V0MiA9IHJlcS5oZWFkZXJzLmdldCgnY29va2llJykpICE9PSBudWxsICYmIF9yZXEkaGVhZGVycyRnZXQyICE9PSB2b2lkIDAgPyBfcmVxJGhlYWRlcnMkZ2V0MiA6ICcnKTtcbiAgY29uc3QgZnJvbUNvb2tpZSA9IHN0YXRlID8gY29va2llc1sna3MtJyArIHN0YXRlXSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgZnJvbSA9IHR5cGVvZiBmcm9tQ29va2llID09PSAnc3RyaW5nJyAmJiBrZXlzdGF0aWNSb3V0ZVJlZ2V4LnRlc3QoZnJvbUNvb2tpZSkgPyBmcm9tQ29va2llIDogdW5kZWZpbmVkO1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuJyk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdjbGllbnRfaWQnLCBjb25maWcuY2xpZW50SWQpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2xpZW50X3NlY3JldCcsIGNvbmZpZy5jbGllbnRTZWNyZXQpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY29kZScsIGNvZGUpO1xuICBjb25zdCB0b2tlblJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfVxuICB9KTtcbiAgaWYgKCF0b2tlblJlcy5vaykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIGJvZHk6ICdBdXRob3JpemF0aW9uIGZhaWxlZCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IF90b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7XG4gIGxldCB0b2tlbkRhdGE7XG4gIHRyeSB7XG4gICAgdG9rZW5EYXRhID0gdG9rZW5EYXRhUmVzdWx0VHlwZS5jcmVhdGUoX3Rva2VuRGF0YSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIGJvZHk6ICdBdXRob3JpemF0aW9uIGZhaWxlZCdcbiAgICB9O1xuICB9XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBnZXRUb2tlbkNvb2tpZXModG9rZW5EYXRhLCBjb25maWcpO1xuICBpZiAoc3RhdGUgPT09ICdjbG9zZScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyczogWy4uLmhlYWRlcnMsIFsnQ29udGVudC1UeXBlJywgJ3RleHQvaHRtbCddXSxcbiAgICAgIGJvZHk6IFwiPHNjcmlwdD5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgna3MtcmVmZXRjaC1pbnN0YWxsYXRpb25zJywgJ3RydWUnKTt3aW5kb3cuY2xvc2UoKTs8L3NjcmlwdD5cIixcbiAgICAgIHN0YXR1czogMjAwXG4gICAgfTtcbiAgfVxuICByZXR1cm4gcmVkaXJlY3QoYC9rZXlzdGF0aWMke2Zyb20gPyBgLyR7ZnJvbX1gIDogJyd9YCwgaGVhZGVycyk7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbkNvb2tpZXModG9rZW5EYXRhLCBjb25maWcpIHtcbiAgY29uc3QgaGVhZGVycyA9IFtbJ1NldC1Db29raWUnLCBjb29raWUuc2VyaWFsaXplKCdrZXlzdGF0aWMtZ2gtYWNjZXNzLXRva2VuJywgdG9rZW5EYXRhLmFjY2Vzc190b2tlbiwge1xuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgbWF4QWdlOiB0b2tlbkRhdGEuZXhwaXJlc19pbixcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5EYXRhLmV4cGlyZXNfaW4gKiAxMDAwKSxcbiAgICBwYXRoOiAnLydcbiAgfSldLCBbJ1NldC1Db29raWUnLCBjb29raWUuc2VyaWFsaXplKCdrZXlzdGF0aWMtZ2gtcmVmcmVzaC10b2tlbicsIGF3YWl0IGVuY3J5cHRWYWx1ZSh0b2tlbkRhdGEucmVmcmVzaF90b2tlbiwgY29uZmlnLnNlY3JldCksIHtcbiAgICBzYW1lU2l0ZTogJ2xheCcsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIG1heEFnZTogdG9rZW5EYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbixcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdG9rZW5EYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiAqIDEwMCksXG4gICAgcGF0aDogJy8nXG4gIH0pXV07XG4gIHJldHVybiBoZWFkZXJzO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKHJlcSwgY29uZmlnKSB7XG4gIGNvbnN0IGNvb2tpZXMgPSBjb29raWUucGFyc2UocmVxLmhlYWRlcnMuZ2V0KCdjb29raWUnKSB8fCAnJyk7XG4gIGNvbnN0IHJlZnJlc2hUb2tlbkNvb2tpZSA9IGNvb2tpZXNbJ2tleXN0YXRpYy1naC1yZWZyZXNoLXRva2VuJ107XG4gIGlmICghcmVmcmVzaFRva2VuQ29va2llKSByZXR1cm47XG4gIGxldCByZWZyZXNoVG9rZW47XG4gIHRyeSB7XG4gICAgcmVmcmVzaFRva2VuID0gYXdhaXQgZGVjcnlwdFZhbHVlKHJlZnJlc2hUb2tlbkNvb2tpZSwgY29uZmlnLnNlY3JldCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gcmVmcmVzaFRva2VuO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2l0aHViUmVmcmVzaFRva2VuKHJlcSwgY29uZmlnKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCByZWZyZXNoR2l0SHViQXV0aChyZXEsIGNvbmZpZyk7XG4gIGlmICghaGVhZGVycykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIGJvZHk6ICdBdXRob3JpemF0aW9uIGZhaWxlZCdcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgaGVhZGVycyxcbiAgICBib2R5OiAnJ1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEdpdEh1YkF1dGgocmVxLCBjb25maWcpIHtcbiAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgZ2V0UmVmcmVzaFRva2VuKHJlcSwgY29uZmlnKTtcbiAgaWYgKCFyZWZyZXNoVG9rZW4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlbicpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2xpZW50X2lkJywgY29uZmlnLmNsaWVudElkKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9zZWNyZXQnLCBjb25maWcuY2xpZW50U2VjcmV0KTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncmVmcmVzaF90b2tlbicsIHJlZnJlc2hUb2tlbik7XG4gIGNvbnN0IHRva2VuUmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9XG4gIH0pO1xuICBpZiAoIXRva2VuUmVzLm9rKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IF90b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlcy5qc29uKCk7XG4gIGxldCB0b2tlbkRhdGE7XG4gIHRyeSB7XG4gICAgdG9rZW5EYXRhID0gdG9rZW5EYXRhUmVzdWx0VHlwZS5jcmVhdGUoX3Rva2VuRGF0YSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gZ2V0VG9rZW5Db29raWVzKHRva2VuRGF0YSwgY29uZmlnKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdpdGh1YlJlcG9Ob3RGb3VuZChyZXEsIGNvbmZpZykge1xuICBjb25zdCBoZWFkZXJzID0gYXdhaXQgcmVmcmVzaEdpdEh1YkF1dGgocmVxLCBjb25maWcpO1xuICBpZiAoaGVhZGVycykge1xuICAgIHJldHVybiByZWRpcmVjdCgnL2tleXN0YXRpYy9yZXBvLW5vdC1mb3VuZCcsIGhlYWRlcnMpO1xuICB9XG4gIHJldHVybiBnaXRodWJMb2dpbihyZXEsIGNvbmZpZyk7XG59XG5hc3luYyBmdW5jdGlvbiBnaXRodWJMb2dpbihyZXEsIGNvbmZpZykge1xuICBjb25zdCByZXFVcmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICBjb25zdCByYXdGcm9tID0gcmVxVXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2Zyb20nKTtcbiAgY29uc3QgZnJvbSA9IHR5cGVvZiByYXdGcm9tID09PSAnc3RyaW5nJyAmJiBrZXlzdGF0aWNSb3V0ZVJlZ2V4LnRlc3QocmF3RnJvbSkgPyByYXdGcm9tIDogJy8nO1xuICBjb25zdCBzdGF0ZSA9IGJ5dGVzVG9IZXgod2ViY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxMCkpKTtcbiAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2F1dGhvcml6ZScpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnY2xpZW50X2lkJywgY29uZmlnLmNsaWVudElkKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZGlyZWN0X3VyaScsIGAke3JlcVVybC5vcmlnaW59L2FwaS9rZXlzdGF0aWMvZ2l0aHViL29hdXRoL2NhbGxiYWNrYCk7XG4gIGlmIChmcm9tID09PSAnLycpIHtcbiAgICByZXR1cm4gcmVkaXJlY3QodXJsLnRvU3RyaW5nKCkpO1xuICB9XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdGF0ZScsIHN0YXRlKTtcbiAgcmV0dXJuIHJlZGlyZWN0KHVybC50b1N0cmluZygpLCBbWydTZXQtQ29va2llJywgY29va2llLnNlcmlhbGl6ZSgna3MtJyArIHN0YXRlLCBmcm9tLCB7XG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAvLyAxIGRheVxuICAgIG1heEFnZTogNjAgKiA2MCAqIDI0LFxuICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyA2MCAqIDYwICogMjQgKiAxMDAwKSxcbiAgICBwYXRoOiAnLycsXG4gICAgaHR0cE9ubHk6IHRydWVcbiAgfSldXSk7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVkR2l0aHViQXBwKHJlcSwgc2x1Z0VudlZhck5hbWUpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogNDAwLFxuICAgICAgYm9keTogJ0FwcCBzZXR1cCBvbmx5IGFsbG93ZWQgaW4gZGV2ZWxvcG1lbnQnXG4gICAgfTtcbiAgfVxuICByZXR1cm4gaGFuZGxlR2l0SHViQXBwQ3JlYXRpb24ocmVxLCBzbHVnRW52VmFyTmFtZSk7XG59XG5mdW5jdGlvbiBpbW1lZGlhdGVseUV4cGlyaW5nQ29va2llKG5hbWUpIHtcbiAgcmV0dXJuIGNvb2tpZS5zZXJpYWxpemUobmFtZSwgJycsIHtcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHBhdGg6ICcvJyxcbiAgICBtYXhBZ2U6IDAsXG4gICAgZXhwaXJlczogbmV3IERhdGUoKVxuICB9KTtcbn1cblxuZXhwb3J0IHsgbWFrZUdlbmVyaWNBUElSb3V0ZUhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/keystatic-core-api-generic.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/keystatic-core-reader.node.react-server.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/keystatic-core-reader.node.react-server.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createReader: () => (/* binding */ createReader)\n/* harmony export */ });\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var _generic_0d618209_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./generic-0d618209.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/generic-0d618209.node.react-server.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js-yaml */ \"(rsc)/./node_modules/js-yaml/dist/js-yaml.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createReader(repoPath, config) {\n  const fs$1 = {\n    async fileExists(path$1) {\n      try {\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1__.stat(node_path__WEBPACK_IMPORTED_MODULE_0__.join(repoPath, path$1));\n        return true;\n      } catch (err) {\n        if (err.code === 'ENOENT') return false;\n        throw err;\n      }\n    },\n    async readdir(path$1) {\n      try {\n        const entries = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1__.readdir(node_path__WEBPACK_IMPORTED_MODULE_0__.join(repoPath, path$1), {\n          withFileTypes: true\n        });\n        const filtered = [];\n        for (const entry of entries) {\n          if (entry.isDirectory()) {\n            filtered.push({\n              name: entry.name,\n              kind: 'directory'\n            });\n          }\n          if (entry.isFile()) {\n            filtered.push({\n              name: entry.name,\n              kind: 'file'\n            });\n          }\n        }\n        return filtered;\n      } catch (err) {\n        if (err.code === 'ENOENT') return [];\n        throw err;\n      }\n    },\n    async readFile(path$1) {\n      try {\n        return await node_fs_promises__WEBPACK_IMPORTED_MODULE_1__.readFile(node_path__WEBPACK_IMPORTED_MODULE_0__.join(repoPath, path$1));\n      } catch (err) {\n        if (err.code === 'ENOENT') return null;\n        throw err;\n      }\n    }\n  };\n  return {\n    collections: Object.fromEntries(Object.keys(config.collections || {}).map(key => [key, (0,_generic_0d618209_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.c)(key, config, fs$1)])),\n    singletons: Object.fromEntries(Object.keys(config.singletons || {}).map(key => [key, (0,_generic_0d618209_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.s)(key, config, fs$1)])),\n    repoPath,\n    config\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUtcmVhZGVyLm5vZGUucmVhY3Qtc2VydmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkI7QUFDSztBQUNvRTtBQUMzRTtBQUNvQjtBQUNOO0FBQ2Y7QUFDWDtBQUNnQztBQUMvQjtBQUNpQjtBQUNoQjtBQUNGOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrREFBTyxDQUFDLDJDQUFTO0FBQy9CO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCLHFEQUFVLENBQUMsMkNBQVM7QUFDbEQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EscUJBQXFCLHNEQUFXLENBQUMsMkNBQVM7QUFDMUMsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxtQkFBbUIseUVBQWdCO0FBQzNHLHNFQUFzRSxtQkFBbUIseUVBQWU7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7O0FBRXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9kaXN0L2tleXN0YXRpYy1jb3JlLXJlYWRlci5ub2RlLnJlYWN0LXNlcnZlci5qcz80ZWI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnbm9kZTpmcy9wcm9taXNlcyc7XG5pbXBvcnQgeyBjIGFzIGNvbGxlY3Rpb25SZWFkZXIsIHMgYXMgc2luZ2xldG9uUmVhZGVyIH0gZnJvbSAnLi9nZW5lcmljLTBkNjE4MjA5Lm5vZGUucmVhY3Qtc2VydmVyLmpzJztcbmltcG9ydCAncmVhY3QvanN4LXJ1bnRpbWUnO1xuaW1wb3J0ICcuL2luZGV4LWIyZGU5YmUxLm5vZGUucmVhY3Qtc2VydmVyLmpzJztcbmltcG9ydCAnQG1hcmtkb2MvbWFya2RvYy9kaXN0L2luZGV4Lm1qcyc7XG5pbXBvcnQgJ2VtZXJ5L2Fzc2VydGlvbnMnO1xuaW1wb3J0ICdlbWVyeSc7XG5pbXBvcnQgJy4vaW5kZXgtMTBlYTUwZTIubm9kZS5yZWFjdC1zZXJ2ZXIuanMnO1xuaW1wb3J0ICdjcnlwdG8nO1xuaW1wb3J0ICdAYnJhaW50cmVlL3Nhbml0aXplLXVybCc7XG5pbXBvcnQgJ2pzLXlhbWwnO1xuaW1wb3J0ICdyZWFjdCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlYWRlcihyZXBvUGF0aCwgY29uZmlnKSB7XG4gIGNvbnN0IGZzJDEgPSB7XG4gICAgYXN5bmMgZmlsZUV4aXN0cyhwYXRoJDEpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGZzLnN0YXQocGF0aC5qb2luKHJlcG9QYXRoLCBwYXRoJDEpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSAnRU5PRU5UJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfSxcbiAgICBhc3luYyByZWFkZGlyKHBhdGgkMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IGZzLnJlYWRkaXIocGF0aC5qb2luKHJlcG9QYXRoLCBwYXRoJDEpLCB7XG4gICAgICAgICAgd2l0aEZpbGVUeXBlczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgaWYgKGVudHJ5LmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBlbnRyeS5uYW1lLFxuICAgICAgICAgICAgICBraW5kOiAnZGlyZWN0b3J5J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChlbnRyeS5pc0ZpbGUoKSkge1xuICAgICAgICAgICAgZmlsdGVyZWQucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWU6IGVudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgIGtpbmQ6ICdmaWxlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSByZXR1cm4gW107XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHJlYWRGaWxlKHBhdGgkMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZzLnJlYWRGaWxlKHBhdGguam9pbihyZXBvUGF0aCwgcGF0aCQxKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyci5jb2RlID09PSAnRU5PRU5UJykgcmV0dXJuIG51bGw7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgY29sbGVjdGlvbnM6IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3Qua2V5cyhjb25maWcuY29sbGVjdGlvbnMgfHwge30pLm1hcChrZXkgPT4gW2tleSwgY29sbGVjdGlvblJlYWRlcihrZXksIGNvbmZpZywgZnMkMSldKSksXG4gICAgc2luZ2xldG9uczogT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5rZXlzKGNvbmZpZy5zaW5nbGV0b25zIHx8IHt9KS5tYXAoa2V5ID0+IFtrZXksIHNpbmdsZXRvblJlYWRlcihrZXksIGNvbmZpZywgZnMkMSldKSksXG4gICAgcmVwb1BhdGgsXG4gICAgY29uZmlnXG4gIH07XG59XG5cbmV4cG9ydCB7IGNyZWF0ZVJlYWRlciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/keystatic-core-reader.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/keystatic-core.node.react-server.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/keystatic-core.node.react-server.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockWrapper: () => (/* binding */ BlockWrapper),\n/* harmony export */   NotEditable: () => (/* binding */ NotEditable),\n/* harmony export */   ToolbarSeparator: () => (/* binding */ ToolbarSeparator),\n/* harmony export */   collection: () => (/* binding */ collection),\n/* harmony export */   component: () => (/* reexport safe */ _api_b2cd9ecd_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   fields: () => (/* binding */ index),\n/* harmony export */   singleton: () => (/* binding */ singleton)\n/* harmony export */ });\n/* harmony import */ var _api_b2cd9ecd_node_react_server_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api-b2cd9ecd.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/api-b2cd9ecd.node.react-server.js\");\n/* harmony import */ var _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-10ea50e2.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-10ea50e2.node.react-server.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var _index_9722793d_node_react_server_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-9722793d.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-9722793d.node.react-server.js\");\n/* harmony import */ var emery_assertions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! emery/assertions */ \"(rsc)/./node_modules/emery/assertions/dist/emery-assertions.esm.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! crypto */ \"crypto\");\n\n\n\n\n\n\n\n\n\n\n\n// Common\n\n// Storage\n// ----------------------------------------------------------------------------\n\n// ============================================================================\n// Functions\n// ============================================================================\n\nfunction config(config) {\n  return config;\n}\nfunction collection(collection) {\n  return collection;\n}\nfunction singleton(collection) {\n  return collection;\n}\n\nfunction array(element, opts) {\n  var _opts$label;\n  return {\n    kind: 'array',\n    element,\n    label: (_opts$label = opts === null || opts === void 0 ? void 0 : opts.label) !== null && _opts$label !== void 0 ? _opts$label : 'Items',\n    description: opts === null || opts === void 0 ? void 0 : opts.description,\n    itemLabel: opts === null || opts === void 0 ? void 0 : opts.itemLabel,\n    asChildTag: opts === null || opts === void 0 ? void 0 : opts.asChildTag,\n    slugField: opts === null || opts === void 0 ? void 0 : opts.slugField,\n    validation: opts === null || opts === void 0 ? void 0 : opts.validation\n  };\n}\n\nfunction select({\n  label,\n  options,\n  defaultValue,\n  description\n}) {\n  const optionValuesSet = new Set(options.map(x => x.value));\n  if (!optionValuesSet.has(defaultValue)) {\n    throw new Error(`A defaultValue of ${defaultValue} was provided to a select field but it does not match the value of one of the options provided`);\n  }\n  const field = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.S, {\n        label: label,\n        options: options,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return defaultValue;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (!optionValuesSet.has(value)) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a valid option');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction blocks(blocks, opts) {\n  const entries = Object.entries(blocks);\n  if (!entries.length) {\n    throw new Error('fields.blocks must have at least one entry');\n  }\n  const select$1 = select({\n    label: 'Kind',\n    defaultValue: entries[0][0],\n    options: Object.entries(blocks).map(([key, {\n      label\n    }]) => ({\n      label,\n      value: key\n    }))\n  });\n  const element = conditional(select$1, Object.fromEntries(entries.map(([key, {\n    schema\n  }]) => [key, schema])));\n  return {\n    ...array(element, {\n      label: opts.label,\n      description: opts.description,\n      validation: opts.validation,\n      itemLabel(props) {\n        const kind = props.discriminant;\n        const block = blocks[kind];\n        if (!block.itemLabel) return block.label;\n        return block.itemLabel(props.value);\n      }\n    }),\n    Input: _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.B\n  };\n}\n\nfunction checkbox({\n  label,\n  defaultValue = false,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.C, {\n        ...props,\n        label: label,\n        description: description\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) return defaultValue;\n      if (typeof value !== 'boolean') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a boolean');\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction child(options) {\n  return {\n    kind: 'child',\n    options: options.kind === 'block' ? {\n      ...options,\n      dividers: options.dividers,\n      formatting: options.formatting === 'inherit' ? {\n        blockTypes: 'inherit',\n        headingLevels: 'inherit',\n        inlineMarks: 'inherit',\n        listTypes: 'inherit',\n        alignment: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links,\n      images: options.images,\n      tables: options.tables,\n      componentBlocks: options.componentBlocks\n    } : {\n      kind: 'inline',\n      placeholder: options.placeholder,\n      formatting: options.formatting === 'inherit' ? {\n        inlineMarks: 'inherit',\n        softBreaks: 'inherit'\n      } : options.formatting,\n      links: options.links\n    }\n  };\n}\n\nfunction cloudImage({\n  label,\n  description,\n  validation\n}) {\n  return {\n    ...(0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.o)({\n      src: (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.t)({\n        label: 'URL',\n        validation: {\n          length: {\n            min: validation !== null && validation !== void 0 && validation.isRequired ? 1 : 0\n          }\n        }\n      }),\n      alt: (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.t)({\n        label: 'Alt text'\n      }),\n      height: (0,_index_9722793d_node_react_server_js__WEBPACK_IMPORTED_MODULE_6__.i)({\n        label: 'Height'\n      }),\n      width: (0,_index_9722793d_node_react_server_js__WEBPACK_IMPORTED_MODULE_6__.i)({\n        label: 'Width'\n      })\n    }, {\n      label,\n      description\n    }),\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.a, {\n        ...props,\n        isRequired: validation === null || validation === void 0 ? void 0 : validation.isRequired\n      });\n    }\n  };\n}\n\nfunction conditional(discriminant, values) {\n  return {\n    kind: 'conditional',\n    discriminant,\n    values: values\n  };\n}\n\nfunction validateDate(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) {\n    return `${label} is not a valid date`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const date = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (date < min) {\n        return `${label} must be after ${min.toLocaleDateString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (date > max) {\n        return `${label} must be no later than ${max.toLocaleDateString()}`;\n      }\n    }\n  }\n}\n\nfunction date({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.D, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      const today = new Date();\n      const year = today.getFullYear();\n      const month = String(today.getMonth() + 1).padStart(2, '0');\n      const day = String(today.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (value instanceof Date) {\n        const year = value.getUTCFullYear();\n        const month = String(value.getUTCMonth() + 1).padStart(2, '0');\n        const day = String(value.getUTCDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    serialize(value) {\n      if (value === null) return {\n        value: undefined\n      };\n      const date = new Date(value);\n      date.toISOString = () => value;\n      date.toString = () => value;\n      return {\n        value: date\n      };\n    },\n    validate(value) {\n      const message = validateDate(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction validateDatetime(validation, value, label) {\n  if (value !== null && !/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}$/.test(value)) {\n    return `${label} is not a valid datetime`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if ((validation !== null && validation !== void 0 && validation.min || validation !== null && validation !== void 0 && validation.max) && value !== null) {\n    const datetime = new Date(value);\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined) {\n      const min = new Date(validation.min);\n      if (datetime < min) {\n        return `${label} must be after ${min.toISOString()}`;\n      }\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined) {\n      const max = new Date(validation.max);\n      if (datetime > max) {\n        return `${label} must be no later than ${max.toISOString()}`;\n      }\n    }\n  }\n}\n\nfunction datetime({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.d, {\n        validation: validation,\n        label: label,\n        description: description,\n        ...props\n      });\n    },\n    defaultValue() {\n      if (defaultValue === undefined) {\n        return null;\n      }\n      if (typeof defaultValue === 'string') {\n        return defaultValue;\n      }\n      if (defaultValue.kind === 'now') {\n        const now = new Date();\n        return new Date(now.getTime() - now.getTimezoneOffset() * 60 * 1000).toISOString().slice(0, -8);\n      }\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (value instanceof Date) {\n        return value.toISOString().slice(0, -8);\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string or date');\n      }\n      return value;\n    },\n    serialize(value) {\n      if (value === null) return {\n        value: undefined\n      };\n      const date = new Date(value + 'Z');\n      date.toJSON = () => date.toISOString().slice(0, -8);\n      date.toString = () => date.toISOString().slice(0, -8);\n      return {\n        value: date\n      };\n    },\n    validate(value) {\n      const message = validateDatetime(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    }\n  });\n}\n\nfunction empty() {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    serialize() {\n      return {\n        value: undefined\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    label: 'Empty'\n  });\n}\n\n/**\n * @deprecated `emptyDocument` has been replaced with the `emptyContent` field\n */\nfunction emptyDocument() {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: '.mdoc',\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction emptyContent(opts) {\n  return {\n    kind: 'form',\n    formKind: 'content',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return null;\n    },\n    parse() {\n      return null;\n    },\n    contentExtension: `.${opts.extension}`,\n    serialize() {\n      return {\n        value: undefined,\n        content: new Uint8Array(),\n        external: new Map(),\n        other: new Map()\n      };\n    },\n    validate(value) {\n      return value;\n    },\n    reader: {\n      parse() {\n        return null;\n      }\n    }\n  };\n}\n\nfunction file({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath,\n  transformFilename\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.e, {\n        label: label,\n        description: description,\n        validation: validation,\n        transformFilename: transformFilename,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.f)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction image({\n  label,\n  directory,\n  validation,\n  description,\n  publicPath,\n  transformFilename\n}) {\n  return {\n    kind: 'form',\n    formKind: 'asset',\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.I, {\n        label: label,\n        description: description,\n        validation: validation,\n        transformFilename: transformFilename,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    filename(value, args) {\n      if (typeof value === 'string') {\n        return value.slice((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length);\n      }\n      return undefined;\n    },\n    parse(value, args) {\n      var _value$match$, _value$match;\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      if (args.asset === undefined) {\n        return null;\n      }\n      return {\n        data: args.asset,\n        filename: value.slice((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug).length),\n        extension: (_value$match$ = (_value$match = value.match(/\\.([^.]+$)/)) === null || _value$match === void 0 ? void 0 : _value$match[1]) !== null && _value$match$ !== void 0 ? _value$match$ : ''\n      };\n    },\n    validate(value) {\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value, args) {\n      if (value === null) {\n        return {\n          value: undefined,\n          asset: undefined\n        };\n      }\n      const filename = args.suggestedFilenamePrefix ? args.suggestedFilenamePrefix + '.' + value.extension : value.filename;\n      return {\n        value: `${(0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.g)(publicPath, args.slug)}${filename}`,\n        asset: {\n          filename,\n          content: value.data\n        }\n      };\n    },\n    directory: directory ? (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.f)(directory) : undefined,\n    reader: {\n      parse(value) {\n        if (typeof value !== 'string' && value !== undefined) {\n          throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n        }\n        const val = value === undefined ? null : value;\n        (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(val, validation, label);\n        return val;\n      }\n    }\n  };\n}\n\nfunction pluralize(count, options) {\n  const {\n    singular,\n    plural = singular + 's',\n    inclusive = true\n  } = options;\n  const variant = count === 1 ? singular : plural;\n  return inclusive ? `${count} ${variant}` : variant;\n}\n\nfunction validateMultiRelationshipLength(validation, value) {\n  var _validation$length$mi, _validation$length, _validation$length$ma, _validation$length2;\n  const minLength = (_validation$length$mi = validation === null || validation === void 0 || (_validation$length = validation.length) === null || _validation$length === void 0 ? void 0 : _validation$length.min) !== null && _validation$length$mi !== void 0 ? _validation$length$mi : 0;\n  if (value.length < minLength) {\n    return `Must have at least ${pluralize(minLength, {\n      singular: 'item'\n    })}.`;\n  }\n  const maxLength = (_validation$length$ma = validation === null || validation === void 0 || (_validation$length2 = validation.length) === null || _validation$length2 === void 0 ? void 0 : _validation$length2.max) !== null && _validation$length$ma !== void 0 ? _validation$length$ma : Infinity;\n  if (value.length > maxLength) {\n    return `Must have at most ${pluralize(maxLength, {\n      singular: 'item'\n    })}.`;\n  }\n}\n\nfunction multiRelationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.M, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return [];\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value) || !value.every(emery__WEBPACK_IMPORTED_MODULE_4__.isString)) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an array of strings');\n      }\n      return value;\n    },\n    validate(value) {\n      const error = validateMultiRelationshipLength(validation, value);\n      if (error) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(error);\n      }\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n}\n\nfunction multiselect({\n  label,\n  options,\n  defaultValue = [],\n  description\n}) {\n  const valuesToOption = new Map(options.map(x => [x.value, x]));\n  const field = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.f, {\n        label: label,\n        description: description,\n        options: options,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return [];\n      }\n      if (!Array.isArray(value)) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an array of options');\n      }\n      if (!value.every(x => typeof x === 'string' && valuesToOption.has(x))) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(`Must be an array with one of ${options.map(x => x.value).join(', ')}`);\n      }\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    serialize(value) {\n      return {\n        value\n      };\n    }\n  });\n  return {\n    ...field,\n    options\n  };\n}\n\nfunction validateNumber(validation, value, step, label) {\n  if (value !== null && typeof value !== 'number') {\n    return `${label} must be a number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n    if (step !== undefined && (validation === null || validation === void 0 ? void 0 : validation.validateStep) !== undefined && !isAtStep(value, step)) {\n      return `${label} must be a multiple of ${step}`;\n    }\n  }\n}\nfunction decimalPlaces(value) {\n  const stringified = value.toString();\n  const indexOfDecimal = stringified.indexOf('.');\n  if (indexOfDecimal === -1) {\n    const indexOfE = stringified.indexOf('e-');\n    return indexOfE === -1 ? 0 : parseInt(stringified.slice(indexOfE + 2));\n  }\n  return stringified.length - indexOfDecimal - 1;\n}\nfunction isAtStep(value, step) {\n  const dc = Math.max(decimalPlaces(step), decimalPlaces(value));\n  const base = Math.pow(10, dc);\n  return value * base % (step * base) === 0;\n}\n\nfunction number({\n  label,\n  defaultValue,\n  step,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.N, {\n        label: label,\n        description: description,\n        validation: validation,\n        step: step,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a number');\n    },\n    validate(value) {\n      const message = validateNumber(validation, value, step, label);\n      if (message !== undefined) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction pathReference({\n  label,\n  pattern,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.P, {\n        label: label,\n        pattern: pattern,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction relationship({\n  label,\n  collection,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.R, {\n        label: label,\n        collection: collection,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value;\n    },\n    validate(value) {\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction parseSlugFieldAsNormalField(value) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug: ''\n    };\n  }\n  if (typeof value !== 'object') {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be an object');\n  }\n  if (Object.keys(value).length !== 2) {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Unexpected keys');\n  }\n  if (!('name' in value) || !('slug' in value)) {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Missing name or slug');\n  }\n  if (typeof value.name !== 'string') {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('name must be a string');\n  }\n  if (typeof value.slug !== 'string') {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('slug must be a string');\n  }\n  return {\n    name: value.name,\n    slug: value.slug\n  };\n}\nfunction parseAsSlugField(value, slug) {\n  if (value === undefined) {\n    return {\n      name: '',\n      slug\n    };\n  }\n  if (typeof value !== 'string') {\n    throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n  }\n  return {\n    name: value,\n    slug\n  };\n}\nfunction slug(_args) {\n  var _args$name$validation, _args$name$validation2, _args$name$validation3, _args$name$validation4, _args$name$validation5, _args$slug;\n  const args = {\n    ..._args,\n    name: {\n      ..._args.name,\n      validation: {\n        pattern: (_args$name$validation = _args.name.validation) === null || _args$name$validation === void 0 ? void 0 : _args$name$validation.pattern,\n        length: {\n          min: Math.max((_args$name$validation2 = _args.name.validation) !== null && _args$name$validation2 !== void 0 && _args$name$validation2.isRequired ? 1 : 0, (_args$name$validation3 = (_args$name$validation4 = _args.name.validation) === null || _args$name$validation4 === void 0 || (_args$name$validation4 = _args$name$validation4.length) === null || _args$name$validation4 === void 0 ? void 0 : _args$name$validation4.min) !== null && _args$name$validation3 !== void 0 ? _args$name$validation3 : 0),\n          max: (_args$name$validation5 = _args.name.validation) === null || _args$name$validation5 === void 0 || (_args$name$validation5 = _args$name$validation5.length) === null || _args$name$validation5 === void 0 ? void 0 : _args$name$validation5.max\n        }\n      }\n    }\n  };\n  const naiveGenerateSlug = ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.generate) || _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.s;\n  let _defaultValue;\n  function defaultValue() {\n    if (!_defaultValue) {\n      var _args$name$defaultVal, _args$name$defaultVal2;\n      _defaultValue = {\n        name: (_args$name$defaultVal = args.name.defaultValue) !== null && _args$name$defaultVal !== void 0 ? _args$name$defaultVal : '',\n        slug: naiveGenerateSlug((_args$name$defaultVal2 = args.name.defaultValue) !== null && _args$name$defaultVal2 !== void 0 ? _args$name$defaultVal2 : '')\n      };\n    }\n    return _defaultValue;\n  }\n  function validate(value, {\n    slugField\n  } = {\n    slugField: undefined\n  }) {\n    var _args$name$validation6, _args$name$validation7, _args$name$validation8, _args$name$validation9, _args$name$validation10, _args$slug$validation, _args$slug2, _args$slug$validation2, _args$slug3, _args$slug$label, _args$slug4, _args$slug5;\n    const nameMessage = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.v)(value.name, (_args$name$validation6 = (_args$name$validation7 = args.name.validation) === null || _args$name$validation7 === void 0 || (_args$name$validation7 = _args$name$validation7.length) === null || _args$name$validation7 === void 0 ? void 0 : _args$name$validation7.min) !== null && _args$name$validation6 !== void 0 ? _args$name$validation6 : 0, (_args$name$validation8 = (_args$name$validation9 = args.name.validation) === null || _args$name$validation9 === void 0 || (_args$name$validation9 = _args$name$validation9.length) === null || _args$name$validation9 === void 0 ? void 0 : _args$name$validation9.max) !== null && _args$name$validation8 !== void 0 ? _args$name$validation8 : Infinity, args.name.label, undefined, (_args$name$validation10 = args.name.validation) === null || _args$name$validation10 === void 0 ? void 0 : _args$name$validation10.pattern);\n    if (nameMessage !== undefined) {\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(nameMessage);\n    }\n    const slugMessage = (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.v)(value.slug, (_args$slug$validation = (_args$slug2 = args.slug) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.validation) === null || _args$slug2 === void 0 || (_args$slug2 = _args$slug2.length) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.min) !== null && _args$slug$validation !== void 0 ? _args$slug$validation : 1, (_args$slug$validation2 = (_args$slug3 = args.slug) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.validation) === null || _args$slug3 === void 0 || (_args$slug3 = _args$slug3.length) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.max) !== null && _args$slug$validation2 !== void 0 ? _args$slug$validation2 : Infinity, (_args$slug$label = (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.label) !== null && _args$slug$label !== void 0 ? _args$slug$label : 'Slug', slugField ? slugField : {\n      slugs: emptySet,\n      glob: '*'\n    }, (_args$slug5 = args.slug) === null || _args$slug5 === void 0 || (_args$slug5 = _args$slug5.validation) === null || _args$slug5 === void 0 ? void 0 : _args$slug5.pattern);\n    if (slugMessage !== undefined) {\n      throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(slugMessage);\n    }\n    return value;\n  }\n  const emptySet = new Set();\n  return {\n    kind: 'form',\n    formKind: 'slug',\n    label: args.name.label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.g, {\n        args: args,\n        naiveGenerateSlug: naiveGenerateSlug,\n        defaultValue: defaultValue(),\n        ...props\n      });\n    },\n    defaultValue,\n    parse(value, args) {\n      if ((args === null || args === void 0 ? void 0 : args.slug) !== undefined) {\n        return parseAsSlugField(value, args.slug);\n      }\n      return parseSlugFieldAsNormalField(value);\n    },\n    validate,\n    serialize(value) {\n      return {\n        value\n      };\n    },\n    serializeWithSlug(value) {\n      return {\n        value: value.name,\n        slug: value.slug\n      };\n    },\n    reader: {\n      parse(value) {\n        const parsed = parseSlugFieldAsNormalField(value);\n        return validate(parsed);\n      },\n      parseWithSlug(value, args) {\n        return validate(parseAsSlugField(value, args.slug), {\n          slugField: {\n            glob: args.glob,\n            slugs: emptySet\n          }\n        }).name;\n      }\n    }\n  };\n}\n\nfunction isValidURL(url) {\n  return url === (0,_braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_5__.sanitizeUrl)(url);\n}\n\nfunction validateUrl(validation, value, label) {\n  if (value !== null && (typeof value !== 'string' || !isValidURL(value))) {\n    return `${label} is not a valid URL`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n}\n\nfunction url({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.b)({\n    label,\n    Input(props) {\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.U, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue || null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value !== 'string') {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F('Must be a string');\n      }\n      return value === '' ? null : value;\n    },\n    validate(value) {\n      const message = validateUrl(validation, value, label);\n      if (message !== undefined) {\n        throw new _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.F(message);\n      }\n      (0,_index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.c)(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nfunction ignored() {\n  return {\n    kind: 'form',\n    Input() {\n      return null;\n    },\n    defaultValue() {\n      return {\n        value: undefined\n      };\n    },\n    parse(value) {\n      return {\n        value\n      };\n    },\n    serialize(value) {\n      return value;\n    },\n    validate(value) {\n      return value;\n    },\n    label: 'Ignored',\n    reader: {\n      parse(value) {\n        return value;\n      }\n    }\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  array: array,\n  blocks: blocks,\n  checkbox: checkbox,\n  child: child,\n  cloudImage: cloudImage,\n  conditional: conditional,\n  date: date,\n  datetime: datetime,\n  document: _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.d,\n  empty: empty,\n  emptyDocument: emptyDocument,\n  emptyContent: emptyContent,\n  file: file,\n  image: image,\n  integer: _index_9722793d_node_react_server_js__WEBPACK_IMPORTED_MODULE_6__.i,\n  multiRelationship: multiRelationship,\n  multiselect: multiselect,\n  number: number,\n  object: _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.o,\n  pathReference: pathReference,\n  relationship: relationship,\n  select: select,\n  slug: slug,\n  text: _index_10ea50e2_node_react_server_js__WEBPACK_IMPORTED_MODULE_1__.t,\n  url: url,\n  ignored: ignored,\n  mdx: _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.m,\n  markdoc: _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_3__.a\n});\n\nfunction BlockWrapper() {}\nfunction NotEditable() {}\nfunction ToolbarSeparator() {}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3Qva2V5c3RhdGljLWNvcmUubm9kZS5yZWFjdC1zZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUU7QUFDdWQ7QUFDcGY7QUFDb0c7QUFDM0c7QUFDcUI7QUFDZTtBQUM1QjtBQUNmO0FBQ1Y7O0FBRWhCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSx5Q0FBeUMsY0FBYztBQUN2RDtBQUNBLGdCQUFnQix1RUFBbUM7QUFDbkQ7QUFDQTtBQUNBLDBCQUEwQixzREFBRyxDQUFDLG1FQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1FQUFjO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IsbUVBQWM7QUFDaEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsV0FBVyxtRUFBZ0I7QUFDM0I7QUFD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QkFBa0IsbUVBQWM7QUFDaEM7QUFDQSxNQUFNLHVFQUFjO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUVBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbUVBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0EsVUFBVSxtRUFBTTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUVBQUk7QUFDWjtBQUNBO0FBQ0EsT0FBTyxtRUFBRztBQUNWLFdBQVcsbUVBQU87QUFDbEIsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRXVHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGtleXN0YXRpYy90ZW1wbGF0ZXMtbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BrZXlzdGF0aWMvY29yZS9kaXN0L2tleXN0YXRpYy1jb3JlLm5vZGUucmVhY3Qtc2VydmVyLmpzP2M3NmIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgYyBhcyBjb21wb25lbnQgfSBmcm9tICcuL2FwaS1iMmNkOWVjZC5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgeyBiIGFzIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlLCBTIGFzIFNlbGVjdEZpZWxkSW5wdXQsIEYgYXMgRmllbGREYXRhRXJyb3IsIEIgYXMgQmxvY2tzRmllbGRJbnB1dCwgQyBhcyBDaGVja2JveEZpZWxkSW5wdXQsIHQgYXMgdGV4dCwgYSBhcyBDbG91ZEltYWdlRmllbGRJbnB1dCwgRCBhcyBEYXRlRmllbGRJbnB1dCwgYyBhcyBhc3NlcnRSZXF1aXJlZCwgZCBhcyBEYXRldGltZUZpZWxkSW5wdXQsIGUgYXMgRmlsZUZpZWxkSW5wdXQsIEkgYXMgSW1hZ2VGaWVsZElucHV0LCBNIGFzIE11bHRpUmVsYXRpb25zaGlwSW5wdXQsIGYgYXMgTXVsdGlzZWxlY3RGaWVsZElucHV0LCBOIGFzIE51bWJlckZpZWxkSW5wdXQsIFAgYXMgUGF0aFJlZmVyZW5jZUlucHV0LCBSIGFzIFJlbGF0aW9uc2hpcElucHV0LCBzIGFzIHNsdWdpZnksIGcgYXMgU2x1Z0ZpZWxkSW5wdXQsIHYgYXMgdmFsaWRhdGVUZXh0LCBVIGFzIFVybEZpZWxkSW5wdXQgfSBmcm9tICcuL2luZGV4LTEwZWE1MGUyLm5vZGUucmVhY3Qtc2VydmVyLmpzJztcbmltcG9ydCB7IGpzeCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IG8gYXMgb2JqZWN0LCBnIGFzIGdldFNyY1ByZWZpeCwgZiBhcyBmaXhQYXRoLCBkIGFzIGRvY3VtZW50LCBtIGFzIG1keCwgYSBhcyBtYXJrZG9jIH0gZnJvbSAnLi9pbmRleC1iMmRlOWJlMS5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJ2VtZXJ5JztcbmltcG9ydCB7IHNhbml0aXplVXJsIH0gZnJvbSAnQGJyYWludHJlZS9zYW5pdGl6ZS11cmwnO1xuaW1wb3J0IHsgaSBhcyBpbnRlZ2VyIH0gZnJvbSAnLi9pbmRleC05NzIyNzkzZC5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgJ0BtYXJrZG9jL21hcmtkb2MvZGlzdC9pbmRleC5tanMnO1xuaW1wb3J0ICdlbWVyeS9hc3NlcnRpb25zJztcbmltcG9ydCAnY3J5cHRvJztcblxuLy8gQ29tbW9uXG5cbi8vIFN0b3JhZ2Vcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRnVuY3Rpb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGNvbmZpZyhjb25maWcpIHtcbiAgcmV0dXJuIGNvbmZpZztcbn1cbmZ1bmN0aW9uIGNvbGxlY3Rpb24oY29sbGVjdGlvbikge1xuICByZXR1cm4gY29sbGVjdGlvbjtcbn1cbmZ1bmN0aW9uIHNpbmdsZXRvbihjb2xsZWN0aW9uKSB7XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufVxuXG5mdW5jdGlvbiBhcnJheShlbGVtZW50LCBvcHRzKSB7XG4gIHZhciBfb3B0cyRsYWJlbDtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnYXJyYXknLFxuICAgIGVsZW1lbnQsXG4gICAgbGFiZWw6IChfb3B0cyRsYWJlbCA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5sYWJlbCkgIT09IG51bGwgJiYgX29wdHMkbGFiZWwgIT09IHZvaWQgMCA/IF9vcHRzJGxhYmVsIDogJ0l0ZW1zJyxcbiAgICBkZXNjcmlwdGlvbjogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmRlc2NyaXB0aW9uLFxuICAgIGl0ZW1MYWJlbDogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLml0ZW1MYWJlbCxcbiAgICBhc0NoaWxkVGFnOiBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuYXNDaGlsZFRhZyxcbiAgICBzbHVnRmllbGQ6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5zbHVnRmllbGQsXG4gICAgdmFsaWRhdGlvbjogb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnZhbGlkYXRpb25cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0KHtcbiAgbGFiZWwsXG4gIG9wdGlvbnMsXG4gIGRlZmF1bHRWYWx1ZSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgY29uc3Qgb3B0aW9uVmFsdWVzU2V0ID0gbmV3IFNldChvcHRpb25zLm1hcCh4ID0+IHgudmFsdWUpKTtcbiAgaWYgKCFvcHRpb25WYWx1ZXNTZXQuaGFzKGRlZmF1bHRWYWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGVmYXVsdFZhbHVlIG9mICR7ZGVmYXVsdFZhbHVlfSB3YXMgcHJvdmlkZWQgdG8gYSBzZWxlY3QgZmllbGQgYnV0IGl0IGRvZXMgbm90IG1hdGNoIHRoZSB2YWx1ZSBvZiBvbmUgb2YgdGhlIG9wdGlvbnMgcHJvdmlkZWRgKTtcbiAgfVxuICBjb25zdCBmaWVsZCA9IGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goU2VsZWN0RmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvblZhbHVlc1NldC5oYXModmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHZhbGlkIG9wdGlvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICAuLi5maWVsZCxcbiAgICBvcHRpb25zXG4gIH07XG59XG5cbmZ1bmN0aW9uIGJsb2NrcyhibG9ja3MsIG9wdHMpIHtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGJsb2Nrcyk7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpZWxkcy5ibG9ja3MgbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBlbnRyeScpO1xuICB9XG4gIGNvbnN0IHNlbGVjdCQxID0gc2VsZWN0KHtcbiAgICBsYWJlbDogJ0tpbmQnLFxuICAgIGRlZmF1bHRWYWx1ZTogZW50cmllc1swXVswXSxcbiAgICBvcHRpb25zOiBPYmplY3QuZW50cmllcyhibG9ja3MpLm1hcCgoW2tleSwge1xuICAgICAgbGFiZWxcbiAgICB9XSkgPT4gKHtcbiAgICAgIGxhYmVsLFxuICAgICAgdmFsdWU6IGtleVxuICAgIH0pKVxuICB9KTtcbiAgY29uc3QgZWxlbWVudCA9IGNvbmRpdGlvbmFsKHNlbGVjdCQxLCBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcy5tYXAoKFtrZXksIHtcbiAgICBzY2hlbWFcbiAgfV0pID0+IFtrZXksIHNjaGVtYV0pKSk7XG4gIHJldHVybiB7XG4gICAgLi4uYXJyYXkoZWxlbWVudCwge1xuICAgICAgbGFiZWw6IG9wdHMubGFiZWwsXG4gICAgICBkZXNjcmlwdGlvbjogb3B0cy5kZXNjcmlwdGlvbixcbiAgICAgIHZhbGlkYXRpb246IG9wdHMudmFsaWRhdGlvbixcbiAgICAgIGl0ZW1MYWJlbChwcm9wcykge1xuICAgICAgICBjb25zdCBraW5kID0gcHJvcHMuZGlzY3JpbWluYW50O1xuICAgICAgICBjb25zdCBibG9jayA9IGJsb2Nrc1traW5kXTtcbiAgICAgICAgaWYgKCFibG9jay5pdGVtTGFiZWwpIHJldHVybiBibG9jay5sYWJlbDtcbiAgICAgICAgcmV0dXJuIGJsb2NrLml0ZW1MYWJlbChwcm9wcy52YWx1ZSk7XG4gICAgICB9XG4gICAgfSksXG4gICAgSW5wdXQ6IEJsb2Nrc0ZpZWxkSW5wdXRcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2hlY2tib3goe1xuICBsYWJlbCxcbiAgZGVmYXVsdFZhbHVlID0gZmFsc2UsXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KENoZWNrYm94RmllbGRJbnB1dCwge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBib29sZWFuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjaGlsZChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2NoaWxkJyxcbiAgICBvcHRpb25zOiBvcHRpb25zLmtpbmQgPT09ICdibG9jaycgPyB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgZGl2aWRlcnM6IG9wdGlvbnMuZGl2aWRlcnMsXG4gICAgICBmb3JtYXR0aW5nOiBvcHRpb25zLmZvcm1hdHRpbmcgPT09ICdpbmhlcml0JyA/IHtcbiAgICAgICAgYmxvY2tUeXBlczogJ2luaGVyaXQnLFxuICAgICAgICBoZWFkaW5nTGV2ZWxzOiAnaW5oZXJpdCcsXG4gICAgICAgIGlubGluZU1hcmtzOiAnaW5oZXJpdCcsXG4gICAgICAgIGxpc3RUeXBlczogJ2luaGVyaXQnLFxuICAgICAgICBhbGlnbm1lbnQ6ICdpbmhlcml0JyxcbiAgICAgICAgc29mdEJyZWFrczogJ2luaGVyaXQnXG4gICAgICB9IDogb3B0aW9ucy5mb3JtYXR0aW5nLFxuICAgICAgbGlua3M6IG9wdGlvbnMubGlua3MsXG4gICAgICBpbWFnZXM6IG9wdGlvbnMuaW1hZ2VzLFxuICAgICAgdGFibGVzOiBvcHRpb25zLnRhYmxlcyxcbiAgICAgIGNvbXBvbmVudEJsb2Nrczogb3B0aW9ucy5jb21wb25lbnRCbG9ja3NcbiAgICB9IDoge1xuICAgICAga2luZDogJ2lubGluZScsXG4gICAgICBwbGFjZWhvbGRlcjogb3B0aW9ucy5wbGFjZWhvbGRlcixcbiAgICAgIGZvcm1hdHRpbmc6IG9wdGlvbnMuZm9ybWF0dGluZyA9PT0gJ2luaGVyaXQnID8ge1xuICAgICAgICBpbmxpbmVNYXJrczogJ2luaGVyaXQnLFxuICAgICAgICBzb2Z0QnJlYWtzOiAnaW5oZXJpdCdcbiAgICAgIH0gOiBvcHRpb25zLmZvcm1hdHRpbmcsXG4gICAgICBsaW5rczogb3B0aW9ucy5saW5rc1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xvdWRJbWFnZSh7XG4gIGxhYmVsLFxuICBkZXNjcmlwdGlvbixcbiAgdmFsaWRhdGlvblxufSkge1xuICByZXR1cm4ge1xuICAgIC4uLm9iamVjdCh7XG4gICAgICBzcmM6IHRleHQoe1xuICAgICAgICBsYWJlbDogJ1VSTCcsXG4gICAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgICAgICBsZW5ndGg6IHtcbiAgICAgICAgICAgIG1pbjogdmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkID8gMSA6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgYWx0OiB0ZXh0KHtcbiAgICAgICAgbGFiZWw6ICdBbHQgdGV4dCdcbiAgICAgIH0pLFxuICAgICAgaGVpZ2h0OiBpbnRlZ2VyKHtcbiAgICAgICAgbGFiZWw6ICdIZWlnaHQnXG4gICAgICB9KSxcbiAgICAgIHdpZHRoOiBpbnRlZ2VyKHtcbiAgICAgICAgbGFiZWw6ICdXaWR0aCdcbiAgICAgIH0pXG4gICAgfSwge1xuICAgICAgbGFiZWwsXG4gICAgICBkZXNjcmlwdGlvblxuICAgIH0pLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChDbG91ZEltYWdlRmllbGRJbnB1dCwge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgaXNSZXF1aXJlZDogdmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gY29uZGl0aW9uYWwoZGlzY3JpbWluYW50LCB2YWx1ZXMpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnY29uZGl0aW9uYWwnLFxuICAgIGRpc2NyaW1pbmFudCxcbiAgICB2YWx1ZXM6IHZhbHVlc1xuICB9O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGUodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKSB7XG4gIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiAhL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyBub3QgYSB2YWxpZCBkYXRlYDtcbiAgfVxuICBpZiAodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5pc1JlcXVpcmVkICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyByZXF1aXJlZGA7XG4gIH1cbiAgaWYgKCh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLm1pbiB8fCB2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLm1heCkgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1pbikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbWluID0gbmV3IERhdGUodmFsaWRhdGlvbi5taW4pO1xuICAgICAgaWYgKGRhdGUgPCBtaW4pIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGFmdGVyICR7bWluLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLm1heCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbWF4ID0gbmV3IERhdGUodmFsaWRhdGlvbi5tYXgpO1xuICAgICAgaWYgKGRhdGUgPiBtYXgpIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIG5vIGxhdGVyIHRoYW4gJHttYXgudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0ZSh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERhdGVGaWVsZElucHV0LCB7XG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICBjb25zdCBkYXkgPSBTdHJpbmcodG9kYXkuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIGNvbnN0IHllYXIgPSB2YWx1ZS5nZXRVVENGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCBtb250aCA9IFN0cmluZyh2YWx1ZS5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgZGF5ID0gU3RyaW5nKHZhbHVlLmdldFVUQ0RhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgIGRhdGUudG9JU09TdHJpbmcgPSAoKSA9PiB2YWx1ZTtcbiAgICAgIGRhdGUudG9TdHJpbmcgPSAoKSA9PiB2YWx1ZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBkYXRlXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZURhdGUodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGV0aW1lKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCkge1xuICBpZiAodmFsdWUgIT09IG51bGwgJiYgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn1UXFxkezJ9OlxcZHsyfSQvLnRlc3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGAke2xhYmVsfSBpcyBub3QgYSB2YWxpZCBkYXRldGltZWA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG4gIGlmICgodmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5taW4gfHwgdmFsaWRhdGlvbiAhPT0gbnVsbCAmJiB2YWxpZGF0aW9uICE9PSB2b2lkIDAgJiYgdmFsaWRhdGlvbi5tYXgpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZGF0ZXRpbWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWluKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1pbik7XG4gICAgICBpZiAoZGF0ZXRpbWUgPCBtaW4pIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGFmdGVyICR7bWluLnRvSVNPU3RyaW5nKCl9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtYXggPSBuZXcgRGF0ZSh2YWxpZGF0aW9uLm1heCk7XG4gICAgICBpZiAoZGF0ZXRpbWUgPiBtYXgpIHtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIG5vIGxhdGVyIHRoYW4gJHttYXgudG9JU09TdHJpbmcoKX1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXRldGltZSh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KERhdGV0aW1lRmllbGRJbnB1dCwge1xuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdFZhbHVlLmtpbmQgPT09ICdub3cnKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gbm93LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgLTgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIC04KTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZyBvciBkYXRlJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSArICdaJyk7XG4gICAgICBkYXRlLnRvSlNPTiA9ICgpID0+IGRhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtOCk7XG4gICAgICBkYXRlLnRvU3RyaW5nID0gKCkgPT4gZGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIC04KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBkYXRlXG4gICAgICB9O1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZURhdGV0aW1lKHZhbGlkYXRpb24sIHZhbHVlLCBsYWJlbCk7XG4gICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFJlcXVpcmVkKHZhbHVlLCB2YWxpZGF0aW9uLCBsYWJlbCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgbGFiZWw6ICdFbXB0eSdcbiAgfSk7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgYGVtcHR5RG9jdW1lbnRgIGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggdGhlIGBlbXB0eUNvbnRlbnRgIGZpZWxkXG4gKi9cbmZ1bmN0aW9uIGVtcHR5RG9jdW1lbnQoKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246ICcubWRvYycsXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgY29udGVudDogbmV3IFVpbnQ4QXJyYXkoKSxcbiAgICAgICAgZXh0ZXJuYWw6IG5ldyBNYXAoKSxcbiAgICAgICAgb3RoZXI6IG5ldyBNYXAoKVxuICAgICAgfTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICByZWFkZXI6IHtcbiAgICAgIHBhcnNlKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVtcHR5Q29udGVudChvcHRzKSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnY29udGVudCcsXG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGNvbnRlbnRFeHRlbnNpb246IGAuJHtvcHRzLmV4dGVuc2lvbn1gLFxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIGNvbnRlbnQ6IG5ldyBVaW50OEFycmF5KCksXG4gICAgICAgIGV4dGVybmFsOiBuZXcgTWFwKCksXG4gICAgICAgIG90aGVyOiBuZXcgTWFwKClcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBmaWxlKHtcbiAgbGFiZWwsXG4gIGRpcmVjdG9yeSxcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb24sXG4gIHB1YmxpY1BhdGgsXG4gIHRyYW5zZm9ybUZpbGVuYW1lXG59KSB7XG4gIHJldHVybiB7XG4gICAga2luZDogJ2Zvcm0nLFxuICAgIGZvcm1LaW5kOiAnYXNzZXQnLFxuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChGaWxlRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgdHJhbnNmb3JtRmlsZW5hbWU6IHRyYW5zZm9ybUZpbGVuYW1lLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGZpbGVuYW1lKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoZ2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1ZykubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSwgYXJncykge1xuICAgICAgdmFyIF92YWx1ZSRtYXRjaCQsIF92YWx1ZSRtYXRjaDtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXJncy5hc3NldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogYXJncy5hc3NldCxcbiAgICAgICAgZmlsZW5hbWU6IHZhbHVlLnNsaWNlKGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpLmxlbmd0aCksXG4gICAgICAgIGV4dGVuc2lvbjogKF92YWx1ZSRtYXRjaCQgPSAoX3ZhbHVlJG1hdGNoID0gdmFsdWUubWF0Y2goL1xcLihbXi5dKyQpLykpID09PSBudWxsIHx8IF92YWx1ZSRtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlJG1hdGNoWzFdKSAhPT0gbnVsbCAmJiBfdmFsdWUkbWF0Y2gkICE9PSB2b2lkIDAgPyBfdmFsdWUkbWF0Y2gkIDogJydcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NldDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGFyZ3Muc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXggPyBhcmdzLnN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ICsgJy4nICsgdmFsdWUuZXh0ZW5zaW9uIDogdmFsdWUuZmlsZW5hbWU7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogYCR7Z2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1Zyl9JHtmaWxlbmFtZX1gLFxuICAgICAgICBhc3NldDoge1xuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGNvbnRlbnQ6IHZhbHVlLmRhdGFcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIGRpcmVjdG9yeTogZGlyZWN0b3J5ID8gZml4UGF0aChkaXJlY3RvcnkpIDogdW5kZWZpbmVkLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbCA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XG4gICAgICAgIGFzc2VydFJlcXVpcmVkKHZhbCwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW1hZ2Uoe1xuICBsYWJlbCxcbiAgZGlyZWN0b3J5LFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvbixcbiAgcHVibGljUGF0aCxcbiAgdHJhbnNmb3JtRmlsZW5hbWVcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgZm9ybUtpbmQ6ICdhc3NldCcsXG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KEltYWdlRmllbGRJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgdHJhbnNmb3JtRmlsZW5hbWU6IHRyYW5zZm9ybUZpbGVuYW1lLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGZpbGVuYW1lKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoZ2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1ZykubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSwgYXJncykge1xuICAgICAgdmFyIF92YWx1ZSRtYXRjaCQsIF92YWx1ZSRtYXRjaDtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXJncy5hc3NldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogYXJncy5hc3NldCxcbiAgICAgICAgZmlsZW5hbWU6IHZhbHVlLnNsaWNlKGdldFNyY1ByZWZpeChwdWJsaWNQYXRoLCBhcmdzLnNsdWcpLmxlbmd0aCksXG4gICAgICAgIGV4dGVuc2lvbjogKF92YWx1ZSRtYXRjaCQgPSAoX3ZhbHVlJG1hdGNoID0gdmFsdWUubWF0Y2goL1xcLihbXi5dKyQpLykpID09PSBudWxsIHx8IF92YWx1ZSRtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlJG1hdGNoWzFdKSAhPT0gbnVsbCAmJiBfdmFsdWUkbWF0Y2gkICE9PSB2b2lkIDAgPyBfdmFsdWUkbWF0Y2gkIDogJydcbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwgYXJncykge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NldDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGFyZ3Muc3VnZ2VzdGVkRmlsZW5hbWVQcmVmaXggPyBhcmdzLnN1Z2dlc3RlZEZpbGVuYW1lUHJlZml4ICsgJy4nICsgdmFsdWUuZXh0ZW5zaW9uIDogdmFsdWUuZmlsZW5hbWU7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogYCR7Z2V0U3JjUHJlZml4KHB1YmxpY1BhdGgsIGFyZ3Muc2x1Zyl9JHtmaWxlbmFtZX1gLFxuICAgICAgICBhc3NldDoge1xuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGNvbnRlbnQ6IHZhbHVlLmRhdGFcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIGRpcmVjdG9yeTogZGlyZWN0b3J5ID8gZml4UGF0aChkaXJlY3RvcnkpIDogdW5kZWZpbmVkLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbCA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XG4gICAgICAgIGFzc2VydFJlcXVpcmVkKHZhbCwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGx1cmFsaXplKGNvdW50LCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBzaW5ndWxhcixcbiAgICBwbHVyYWwgPSBzaW5ndWxhciArICdzJyxcbiAgICBpbmNsdXNpdmUgPSB0cnVlXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCB2YXJpYW50ID0gY291bnQgPT09IDEgPyBzaW5ndWxhciA6IHBsdXJhbDtcbiAgcmV0dXJuIGluY2x1c2l2ZSA/IGAke2NvdW50fSAke3ZhcmlhbnR9YCA6IHZhcmlhbnQ7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlTXVsdGlSZWxhdGlvbnNoaXBMZW5ndGgodmFsaWRhdGlvbiwgdmFsdWUpIHtcbiAgdmFyIF92YWxpZGF0aW9uJGxlbmd0aCRtaSwgX3ZhbGlkYXRpb24kbGVuZ3RoLCBfdmFsaWRhdGlvbiRsZW5ndGgkbWEsIF92YWxpZGF0aW9uJGxlbmd0aDI7XG4gIGNvbnN0IG1pbkxlbmd0aCA9IChfdmFsaWRhdGlvbiRsZW5ndGgkbWkgPSB2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCB8fCAoX3ZhbGlkYXRpb24kbGVuZ3RoID0gdmFsaWRhdGlvbi5sZW5ndGgpID09PSBudWxsIHx8IF92YWxpZGF0aW9uJGxlbmd0aCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbGlkYXRpb24kbGVuZ3RoLm1pbikgIT09IG51bGwgJiYgX3ZhbGlkYXRpb24kbGVuZ3RoJG1pICE9PSB2b2lkIDAgPyBfdmFsaWRhdGlvbiRsZW5ndGgkbWkgOiAwO1xuICBpZiAodmFsdWUubGVuZ3RoIDwgbWluTGVuZ3RoKSB7XG4gICAgcmV0dXJuIGBNdXN0IGhhdmUgYXQgbGVhc3QgJHtwbHVyYWxpemUobWluTGVuZ3RoLCB7XG4gICAgICBzaW5ndWxhcjogJ2l0ZW0nXG4gICAgfSl9LmA7XG4gIH1cbiAgY29uc3QgbWF4TGVuZ3RoID0gKF92YWxpZGF0aW9uJGxlbmd0aCRtYSA9IHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwIHx8IChfdmFsaWRhdGlvbiRsZW5ndGgyID0gdmFsaWRhdGlvbi5sZW5ndGgpID09PSBudWxsIHx8IF92YWxpZGF0aW9uJGxlbmd0aDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWxpZGF0aW9uJGxlbmd0aDIubWF4KSAhPT0gbnVsbCAmJiBfdmFsaWRhdGlvbiRsZW5ndGgkbWEgIT09IHZvaWQgMCA/IF92YWxpZGF0aW9uJGxlbmd0aCRtYSA6IEluZmluaXR5O1xuICBpZiAodmFsdWUubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgcmV0dXJuIGBNdXN0IGhhdmUgYXQgbW9zdCAke3BsdXJhbGl6ZShtYXhMZW5ndGgsIHtcbiAgICAgIHNpbmd1bGFyOiAnaXRlbSdcbiAgICB9KX0uYDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtdWx0aVJlbGF0aW9uc2hpcCh7XG4gIGxhYmVsLFxuICBjb2xsZWN0aW9uLFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChNdWx0aVJlbGF0aW9uc2hpcElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbixcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSB8fCAhdmFsdWUuZXZlcnkoaXNTdHJpbmcpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgY29uc3QgZXJyb3IgPSB2YWxpZGF0ZU11bHRpUmVsYXRpb25zaGlwTGVuZ3RoKHZhbGlkYXRpb24sIHZhbHVlKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtdWx0aXNlbGVjdCh7XG4gIGxhYmVsLFxuICBvcHRpb25zLFxuICBkZWZhdWx0VmFsdWUgPSBbXSxcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgY29uc3QgdmFsdWVzVG9PcHRpb24gPSBuZXcgTWFwKG9wdGlvbnMubWFwKHggPT4gW3gudmFsdWUsIHhdKSk7XG4gIGNvbnN0IGZpZWxkID0gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChNdWx0aXNlbGVjdEZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYW4gYXJyYXkgb2Ygb3B0aW9ucycpO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZS5ldmVyeSh4ID0+IHR5cGVvZiB4ID09PSAnc3RyaW5nJyAmJiB2YWx1ZXNUb09wdGlvbi5oYXMoeCkpKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihgTXVzdCBiZSBhbiBhcnJheSB3aXRoIG9uZSBvZiAke29wdGlvbnMubWFwKHggPT4geC52YWx1ZSkuam9pbignLCAnKX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgLi4uZmllbGQsXG4gICAgb3B0aW9uc1xuICB9O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU51bWJlcih2YWxpZGF0aW9uLCB2YWx1ZSwgc3RlcCwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYSBudW1iZXJgO1xuICB9XG4gIGlmICh2YWxpZGF0aW9uICE9PSBudWxsICYmIHZhbGlkYXRpb24gIT09IHZvaWQgMCAmJiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIHJlcXVpcmVkYDtcbiAgfVxuICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICBpZiAoKHZhbGlkYXRpb24gPT09IG51bGwgfHwgdmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsaWRhdGlvbi5taW4pICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPCB2YWxpZGF0aW9uLm1pbikge1xuICAgICAgcmV0dXJuIGAke2xhYmVsfSBtdXN0IGJlIGF0IGxlYXN0ICR7dmFsaWRhdGlvbi5taW59YDtcbiAgICB9XG4gICAgaWYgKCh2YWxpZGF0aW9uID09PSBudWxsIHx8IHZhbGlkYXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbGlkYXRpb24ubWF4KSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlID4gdmFsaWRhdGlvbi5tYXgpIHtcbiAgICAgIHJldHVybiBgJHtsYWJlbH0gbXVzdCBiZSBhdCBtb3N0ICR7dmFsaWRhdGlvbi5tYXh9YDtcbiAgICB9XG4gICAgaWYgKHN0ZXAgIT09IHVuZGVmaW5lZCAmJiAodmFsaWRhdGlvbiA9PT0gbnVsbCB8fCB2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWxpZGF0aW9uLnZhbGlkYXRlU3RlcCkgIT09IHVuZGVmaW5lZCAmJiAhaXNBdFN0ZXAodmFsdWUsIHN0ZXApKSB7XG4gICAgICByZXR1cm4gYCR7bGFiZWx9IG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke3N0ZXB9YDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGRlY2ltYWxQbGFjZXModmFsdWUpIHtcbiAgY29uc3Qgc3RyaW5naWZpZWQgPSB2YWx1ZS50b1N0cmluZygpO1xuICBjb25zdCBpbmRleE9mRGVjaW1hbCA9IHN0cmluZ2lmaWVkLmluZGV4T2YoJy4nKTtcbiAgaWYgKGluZGV4T2ZEZWNpbWFsID09PSAtMSkge1xuICAgIGNvbnN0IGluZGV4T2ZFID0gc3RyaW5naWZpZWQuaW5kZXhPZignZS0nKTtcbiAgICByZXR1cm4gaW5kZXhPZkUgPT09IC0xID8gMCA6IHBhcnNlSW50KHN0cmluZ2lmaWVkLnNsaWNlKGluZGV4T2ZFICsgMikpO1xuICB9XG4gIHJldHVybiBzdHJpbmdpZmllZC5sZW5ndGggLSBpbmRleE9mRGVjaW1hbCAtIDE7XG59XG5mdW5jdGlvbiBpc0F0U3RlcCh2YWx1ZSwgc3RlcCkge1xuICBjb25zdCBkYyA9IE1hdGgubWF4KGRlY2ltYWxQbGFjZXMoc3RlcCksIGRlY2ltYWxQbGFjZXModmFsdWUpKTtcbiAgY29uc3QgYmFzZSA9IE1hdGgucG93KDEwLCBkYyk7XG4gIHJldHVybiB2YWx1ZSAqIGJhc2UgJSAoc3RlcCAqIGJhc2UpID09PSAwO1xufVxuXG5mdW5jdGlvbiBudW1iZXIoe1xuICBsYWJlbCxcbiAgZGVmYXVsdFZhbHVlLFxuICBzdGVwLFxuICB2YWxpZGF0aW9uLFxuICBkZXNjcmlwdGlvblxufSkge1xuICByZXR1cm4gYmFzaWNGb3JtRmllbGRXaXRoU2ltcGxlUmVhZGVyUGFyc2Uoe1xuICAgIGxhYmVsLFxuICAgIElucHV0KHByb3BzKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL2pzeChOdW1iZXJGaWVsZElucHV0LCB7XG4gICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uOiB2YWxpZGF0aW9uLFxuICAgICAgICBzdGVwOiBzdGVwLFxuICAgICAgICAuLi5wcm9wc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWZhdWx0VmFsdWUoKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlICE9PSBudWxsICYmIGRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwID8gZGVmYXVsdFZhbHVlIDogbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIG51bWJlcicpO1xuICAgIH0sXG4gICAgdmFsaWRhdGUodmFsdWUpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWxpZGF0ZU51bWJlcih2YWxpZGF0aW9uLCB2YWx1ZSwgc3RlcCwgbGFiZWwpO1xuICAgICAgaWYgKG1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwYXRoUmVmZXJlbmNlKHtcbiAgbGFiZWwsXG4gIHBhdHRlcm4sXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFBhdGhSZWZlcmVuY2VJbnB1dCwge1xuICAgICAgICBsYWJlbDogbGFiZWwsXG4gICAgICAgIHBhdHRlcm46IHBhdHRlcm4sXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgdmFsaWRhdGlvbjogdmFsaWRhdGlvbixcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlKCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRmllbGREYXRhRXJyb3IoJ011c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBhc3NlcnRSZXF1aXJlZCh2YWx1ZSwgdmFsaWRhdGlvbiwgbGFiZWwpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyB1bmRlZmluZWQgOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWxhdGlvbnNoaXAoe1xuICBsYWJlbCxcbiAgY29sbGVjdGlvbixcbiAgdmFsaWRhdGlvbixcbiAgZGVzY3JpcHRpb25cbn0pIHtcbiAgcmV0dXJuIGJhc2ljRm9ybUZpZWxkV2l0aFNpbXBsZVJlYWRlclBhcnNlKHtcbiAgICBsYWJlbCxcbiAgICBJbnB1dChwcm9wcykge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9qc3goUmVsYXRpb25zaGlwSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgcGFyc2UodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSh2YWx1ZSkge1xuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTbHVnRmllbGRBc05vcm1hbEZpZWxkKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgc2x1ZzogJydcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG4gIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoICE9PSAyKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdVbmV4cGVjdGVkIGtleXMnKTtcbiAgfVxuICBpZiAoISgnbmFtZScgaW4gdmFsdWUpIHx8ICEoJ3NsdWcnIGluIHZhbHVlKSkge1xuICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTWlzc2luZyBuYW1lIG9yIHNsdWcnKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlLm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCduYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlLnNsdWcgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdzbHVnIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG5hbWU6IHZhbHVlLm5hbWUsXG4gICAgc2x1ZzogdmFsdWUuc2x1Z1xuICB9O1xufVxuZnVuY3Rpb24gcGFyc2VBc1NsdWdGaWVsZCh2YWx1ZSwgc2x1Zykge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIHNsdWdcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKCdNdXN0IGJlIGEgc3RyaW5nJyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiB2YWx1ZSxcbiAgICBzbHVnXG4gIH07XG59XG5mdW5jdGlvbiBzbHVnKF9hcmdzKSB7XG4gIHZhciBfYXJncyRuYW1lJHZhbGlkYXRpb24sIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjUsIF9hcmdzJHNsdWc7XG4gIGNvbnN0IGFyZ3MgPSB7XG4gICAgLi4uX2FyZ3MsXG4gICAgbmFtZToge1xuICAgICAgLi4uX2FyZ3MubmFtZSxcbiAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgICAgcGF0dGVybjogKF9hcmdzJG5hbWUkdmFsaWRhdGlvbiA9IF9hcmdzLm5hbWUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRuYW1lJHZhbGlkYXRpb24ucGF0dGVybixcbiAgICAgICAgbGVuZ3RoOiB7XG4gICAgICAgICAgbWluOiBNYXRoLm1heCgoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiA9IF9hcmdzLm5hbWUudmFsaWRhdGlvbikgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMiAhPT0gdm9pZCAwICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjIuaXNSZXF1aXJlZCA/IDEgOiAwLCAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMyA9IChfYXJncyRuYW1lJHZhbGlkYXRpb240ID0gX2FyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb240ID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjQgPSBfYXJncyRuYW1lJHZhbGlkYXRpb240Lmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNC5taW4pICE9PSBudWxsICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMgIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjMgOiAwKSxcbiAgICAgICAgICBtYXg6IChfYXJncyRuYW1lJHZhbGlkYXRpb241ID0gX2FyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb241ID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjUgPSBfYXJncyRuYW1lJHZhbGlkYXRpb241Lmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNS5tYXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbmFpdmVHZW5lcmF0ZVNsdWcgPSAoKF9hcmdzJHNsdWcgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJHNsdWcuZ2VuZXJhdGUpIHx8IHNsdWdpZnk7XG4gIGxldCBfZGVmYXVsdFZhbHVlO1xuICBmdW5jdGlvbiBkZWZhdWx0VmFsdWUoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgX2FyZ3MkbmFtZSRkZWZhdWx0VmFsLCBfYXJncyRuYW1lJGRlZmF1bHRWYWwyO1xuICAgICAgX2RlZmF1bHRWYWx1ZSA9IHtcbiAgICAgICAgbmFtZTogKF9hcmdzJG5hbWUkZGVmYXVsdFZhbCA9IGFyZ3MubmFtZS5kZWZhdWx0VmFsdWUpICE9PSBudWxsICYmIF9hcmdzJG5hbWUkZGVmYXVsdFZhbCAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSRkZWZhdWx0VmFsIDogJycsXG4gICAgICAgIHNsdWc6IG5haXZlR2VuZXJhdGVTbHVnKChfYXJncyRuYW1lJGRlZmF1bHRWYWwyID0gYXJncy5uYW1lLmRlZmF1bHRWYWx1ZSkgIT09IG51bGwgJiYgX2FyZ3MkbmFtZSRkZWZhdWx0VmFsMiAhPT0gdm9pZCAwID8gX2FyZ3MkbmFtZSRkZWZhdWx0VmFsMiA6ICcnKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0VmFsdWU7XG4gIH1cbiAgZnVuY3Rpb24gdmFsaWRhdGUodmFsdWUsIHtcbiAgICBzbHVnRmllbGRcbiAgfSA9IHtcbiAgICBzbHVnRmllbGQ6IHVuZGVmaW5lZFxuICB9KSB7XG4gICAgdmFyIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjYsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjcsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjgsIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjksIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjEwLCBfYXJncyRzbHVnJHZhbGlkYXRpb24sIF9hcmdzJHNsdWcyLCBfYXJncyRzbHVnJHZhbGlkYXRpb24yLCBfYXJncyRzbHVnMywgX2FyZ3Mkc2x1ZyRsYWJlbCwgX2FyZ3Mkc2x1ZzQsIF9hcmdzJHNsdWc1O1xuICAgIGNvbnN0IG5hbWVNZXNzYWdlID0gdmFsaWRhdGVUZXh0KHZhbHVlLm5hbWUsIChfYXJncyRuYW1lJHZhbGlkYXRpb242ID0gKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjcgPSBhcmdzLm5hbWUudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNyA9PT0gdm9pZCAwIHx8IChfYXJncyRuYW1lJHZhbGlkYXRpb243ID0gX2FyZ3MkbmFtZSR2YWxpZGF0aW9uNy5sZW5ndGgpID09PSBudWxsIHx8IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjcubWluKSAhPT0gbnVsbCAmJiBfYXJncyRuYW1lJHZhbGlkYXRpb242ICE9PSB2b2lkIDAgPyBfYXJncyRuYW1lJHZhbGlkYXRpb242IDogMCwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjggPSAoX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOSA9IGFyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb245ID09PSB2b2lkIDAgfHwgKF9hcmdzJG5hbWUkdmFsaWRhdGlvbjkgPSBfYXJncyRuYW1lJHZhbGlkYXRpb245Lmxlbmd0aCkgPT09IG51bGwgfHwgX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uOS5tYXgpICE9PSBudWxsICYmIF9hcmdzJG5hbWUkdmFsaWRhdGlvbjggIT09IHZvaWQgMCA/IF9hcmdzJG5hbWUkdmFsaWRhdGlvbjggOiBJbmZpbml0eSwgYXJncy5uYW1lLmxhYmVsLCB1bmRlZmluZWQsIChfYXJncyRuYW1lJHZhbGlkYXRpb24xMCA9IGFyZ3MubmFtZS52YWxpZGF0aW9uKSA9PT0gbnVsbCB8fCBfYXJncyRuYW1lJHZhbGlkYXRpb24xMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FyZ3MkbmFtZSR2YWxpZGF0aW9uMTAucGF0dGVybik7XG4gICAgaWYgKG5hbWVNZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcihuYW1lTWVzc2FnZSk7XG4gICAgfVxuICAgIGNvbnN0IHNsdWdNZXNzYWdlID0gdmFsaWRhdGVUZXh0KHZhbHVlLnNsdWcsIChfYXJncyRzbHVnJHZhbGlkYXRpb24gPSAoX2FyZ3Mkc2x1ZzIgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWcyID09PSB2b2lkIDAgfHwgKF9hcmdzJHNsdWcyID0gX2FyZ3Mkc2x1ZzIudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzIgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzIgPSBfYXJncyRzbHVnMi5sZW5ndGgpID09PSBudWxsIHx8IF9hcmdzJHNsdWcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnMi5taW4pICE9PSBudWxsICYmIF9hcmdzJHNsdWckdmFsaWRhdGlvbiAhPT0gdm9pZCAwID8gX2FyZ3Mkc2x1ZyR2YWxpZGF0aW9uIDogMSwgKF9hcmdzJHNsdWckdmFsaWRhdGlvbjIgPSAoX2FyZ3Mkc2x1ZzMgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWczID09PSB2b2lkIDAgfHwgKF9hcmdzJHNsdWczID0gX2FyZ3Mkc2x1ZzMudmFsaWRhdGlvbikgPT09IG51bGwgfHwgX2FyZ3Mkc2x1ZzMgPT09IHZvaWQgMCB8fCAoX2FyZ3Mkc2x1ZzMgPSBfYXJncyRzbHVnMy5sZW5ndGgpID09PSBudWxsIHx8IF9hcmdzJHNsdWczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnMy5tYXgpICE9PSBudWxsICYmIF9hcmdzJHNsdWckdmFsaWRhdGlvbjIgIT09IHZvaWQgMCA/IF9hcmdzJHNsdWckdmFsaWRhdGlvbjIgOiBJbmZpbml0eSwgKF9hcmdzJHNsdWckbGFiZWwgPSAoX2FyZ3Mkc2x1ZzQgPSBhcmdzLnNsdWcpID09PSBudWxsIHx8IF9hcmdzJHNsdWc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnNC5sYWJlbCkgIT09IG51bGwgJiYgX2FyZ3Mkc2x1ZyRsYWJlbCAhPT0gdm9pZCAwID8gX2FyZ3Mkc2x1ZyRsYWJlbCA6ICdTbHVnJywgc2x1Z0ZpZWxkID8gc2x1Z0ZpZWxkIDoge1xuICAgICAgc2x1Z3M6IGVtcHR5U2V0LFxuICAgICAgZ2xvYjogJyonXG4gICAgfSwgKF9hcmdzJHNsdWc1ID0gYXJncy5zbHVnKSA9PT0gbnVsbCB8fCBfYXJncyRzbHVnNSA9PT0gdm9pZCAwIHx8IChfYXJncyRzbHVnNSA9IF9hcmdzJHNsdWc1LnZhbGlkYXRpb24pID09PSBudWxsIHx8IF9hcmdzJHNsdWc1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXJncyRzbHVnNS5wYXR0ZXJuKTtcbiAgICBpZiAoc2x1Z01lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKHNsdWdNZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGNvbnN0IGVtcHR5U2V0ID0gbmV3IFNldCgpO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6ICdmb3JtJyxcbiAgICBmb3JtS2luZDogJ3NsdWcnLFxuICAgIGxhYmVsOiBhcmdzLm5hbWUubGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFNsdWdGaWVsZElucHV0LCB7XG4gICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgIG5haXZlR2VuZXJhdGVTbHVnOiBuYWl2ZUdlbmVyYXRlU2x1ZyxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWUoKSxcbiAgICAgICAgLi4ucHJvcHNcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVmYXVsdFZhbHVlLFxuICAgIHBhcnNlKHZhbHVlLCBhcmdzKSB7XG4gICAgICBpZiAoKGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXJncy5zbHVnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUFzU2x1Z0ZpZWxkKHZhbHVlLCBhcmdzLnNsdWcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcnNlU2x1Z0ZpZWxkQXNOb3JtYWxGaWVsZCh2YWx1ZSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgIH0sXG4gICAgc2VyaWFsaXplV2l0aFNsdWcodmFsdWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZS5uYW1lLFxuICAgICAgICBzbHVnOiB2YWx1ZS5zbHVnXG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVhZGVyOiB7XG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVNsdWdGaWVsZEFzTm9ybWFsRmllbGQodmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUocGFyc2VkKTtcbiAgICAgIH0sXG4gICAgICBwYXJzZVdpdGhTbHVnKHZhbHVlLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShwYXJzZUFzU2x1Z0ZpZWxkKHZhbHVlLCBhcmdzLnNsdWcpLCB7XG4gICAgICAgICAgc2x1Z0ZpZWxkOiB7XG4gICAgICAgICAgICBnbG9iOiBhcmdzLmdsb2IsXG4gICAgICAgICAgICBzbHVnczogZW1wdHlTZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0pLm5hbWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkVVJMKHVybCkge1xuICByZXR1cm4gdXJsID09PSBzYW5pdGl6ZVVybCh1cmwpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVVybCh2YWxpZGF0aW9uLCB2YWx1ZSwgbGFiZWwpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnIHx8ICFpc1ZhbGlkVVJMKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gYCR7bGFiZWx9IGlzIG5vdCBhIHZhbGlkIFVSTGA7XG4gIH1cbiAgaWYgKHZhbGlkYXRpb24gIT09IG51bGwgJiYgdmFsaWRhdGlvbiAhPT0gdm9pZCAwICYmIHZhbGlkYXRpb24uaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBgJHtsYWJlbH0gaXMgcmVxdWlyZWRgO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVybCh7XG4gIGxhYmVsLFxuICBkZWZhdWx0VmFsdWUsXG4gIHZhbGlkYXRpb24sXG4gIGRlc2NyaXB0aW9uXG59KSB7XG4gIHJldHVybiBiYXNpY0Zvcm1GaWVsZFdpdGhTaW1wbGVSZWFkZXJQYXJzZSh7XG4gICAgbGFiZWwsXG4gICAgSW5wdXQocHJvcHMpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovanN4KFVybEZpZWxkSW5wdXQsIHtcbiAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRpb24sXG4gICAgICAgIC4uLnByb3BzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICB9LFxuICAgIHBhcnNlKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBGaWVsZERhdGFFcnJvcignTXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IG51bGwgOiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdGVVcmwodmFsaWRhdGlvbiwgdmFsdWUsIGxhYmVsKTtcbiAgICAgIGlmIChtZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpZWxkRGF0YUVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgYXNzZXJ0UmVxdWlyZWQodmFsdWUsIHZhbGlkYXRpb24sIGxhYmVsKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHZhbHVlID09PSBudWxsID8gdW5kZWZpbmVkIDogdmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaWdub3JlZCgpIHtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnZm9ybScsXG4gICAgSW5wdXQoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlZmF1bHRWYWx1ZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWVcbiAgICAgIH07XG4gICAgfSxcbiAgICBzZXJpYWxpemUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHZhbGlkYXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBsYWJlbDogJ0lnbm9yZWQnLFxuICAgIHJlYWRlcjoge1xuICAgICAgcGFyc2UodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGluZGV4ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGFycmF5OiBhcnJheSxcbiAgYmxvY2tzOiBibG9ja3MsXG4gIGNoZWNrYm94OiBjaGVja2JveCxcbiAgY2hpbGQ6IGNoaWxkLFxuICBjbG91ZEltYWdlOiBjbG91ZEltYWdlLFxuICBjb25kaXRpb25hbDogY29uZGl0aW9uYWwsXG4gIGRhdGU6IGRhdGUsXG4gIGRhdGV0aW1lOiBkYXRldGltZSxcbiAgZG9jdW1lbnQ6IGRvY3VtZW50LFxuICBlbXB0eTogZW1wdHksXG4gIGVtcHR5RG9jdW1lbnQ6IGVtcHR5RG9jdW1lbnQsXG4gIGVtcHR5Q29udGVudDogZW1wdHlDb250ZW50LFxuICBmaWxlOiBmaWxlLFxuICBpbWFnZTogaW1hZ2UsXG4gIGludGVnZXI6IGludGVnZXIsXG4gIG11bHRpUmVsYXRpb25zaGlwOiBtdWx0aVJlbGF0aW9uc2hpcCxcbiAgbXVsdGlzZWxlY3Q6IG11bHRpc2VsZWN0LFxuICBudW1iZXI6IG51bWJlcixcbiAgb2JqZWN0OiBvYmplY3QsXG4gIHBhdGhSZWZlcmVuY2U6IHBhdGhSZWZlcmVuY2UsXG4gIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwLFxuICBzZWxlY3Q6IHNlbGVjdCxcbiAgc2x1Zzogc2x1ZyxcbiAgdGV4dDogdGV4dCxcbiAgdXJsOiB1cmwsXG4gIGlnbm9yZWQ6IGlnbm9yZWQsXG4gIG1keDogbWR4LFxuICBtYXJrZG9jOiBtYXJrZG9jXG59KTtcblxuZnVuY3Rpb24gQmxvY2tXcmFwcGVyKCkge31cbmZ1bmN0aW9uIE5vdEVkaXRhYmxlKCkge31cbmZ1bmN0aW9uIFRvb2xiYXJTZXBhcmF0b3IoKSB7fVxuXG5leHBvcnQgeyBCbG9ja1dyYXBwZXIsIE5vdEVkaXRhYmxlLCBUb29sYmFyU2VwYXJhdG9yLCBjb2xsZWN0aW9uLCBjb25maWcsIGluZGV4IGFzIGZpZWxkcywgc2luZ2xldG9uIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/keystatic-core.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/core/dist/read-local-c89358f4.node.react-server.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@keystatic/core/dist/read-local-c89358f4.node.react-server.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getAllowedDirectories),\n/* harmony export */   r: () => (/* binding */ readToDirEntries)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var _index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-b2de9be1.node.react-server.js */ \"(rsc)/./node_modules/@keystatic/core/dist/index-b2de9be1.node.react-server.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-runtime.js\");\n/* harmony import */ var emery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! emery */ \"(rsc)/./node_modules/emery/dist/emery.esm.js\");\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @braintree/sanitize-url */ \"(rsc)/./node_modules/@braintree/sanitize-url/dist/index.js\");\n/* harmony import */ var ignore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ignore */ \"(rsc)/./node_modules/ignore/index.js\");\n\n\n\n\n\n\n\n\nasync function readDirEntries(dir) {\n  let entries;\n  try {\n    entries = await fs_promises__WEBPACK_IMPORTED_MODULE_0__.readdir(dir, {\n      withFileTypes: true\n    });\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      return [];\n    }\n    throw err;\n  }\n  return entries;\n}\nasync function collectEntriesInDir(baseDir, ancestors) {\n  const currentRelativeDir = ancestors.map(p => p.segment).join('/');\n  const entries = await readDirEntries(path__WEBPACK_IMPORTED_MODULE_1__.join(baseDir, currentRelativeDir));\n  const gitignore = entries.find(entry => entry.isFile() && entry.name === '.gitignore');\n  const gitignoreFilterForDescendents = gitignore ? ignore__WEBPACK_IMPORTED_MODULE_6__().add(await fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile(path__WEBPACK_IMPORTED_MODULE_1__.join(baseDir, currentRelativeDir, gitignore.name), 'utf8')).createFilter() : () => true;\n  const pathSegments = ancestors.map(x => x.segment);\n  return (await Promise.all(entries.filter(entry => {\n    if (!entry.isDirectory() && !entry.isFile() || entry.name === '.git' || entry.name === 'node_modules' || entry.name === '.next') {\n      return false;\n    }\n    const innerPath = `${pathSegments.concat(entry.name).join('/')}${entry.isDirectory() ? '/' : ''}`;\n    if (!gitignoreFilterForDescendents(innerPath)) {\n      return false;\n    }\n    let currentPath = entry.name;\n    for (let i = ancestors.length - 1; i >= 0; i--) {\n      const ancestor = ancestors[i];\n      currentPath = `${ancestor.segment}/${currentPath}`;\n      if (!ancestor.gitignoreFilterForDescendents(currentPath)) {\n        return false;\n      }\n    }\n    return true;\n  }).map(async entry => {\n    if (entry.isDirectory()) {\n      return collectEntriesInDir(baseDir, [...ancestors, {\n        gitignoreFilterForDescendents,\n        segment: entry.name\n      }]);\n    } else {\n      const innerPath = pathSegments.concat(entry.name).join('/');\n      const contents = await fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile(path__WEBPACK_IMPORTED_MODULE_1__.join(baseDir, innerPath));\n      return {\n        path: innerPath,\n        contents: {\n          byteLength: contents.byteLength,\n          sha: await (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.i)(contents)\n        }\n      };\n    }\n  }))).flat();\n}\nasync function readToDirEntries(baseDir) {\n  const additions = await collectEntriesInDir(baseDir, []);\n  const {\n    entries\n  } = await (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.u)(new Map(), {\n    additions: additions,\n    deletions: []\n  });\n  return entries;\n}\nfunction getAllowedDirectories(config) {\n  const allowedDirectories = [];\n  for (const [collection, collectionConfig] of Object.entries((_config$collections = config.collections) !== null && _config$collections !== void 0 ? _config$collections : {})) {\n    var _config$collections;\n    allowedDirectories.push(...(0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.b)((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.o)(collectionConfig.schema), (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.c)(config, collection), undefined, {\n      data: 'yaml',\n      contentField: undefined,\n      dataLocation: 'index'\n    }));\n    if (collectionConfig.template) {\n      allowedDirectories.push(collectionConfig.template);\n    }\n  }\n  for (const [singleton, singletonConfig] of Object.entries((_config$singletons = config.singletons) !== null && _config$singletons !== void 0 ? _config$singletons : {})) {\n    var _config$singletons;\n    allowedDirectories.push(...(0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.b)((0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.o)(singletonConfig.schema), (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.h)(config, singleton), undefined, (0,_index_b2de9be1_node_react_server_js__WEBPACK_IMPORTED_MODULE_2__.e)(config, singleton)));\n  }\n  return [...new Set(allowedDirectories)];\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9jb3JlL2Rpc3QvcmVhZC1sb2NhbC1jODkzNThmNC5ub2RlLnJlYWN0LXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNkI7QUFDTDtBQUM2TDtBQUMxTDtBQUNaO0FBQ2tCO0FBQ0w7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnREFBVTtBQUM5QjtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNDQUFTO0FBQ2hEO0FBQ0Esb0RBQW9ELG1DQUFNLGFBQWEsaURBQVcsQ0FBQyxzQ0FBUztBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBDQUEwQyxFQUFFLCtCQUErQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxRQUFRO0FBQy9DO0FBQ0EsdUJBQXVCLGlCQUFpQixHQUFHLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSw2QkFBNkIsaURBQVcsQ0FBQyxzQ0FBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1RUFBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksUUFBUSx1RUFBcUI7QUFDakM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhLQUE4SztBQUM5SztBQUNBLCtCQUErQix1RUFBd0IsQ0FBQyx1RUFBTSwyQkFBMkIsdUVBQWlCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdLQUF3SztBQUN4SztBQUNBLCtCQUErQix1RUFBd0IsQ0FBQyx1RUFBTSwwQkFBMEIsdUVBQWdCLGdDQUFnQyx1RUFBa0I7QUFDMUo7QUFDQTtBQUNBOztBQUU2RCIsInNvdXJjZXMiOlsid2VicGFjazovL0BrZXlzdGF0aWMvdGVtcGxhdGVzLW5leHRqcy8uL25vZGVfbW9kdWxlcy9Aa2V5c3RhdGljL2NvcmUvZGlzdC9yZWFkLWxvY2FsLWM4OTM1OGY0Lm5vZGUucmVhY3Qtc2VydmVyLmpzPzhjZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgYiBhcyBnZXREaXJlY3Rvcmllc0ZvclRyZWVLZXksIGMgYXMgZ2V0Q29sbGVjdGlvblBhdGgsIG8gYXMgb2JqZWN0LCBlIGFzIGdldFNpbmdsZXRvbkZvcm1hdCwgaCBhcyBnZXRTaW5nbGV0b25QYXRoLCB1IGFzIHVwZGF0ZVRyZWVXaXRoQ2hhbmdlcywgaSBhcyBibG9iU2hhIH0gZnJvbSAnLi9pbmRleC1iMmRlOWJlMS5ub2RlLnJlYWN0LXNlcnZlci5qcyc7XG5pbXBvcnQgJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCAnZW1lcnknO1xuaW1wb3J0ICdAYnJhaW50cmVlL3Nhbml0aXplLXVybCc7XG5pbXBvcnQgaWdub3JlIGZyb20gJ2lnbm9yZSc7XG5cbmFzeW5jIGZ1bmN0aW9uIHJlYWREaXJFbnRyaWVzKGRpcikge1xuICBsZXQgZW50cmllcztcbiAgdHJ5IHtcbiAgICBlbnRyaWVzID0gYXdhaXQgZnMucmVhZGRpcihkaXIsIHtcbiAgICAgIHdpdGhGaWxlVHlwZXM6IHRydWVcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyci5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgcmV0dXJuIGVudHJpZXM7XG59XG5hc3luYyBmdW5jdGlvbiBjb2xsZWN0RW50cmllc0luRGlyKGJhc2VEaXIsIGFuY2VzdG9ycykge1xuICBjb25zdCBjdXJyZW50UmVsYXRpdmVEaXIgPSBhbmNlc3RvcnMubWFwKHAgPT4gcC5zZWdtZW50KS5qb2luKCcvJyk7XG4gIGNvbnN0IGVudHJpZXMgPSBhd2FpdCByZWFkRGlyRW50cmllcyhwYXRoLmpvaW4oYmFzZURpciwgY3VycmVudFJlbGF0aXZlRGlyKSk7XG4gIGNvbnN0IGdpdGlnbm9yZSA9IGVudHJpZXMuZmluZChlbnRyeSA9PiBlbnRyeS5pc0ZpbGUoKSAmJiBlbnRyeS5uYW1lID09PSAnLmdpdGlnbm9yZScpO1xuICBjb25zdCBnaXRpZ25vcmVGaWx0ZXJGb3JEZXNjZW5kZW50cyA9IGdpdGlnbm9yZSA/IGlnbm9yZSgpLmFkZChhd2FpdCBmcy5yZWFkRmlsZShwYXRoLmpvaW4oYmFzZURpciwgY3VycmVudFJlbGF0aXZlRGlyLCBnaXRpZ25vcmUubmFtZSksICd1dGY4JykpLmNyZWF0ZUZpbHRlcigpIDogKCkgPT4gdHJ1ZTtcbiAgY29uc3QgcGF0aFNlZ21lbnRzID0gYW5jZXN0b3JzLm1hcCh4ID0+IHguc2VnbWVudCk7XG4gIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoZW50cmllcy5maWx0ZXIoZW50cnkgPT4ge1xuICAgIGlmICghZW50cnkuaXNEaXJlY3RvcnkoKSAmJiAhZW50cnkuaXNGaWxlKCkgfHwgZW50cnkubmFtZSA9PT0gJy5naXQnIHx8IGVudHJ5Lm5hbWUgPT09ICdub2RlX21vZHVsZXMnIHx8IGVudHJ5Lm5hbWUgPT09ICcubmV4dCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5uZXJQYXRoID0gYCR7cGF0aFNlZ21lbnRzLmNvbmNhdChlbnRyeS5uYW1lKS5qb2luKCcvJyl9JHtlbnRyeS5pc0RpcmVjdG9yeSgpID8gJy8nIDogJyd9YDtcbiAgICBpZiAoIWdpdGlnbm9yZUZpbHRlckZvckRlc2NlbmRlbnRzKGlubmVyUGF0aCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGN1cnJlbnRQYXRoID0gZW50cnkubmFtZTtcbiAgICBmb3IgKGxldCBpID0gYW5jZXN0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBhbmNlc3RvciA9IGFuY2VzdG9yc1tpXTtcbiAgICAgIGN1cnJlbnRQYXRoID0gYCR7YW5jZXN0b3Iuc2VnbWVudH0vJHtjdXJyZW50UGF0aH1gO1xuICAgICAgaWYgKCFhbmNlc3Rvci5naXRpZ25vcmVGaWx0ZXJGb3JEZXNjZW5kZW50cyhjdXJyZW50UGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkubWFwKGFzeW5jIGVudHJ5ID0+IHtcbiAgICBpZiAoZW50cnkuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIGNvbGxlY3RFbnRyaWVzSW5EaXIoYmFzZURpciwgWy4uLmFuY2VzdG9ycywge1xuICAgICAgICBnaXRpZ25vcmVGaWx0ZXJGb3JEZXNjZW5kZW50cyxcbiAgICAgICAgc2VnbWVudDogZW50cnkubmFtZVxuICAgICAgfV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbm5lclBhdGggPSBwYXRoU2VnbWVudHMuY29uY2F0KGVudHJ5Lm5hbWUpLmpvaW4oJy8nKTtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZnMucmVhZEZpbGUocGF0aC5qb2luKGJhc2VEaXIsIGlubmVyUGF0aCkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogaW5uZXJQYXRoLFxuICAgICAgICBjb250ZW50czoge1xuICAgICAgICAgIGJ5dGVMZW5ndGg6IGNvbnRlbnRzLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgc2hhOiBhd2FpdCBibG9iU2hhKGNvbnRlbnRzKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSkpKS5mbGF0KCk7XG59XG5hc3luYyBmdW5jdGlvbiByZWFkVG9EaXJFbnRyaWVzKGJhc2VEaXIpIHtcbiAgY29uc3QgYWRkaXRpb25zID0gYXdhaXQgY29sbGVjdEVudHJpZXNJbkRpcihiYXNlRGlyLCBbXSk7XG4gIGNvbnN0IHtcbiAgICBlbnRyaWVzXG4gIH0gPSBhd2FpdCB1cGRhdGVUcmVlV2l0aENoYW5nZXMobmV3IE1hcCgpLCB7XG4gICAgYWRkaXRpb25zOiBhZGRpdGlvbnMsXG4gICAgZGVsZXRpb25zOiBbXVxuICB9KTtcbiAgcmV0dXJuIGVudHJpZXM7XG59XG5mdW5jdGlvbiBnZXRBbGxvd2VkRGlyZWN0b3JpZXMoY29uZmlnKSB7XG4gIGNvbnN0IGFsbG93ZWREaXJlY3RvcmllcyA9IFtdO1xuICBmb3IgKGNvbnN0IFtjb2xsZWN0aW9uLCBjb2xsZWN0aW9uQ29uZmlnXSBvZiBPYmplY3QuZW50cmllcygoX2NvbmZpZyRjb2xsZWN0aW9ucyA9IGNvbmZpZy5jb2xsZWN0aW9ucykgIT09IG51bGwgJiYgX2NvbmZpZyRjb2xsZWN0aW9ucyAhPT0gdm9pZCAwID8gX2NvbmZpZyRjb2xsZWN0aW9ucyA6IHt9KSkge1xuICAgIHZhciBfY29uZmlnJGNvbGxlY3Rpb25zO1xuICAgIGFsbG93ZWREaXJlY3Rvcmllcy5wdXNoKC4uLmdldERpcmVjdG9yaWVzRm9yVHJlZUtleShvYmplY3QoY29sbGVjdGlvbkNvbmZpZy5zY2hlbWEpLCBnZXRDb2xsZWN0aW9uUGF0aChjb25maWcsIGNvbGxlY3Rpb24pLCB1bmRlZmluZWQsIHtcbiAgICAgIGRhdGE6ICd5YW1sJyxcbiAgICAgIGNvbnRlbnRGaWVsZDogdW5kZWZpbmVkLFxuICAgICAgZGF0YUxvY2F0aW9uOiAnaW5kZXgnXG4gICAgfSkpO1xuICAgIGlmIChjb2xsZWN0aW9uQ29uZmlnLnRlbXBsYXRlKSB7XG4gICAgICBhbGxvd2VkRGlyZWN0b3JpZXMucHVzaChjb2xsZWN0aW9uQ29uZmlnLnRlbXBsYXRlKTtcbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBbc2luZ2xldG9uLCBzaW5nbGV0b25Db25maWddIG9mIE9iamVjdC5lbnRyaWVzKChfY29uZmlnJHNpbmdsZXRvbnMgPSBjb25maWcuc2luZ2xldG9ucykgIT09IG51bGwgJiYgX2NvbmZpZyRzaW5nbGV0b25zICE9PSB2b2lkIDAgPyBfY29uZmlnJHNpbmdsZXRvbnMgOiB7fSkpIHtcbiAgICB2YXIgX2NvbmZpZyRzaW5nbGV0b25zO1xuICAgIGFsbG93ZWREaXJlY3Rvcmllcy5wdXNoKC4uLmdldERpcmVjdG9yaWVzRm9yVHJlZUtleShvYmplY3Qoc2luZ2xldG9uQ29uZmlnLnNjaGVtYSksIGdldFNpbmdsZXRvblBhdGgoY29uZmlnLCBzaW5nbGV0b24pLCB1bmRlZmluZWQsIGdldFNpbmdsZXRvbkZvcm1hdChjb25maWcsIHNpbmdsZXRvbikpKTtcbiAgfVxuICByZXR1cm4gWy4uLm5ldyBTZXQoYWxsb3dlZERpcmVjdG9yaWVzKV07XG59XG5cbmV4cG9ydCB7IGdldEFsbG93ZWREaXJlY3RvcmllcyBhcyBnLCByZWFkVG9EaXJFbnRyaWVzIGFzIHIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/core/dist/read-local-c89358f4.node.react-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@keystatic/next/dist/keystatic-next-route-handler.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@keystatic/next/dist/keystatic-next-route-handler.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeRouteHandler: () => (/* binding */ makeRouteHandler)\n/* harmony export */ });\n/* harmony import */ var _keystatic_core_api_generic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @keystatic/core/api/generic */ \"(rsc)/./node_modules/@keystatic/core/dist/keystatic-core-api-generic.node.react-server.js\");\n\n\nfunction makeRouteHandler(_config) {\n  const handler = (0,_keystatic_core_api_generic__WEBPACK_IMPORTED_MODULE_0__.makeGenericAPIRouteHandler)(_config, {\n    slugEnvName: 'NEXT_PUBLIC_KEYSTATIC_GITHUB_APP_SLUG'\n  });\n  async function wrappedHandler(request) {\n    const url = new URL(request.url);\n    // next replaces 127.0.0.1 with localhost in the url or something like that\n    if (url.hostname === 'localhost') {\n      url.hostname = '127.0.0.1';\n      request = new Request(url.toString(), request);\n    }\n    const {\n      body,\n      headers,\n      status\n    } = await handler(request);\n    return new Response(body, {\n      status,\n      headers\n    });\n  }\n  return {\n    GET: wrappedHandler,\n    POST: wrappedHandler\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9uZXh0L2Rpc3Qva2V5c3RhdGljLW5leHQtcm91dGUtaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5RTs7QUFFekU7QUFDQSxrQkFBa0IsdUZBQTBCO0FBQzVDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Aa2V5c3RhdGljL3RlbXBsYXRlcy1uZXh0anMvLi9ub2RlX21vZHVsZXMvQGtleXN0YXRpYy9uZXh0L2Rpc3Qva2V5c3RhdGljLW5leHQtcm91dGUtaGFuZGxlci5qcz8wZTg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1ha2VHZW5lcmljQVBJUm91dGVIYW5kbGVyIH0gZnJvbSAnQGtleXN0YXRpYy9jb3JlL2FwaS9nZW5lcmljJztcblxuZnVuY3Rpb24gbWFrZVJvdXRlSGFuZGxlcihfY29uZmlnKSB7XG4gIGNvbnN0IGhhbmRsZXIgPSBtYWtlR2VuZXJpY0FQSVJvdXRlSGFuZGxlcihfY29uZmlnLCB7XG4gICAgc2x1Z0Vudk5hbWU6ICdORVhUX1BVQkxJQ19LRVlTVEFUSUNfR0lUSFVCX0FQUF9TTFVHJ1xuICB9KTtcbiAgYXN5bmMgZnVuY3Rpb24gd3JhcHBlZEhhbmRsZXIocmVxdWVzdCkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIC8vIG5leHQgcmVwbGFjZXMgMTI3LjAuMC4xIHdpdGggbG9jYWxob3N0IGluIHRoZSB1cmwgb3Igc29tZXRoaW5nIGxpa2UgdGhhdFxuICAgIGlmICh1cmwuaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnKSB7XG4gICAgICB1cmwuaG9zdG5hbWUgPSAnMTI3LjAuMC4xJztcbiAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwudG9TdHJpbmcoKSwgcmVxdWVzdCk7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIGJvZHksXG4gICAgICBoZWFkZXJzLFxuICAgICAgc3RhdHVzXG4gICAgfSA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCk7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShib2R5LCB7XG4gICAgICBzdGF0dXMsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBHRVQ6IHdyYXBwZWRIYW5kbGVyLFxuICAgIFBPU1Q6IHdyYXBwZWRIYW5kbGVyXG4gIH07XG59XG5cbmV4cG9ydCB7IG1ha2VSb3V0ZUhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@keystatic/next/dist/keystatic-next-route-handler.js\n");

/***/ })

};
;